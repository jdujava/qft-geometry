\documentclass[12pt,letterpaper,reqno]{article}

% \usepackage{mathtools}
\usepackage{epsfig}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{indentfirst}
\usepackage{xspace}
\usepackage{multirow}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{verbatim}
\usepackage[letterpaper,margin=1in,headheight=15pt]{geometry}
\usepackage{mathpazo}
\usepackage{tikz-cd}
\usepackage{booktabs}
\usepackage{framed}
\usepackage{float}
\usepackage{thmtools}
\usepackage{dashrule}
\usepackage[missing=]{gitinfo2}
\usepackage{fancyhdr}
\usepackage{slashed}
\usepackage[utf8]{inputenc} % get rid of Biber warning messages
\definecolor{darkblue}{rgb}{0.1,0.1,0.7}
\definecolor{darkred}{rgb}{0.5,0.1,0.1}
\definecolor{darkgreen}{rgb}{0.0,0.42,0.06}
\hypersetup{colorlinks=true,urlcolor=darkred,linkcolor=darkblue,citecolor=darkred}
\definecolor{shadecolor}{rgb}{0.85,0.85,0.85}

% Bibliography formatting
\usepackage[bibstyle=authoryear-comp,labeldate=false,defernumbers=true,maxnames=20,uniquename=init,dashed=false,backend=biber,sorting=none]{biblatex}

\DeclareNameAlias{sortname}{first-last}

\DeclareFieldFormat{url}{\url{#1}}
\DeclareFieldFormat[article]{pages}{#1}
\DeclareFieldFormat[inproceedings]{pages}{\lowercase{pp.}#1}
\DeclareFieldFormat[incollection]{pages}{\lowercase{pp.}#1}
\DeclareFieldFormat[article]{volume}{\textbf{#1}}
\DeclareFieldFormat[article]{number}{(#1)}
\DeclareFieldFormat[article]{title}{\MakeCapital{#1}}
\DeclareFieldFormat[inproceedings]{title}{#1}
\DeclareFieldFormat{shorthandwidth}{#1}

% Don't use "In:" in bibliography. Omit urls from journal articles.
\DeclareBibliographyDriver{article}{%
  \usebibmacro{bibindex}%
  \usebibmacro{begentry}%
  \usebibmacro{author/editor}%
  \setunit{\labelnamepunct}\newblock
  \MakeSentenceCase{\usebibmacro{title}}%
  \newunit
  \printlist{language}%
  \newunit\newblock
  \usebibmacro{byauthor}%
  \newunit\newblock
  \usebibmacro{byeditor+others}%
  \newunit\newblock
  \printfield{version}%
  \newunit\newblock
%  \usebibmacro{in:}%
  \usebibmacro{journal+issuetitle}%
  \newunit\newblock
  \printfield{note}%
  \setunit{\bibpagespunct}%
  \printfield{pages}
  \newunit\newblock
  \usebibmacro{eprint}
  \newunit\newblock
  \printfield{addendum}%
  \newunit\newblock
  \usebibmacro{pageref}%
  \usebibmacro{finentry}}

% Remove dot between volume and number in journal articles.
\renewbibmacro*{journal+issuetitle}{%
  \usebibmacro{journal}%
  \setunit*{\addspace}%
  \iffieldundef{series}
    {}
    {\newunit
     \printfield{series}%
     \setunit{\addspace}}%
  \printfield{volume}%
%  \setunit*{\adddot}%
  \printfield{number}%
  \setunit{\addcomma\space}%
  \printfield{eid}%
  \setunit{\addspace}%
  \usebibmacro{issue+date}%
  \newunit\newblock
  \usebibmacro{issue}%
  \newunit}


% Bibliography categories
\def\makebibcategory#1#2{\DeclareBibliographyCategory{#1}\defbibheading{#1}{\section*{#2}}}
\makebibcategory{books}{Books}
\makebibcategory{papers}{Refereed research papers}
\makebibcategory{chapters}{Book chapters}
\makebibcategory{conferences}{Papers in conference proceedings}
\makebibcategory{techreports}{Unpublished working papers}
\makebibcategory{bookreviews}{Book reviews}
\makebibcategory{editorials}{Editorials}
\makebibcategory{phd}{PhD thesis}
\makebibcategory{subpapers}{Submitted papers}
\makebibcategory{curpapers}{Current projects}

\setlength{\bibitemsep}{2.65pt}
\setlength{\bibhang}{.8cm}
\renewcommand{\bibfont}{\small}

\renewcommand*{\bibitem}{\addtocounter{papers}{1}\item \mbox{}\hskip-0.85cm\hbox to 0.85cm{\hfill\arabic{papers}.~~}}
\defbibenvironment{bibliography}
{\list{}
  {\setlength{\leftmargin}{\bibhang}%
   \setlength{\itemsep}{\bibitemsep}%
   \setlength{\parsep}{\bibparsep}}}
{\endlist}
{\bibitem}

\newenvironment{publications}{\section{\LARGE Publications}\label{papersstart}\vspace*{0.2cm}\small
\titlespacing{\section}{0pt}{1.5ex}{1ex}\itemsep=0.00cm
}{\label{papersend}\addtocounter{sumpapers}{-1}\refstepcounter{sumpapers}\label{sumpapers}}

\def\printbib#1{\printbibliography[category=#1,heading=#1]\lastref{sumpapers}}

% Counters for keeping track of papers
\newcounter{papers}\setcounter{papers}{0}
\newcounter{sumpapers}\setcounter{sumpapers}{0}
\def\lastref#1{\addtocounter{#1}{\value{papers}}\setcounter{papers}{0}}

% theorem environments
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,notefont=\normalfont\bfseries, notebraces={(}{)}]{theorem}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont,notefont=\normalfont\bfseries, notebraces={(}{)}]{noital}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont\color{darkgreen},notefont=\normalfont\bfseries, notebraces={(}{)}]{green}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont,notefont=\normalfont\bfseries,qed=$\qedsymbol$,notebraces={(}{)}]{proofstyle}

\declaretheorem[name=Theorem,numberwithin=section,style=theorem]{thm}
\declaretheorem[name=Fact,numberwithin=section,style=theorem]{fact}
\declaretheorem[name=Proposition,sibling=thm,style=theorem]{prop}
\declaretheorem[name=Corollary,sibling=thm,style=theorem]{cor}
\declaretheorem[name=Lemma,sibling=thm,style=theorem]{lem}
\declaretheorem[name=Definition,sibling=thm,style=noital]{defn}
\declaretheorem[name=Example,sibling=thm,style=noital]{example}
\declaretheorem[name=Exercise,numberwithin=section,style=green]{exercise}
\declaretheorem[name=Proof,style=proofstyle,numbered=no]{pf}

\numberwithin{equation}{section}


% macros for convenience
\newcommand{\tops}{\texorpdfstring}

\newcommand{\nid}{\noindent}

\newcommand{\fa}{{\mathfrak a}}
\newcommand{\fp}{{\mathfrak p}}
\newcommand{\fk}{{\mathfrak k}}
\newcommand{\fg}{{\mathfrak g}}
\newcommand{\fh}{{\mathfrak h}}
\newcommand{\fn}{{\mathfrak n}}
\newcommand{\fq}{{\mathfrak q}}
\newcommand{\fm}{{\mathfrak m}}
\newcommand{\fr}{{\mathfrak r}}
\newcommand{\fu}{{\mathfrak u}}
\newcommand{\fG}{{\mathfrak G}}
\newcommand{\fso}{{\mathfrak {so}}}

\newcommand{\cC}{\ensuremath{\mathcal C}}
\newcommand{\cG}{\ensuremath{\mathcal G}}
\newcommand{\cB}{\ensuremath{\mathcal B}}
\newcommand{\cL}{\ensuremath{\mathcal L}}
\newcommand{\cS}{\ensuremath{\mathcal S}}
\newcommand{\cF}{\ensuremath{\mathcal F}}
\newcommand{\cK}{\ensuremath{\mathcal K}}
\newcommand{\cZ}{\ensuremath{\mathcal Z}}
\newcommand{\cM}{\ensuremath{\mathcal M}}
\newcommand{\cN}{\ensuremath{\mathcal N}}
\newcommand{\cO}{\ensuremath{\mathcal O}}
\newcommand{\cH}{\ensuremath{\mathcal H}}
\newcommand{\cX}{\ensuremath{\mathcal X}}
\newcommand{\cY}{\ensuremath{\mathcal Y}}
\newcommand{\cA}{\ensuremath{\mathcal A}}
\newcommand{\cI}{\ensuremath{\mathcal I}}

\newcommand{\R}{\ensuremath{\mathbb R}}
\newcommand{\C}{\ensuremath{\mathbb C}}
\newcommand{\PP}{\ensuremath{\mathbb P}}
\newcommand{\Z}{\ensuremath{\mathbb Z}}
\newcommand{\Q}{\ensuremath{\mathbb Q}}
\newcommand{\A}{\ensuremath{\mathbb A}}
\newcommand{\bbH}{\ensuremath{\mathbb H}}
\newcommand{\bbI}{\ensuremath{\mathbb I}}
\newcommand{\bS}{\ensuremath{\mathbb S}}

\newcommand{\half}{\ensuremath{\frac{1}{2}}}
\newcommand{\qtr}{\ensuremath{\frac{1}{4}}}
\newcommand{\bq}{{\mathbf q}}
\newcommand{\N}{{\mathcal N}}
\newcommand{\F}{{\mathcal F}}
\newcommand{\HH}{{\mathcal H}}
\newcommand{\LL}{{\mathcal L}}
\newcommand{\RR}{{\mathcal R}}
\newcommand{\V}{{\mathcal V}}
\newcommand{\dirac}{\slashed{\partial}}
\newcommand{\cE}{{\mathcal E}}
\newcommand{\vs}{\not\!v}
\newcommand{\kahler}{K\"ahler\xspace}
\newcommand{\kq}{/\!\!/}
\newcommand{\kql}[1]{/\!\!/\!\!_#1\,}
\newcommand{\hk}{hyperk\"ahler\xspace}
\newcommand{\Hk}{Hyperk\"ahler\xspace}
\newcommand{\hkq}{/\!\!/\!\!/\!\!/}
\newcommand{\hkql}[1]{/\!\!/\!\!/\!\!/\!\!_#1\,}
\newcommand{\del}{\ensuremath{\partial}}
\newcommand{\delbar}{\ensuremath{\overline{\partial}}}
\newcommand{\I}{{\mathrm i}}
\newcommand{\J}{{\mathrm j}}
\newcommand{\K}{{\mathrm k}}
\newcommand{\e}{{\mathrm e}}
\newcommand\bid{{\mathbf 1}}
\newcommand{\de}{\mathrm{d}}
\newcommand{\ab}{\mathrm{ab}}
\newcommand{\vol}{\mathrm{vol}}
\renewcommand{\sf}{\mathrm{sf}}
\newcommand{\inst}{\mathrm{inst}}
\newcommand{\eff}{\mathrm{eff}}
\newcommand{\rmtop}{\mathrm{top}}
\newcommand{\rmbot}{\mathrm{bot}}
\newcommand{\dR}{\mathrm{dR}}
\newcommand{\closed}{\mathrm{closed}}
\newcommand{\exact}{\mathrm{exact}}

\newcommand{\abs}[1]{\lvert#1\rvert}
\newcommand{\norm}[1]{\lVert#1\rVert}
\newcommand{\IP}[1]{\langle#1\rangle}
\newcommand{\ket}[1]{\lvert#1\rangle}
\newcommand{\DIP}[1]{\langle\!\langle#1\rangle\!\rangle}
\newcommand{\dwrt}[1]{\frac{\partial}{\partial#1}}
\newcommand{\eps}{\epsilon}
\newcommand{\simarrow}{\xrightarrow\sim}

\newcommand{\tlambda}{\widetilde\lambda}

\newcommand{\mmaref}[1]{}

\newcommand{\ti}[1]{\textit{#1}}
\newcommand{\tb}[1]{\textbf{#1}}

\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\dvol}{dvol}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\re}{Re}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\STr}{STr}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Bun}{Bun}
\DeclareMathOperator{\Vect}{Vect}
\DeclareMathOperator{\Span}{Span}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\ind}{ind}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\Jac}{Jac}
\DeclareMathOperator{\Ric}{Ric}
\DeclareMathOperator{\Hol}{Hol}
\DeclareMathOperator{\gr}{gr}
\DeclareMathOperator{\Pin}{Pin}
\DeclareMathOperator{\Spin}{Spin}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\SU}{SU}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\U}{U}
\DeclareMathOperator{\Cliff}{Cliff}
\DeclareMathOperator{\vertices}{vertices}
\DeclareMathOperator{\edges}{edges}
\DeclareMathOperator{\Obs}{Obs}
\DeclareMathOperator{\Ber}{Ber}
\DeclareMathOperator{\Pf}{Pf}
\DeclareMathOperator{\Euler}{Euler}
\DeclareMathOperator{\Hess}{Hess}
\DeclareMathOperator{\Map}{Map}
\DeclareMathOperator{\Isom}{Isom}

\newcommand{\insfig}[2]{

\medskip
\noindent
\begin{minipage}{\linewidth}
\makebox[\linewidth]{\includegraphics[keepaspectratio=true,scale=#2]{figures/#1-crop.pdf}}
\end{minipage}
\noindent}


% \newcommand{\insfig}[2]{\begin{figure}[htbp] \centering \includegraphics[scale=#2]{figures/#1-crop.pdf} \label{fig:#1} \end{figure}}
% syntax: \insfig{name}{0.5}{caption}

\newcommand{\fixme}[1]{{\color{orange}{[#1]}}}
\newcommand{\currentposition}{{\color{blue} \noindent\makebox[\linewidth]{\hdashrule{\paperwidth}{1pt}{3mm}}}}

% \mathtoolsset{showonlyrefs}

\bibliography{qft-geometry}

\begin{document}

\pagestyle{fancy}
\lhead{{\tiny \color{gray} \tt \gitAuthorIsoDate}}
\chead{\tiny \ti{Applications of QFT to Geometry, \tb{preliminary} and \tb{incomplete} draft}}
\rhead{{\tiny \color{gray} \tt \gitAbbrevHash}}
\renewcommand{\headrulewidth}{0.5pt}


\begin{center}
\tb{Applications of QFT to Geometry} \\
Andrew Neitzke \\
\tb{Preliminary} and \tb{incomplete} draft
\end{center}

{These are the notes for a Fall 2017
course at UT Austin, \ti{in progress}.
They are extremely incomplete, unreliable, full
of mistakes and omissions.
The latest PDF can always be found
at
\begin{center}
\small \url{http://ma.utexas.edu/users/neitzke/teaching/392C-qft-geometry/qft-geometry.pdf}
\end{center}
Please send corrections/improvements to
\begin{center}
\small \tt\href{mailto:neitzke@math.utexas.edu}{neitzke@math.utexas.edu}
\end{center}
or as pull requests to the source repository hosted at
\begin{center}
\small \url{http://github.com/neitzke/qft-geometry}
\end{center}
I thank Arun Debray, Behzat Ergun, Richard Hughes, Robbie Rosati, 
Ivan Tulli and Val Zakharevich for very helpful
suggestions and corrections.

You can join a Slack channel for the course (needs {\tt {@math.utexas.edu}} address)
at
\begin{center}
\small \url{https://join.slack.com/t/qft-geometry/signup} 
\end{center}
}

\tableofcontents
% \renewcommand{\listtheoremname}{Quick reference}
% \listoftheorems[onlynamed]

% \newpage

%\setcounter{page}{1}


\section{Introductory motivation}

\subsection{Linear equations}
Suppose we are interested in studying
the topology of smooth manifolds $X$.
One powerful tool for this purpose is to
introduce an ingredient which at first seems alien to the
problem: namely we fix a Riemannian metric $g$ on $X$.
This allows us to define the \ti{form Laplacian} \eqref{eq:form-laplacian}
and consider the space of \ti{harmonic forms}
\begin{equation}
  \cH_k(X) = \{ \omega \in \Omega^k(X) \vert \Delta \omega = 0 \}.
\end{equation}

The equation
\begin{equation} \label{eq:laplace}
\Delta \omega = 0
\end{equation}
is a \ti{linear} equation over $\R$.
Thus $\cH_k(X)$ is a \ti{vector space}.
If $X$ is compact, then $\cH_k(X)$ is moreover finite-dimensional (a consequence of
the fact that $\Delta$ is an \ti{elliptic} operator). Thus we can define
positive integers by
\begin{equation}
  b_k(X) = \dim_\R \cH_k(X).
\end{equation}
There is a remarkable fact about these integers:
\begin{fact} \label{fact:betti-numbers-are-topological} The integers $b_k$ do not depend on the choice of Riemannian metric or smooth
structure on $X$; instead they are invariants of the underlying topological manifold
(the \ti{Betti numbers}).
\end{fact}

\begin{exercise} Work out explicitly the spaces $\cH^k(X)$ and
Betti numbers $b_k(X)$ for some of the following: $X = S^1, T^2, S^2$.
(In each case choose a convenient Riemannian metric; of course the $b_k$
are independent of which metric you choose, though the $\cH_k(X)$
naively are not.)
\end{exercise}

\autoref{fact:betti-numbers-are-topological}
is a consequence of a stronger, ``categorified'' statement:
\begin{fact} There is a canonical isomorphism
\begin{equation}
  \cH_k(X) \simeq H^k(X,\R)
\end{equation}
(where $H^k$ means de Rham or singular cohomology).
\end{fact}

If $X$ is an oriented Riemannian $4n$-manifold then there is a small refinement of the
middle Betti number $b_{2n}$:
we have the ``Hodge star'' operator
\begin{equation}
  \star: \Omega^{2n}(X) \to \Omega^{2n}(X)
\end{equation}
which has the crucial properties
\begin{itemize}
  \item $\star^2 = 1$,
  \item $[\star, \Delta] = 0$.
\end{itemize}
The first property says we can decompose into the $\pm 1$-eigenspaces
for $\star$:\footnote{concretely $\omega = \half(1 + \star) \omega + \half(1 - \star) \omega $}
\begin{equation}
  \Omega^{2n}(X) = \Omega^{2n,+}(X) \oplus \Omega^{2n,-}(X).
\end{equation}
Combining this with the second property one sees that the harmonic forms also decompose:
\begin{equation}
  \cH_{2n}(X) = \cH_{2n}^+(X) \oplus \cH_{2n}^-(X), \qquad b_{2n}(X) = b_{2n}^+(X) + b_{2n}^-(X).
\end{equation}

\begin{exercise} Suppose instead that $X$ is an oriented  $(4n+2)$-manifold. Here the story is a bit different, because in dimension $k = 2n+1$
we have $\star^2 = -1$.
Show that in this case the Betti number $b_{2n+1}(X)$ is even.
(Is this still true if $X$ is not orientable?)
\end{exercise}


\subsection{Nonlinear equations}

Now we will replace the linear equation
\eqref{eq:laplace} by a \ti{nonlinear} equation.

Unlike linear equations --- which in some sense behave uniformly
in the dimension --- nonlinear equations tend to behave very
differently in different dimensions. With this in mind
we now specialize to the case $\dim X = 4$.
In this case, a new source of topological
(or more precisely smooth) invariants was discovered
by Donaldson in the 1980s. For an excellent reference see \cite{MR1079726}.

Fix a compact Lie group $G$ and let $P$ denote a principal $G$-bundle over $X$. Then
we consider \ti{connections} in $P$.\footnote{For background on connections in principal
bundles I like \cite{spivak} or \cite{Kobayashi1996a}, or for a briefer and to-the-point 
account \cite{Freed1992}.}
A connection in $P$ may be locally represented by a $1$-form\footnote{By ``locally'' here I mean ``on a patch $U \subset X$ where we
have chosen a trivialization of the bundle $P \vert_U$.''}
\begin{equation}
  A \in \Omega^1(\fg),
\end{equation}
and has a curvature $2$-form $F \in \Omega^2(\fg_P)$,\footnote{$\fg_P$ means the \ti{associated bundle} to $P$ using the
adjoint action of $G$ on $\fg$, sometimes written $P \times_G \fg$; 
again see \cite{spivak} for this notion. 
$\fg_P$ locally looks like $\fg$ but is globally twisted
by the transition functions of $P$. Some people would call this bundle $\ad P$. 
$\fg_P$ is canonically globally trivial when $\fg$ is abelian, i.e. $\fg_P = X \times \fg$,
so in that case we really have globally $F \in \Omega^2(\fg)$.} 
locally written\footnote{To spell out the 
notation here: suppose $A = A_\mu^a T_a \de x^\mu$, with $T_a$ a basis for $\fg$, and define the structure constants
$f_{ab}^c$ by $[T_a, T_b] = f_{ab}^c T_c$; then $A \wedge A = \half f_{ab}^c T_c A_\mu^a A_\nu^b \de x^\mu \wedge \de x^\nu$.
Some people prefer to write this term as $\half [A,A]$, which makes it more obviously sensible
for arbitrary Lie groups as opposed to matrix groups. It vanishes when $\fg$ is abelian, so then we just have
$F = \de A$.}
\begin{equation} \label{eq:curvature}
  F = \de A + A \wedge A \in \Omega^2(\fg).
\end{equation}

Now, since $F$ is a $2$-form and we are in $4$ dimensions,
we can decompose $F$ under $\star$ as
\begin{equation}
  F = F^+ + F^-.
\end{equation}
The \ti{anti-self-dual Yang-Mills equation} is
\begin{equation} \label{eq:sdym}
  F^+ = 0.
\end{equation}
We view this as a condition on the connection.
For $G$ abelian (e.g. for $G = \U(1)$) the equation \eqref{eq:sdym} is linear in $A$.
% It simply says
% \begin{equation}
%   \de A = \star \de A.
% \end{equation}
% \begin{exercise}
% ...
% \end{exercise}
For $G$ nonabelian (e.g. for $G = SU(2)$) this
equation is \ti{nonlinear} in $A$, because of the quadratic part in \eqref{eq:curvature}.

\begin{exercise} Write out \eqref{eq:sdym} in detail in components, in two cases:
\begin{itemize}
  \item For $G = \U(1)$: in this case you should get a system of $3$ linear equations for $4$ functions $A_\mu$
  ($\mu \in \{1,2,3,4\}$).
  \item For $G = \SU(2)$: in this case you should get a system of $9$ coupled nonlinear equations for
  $12$ functions $A^a_\mu$ ($\mu \in \{1,2,3,4\}$, $a \in \{1,2,3\}$).
\end{itemize}
\end{exercise}

% From now on we specialize to the interesting case $G = SU(2)$.
We consider the \ti{instanton moduli space}
\begin{equation}
  \cM = \{ \text{connections on $P$ obeying \eqref{eq:sdym}} \} / \fG
\end{equation}
where $\fG$ is the infinite-dimensional group of \ti{gauge transformations} ie
sections of $\Aut(P)$, acting on connections. Locally, a gauge transformation
is represented by a map $g: U \to G$, and then
this action is given by
\begin{equation}
  A \to g^{-1} A g + g^{-1} \de g.
\end{equation}

\begin{exercise}
Write out the action of $\fG$ on connections
explicitly in components, when $G = \U(1)$ or $G = \SU(2)$.
(It may be convenient to consider the case where $g$ is given as
the exponential of a Lie algebra element, e.g. for $G = \U(1)$
the formulas will be simplest if you write $g = \exp(\chi T)$ with $\chi$
the generator of ${\mathfrak u}(1)$, and $\chi: U \to \R$ an ordinary function.)
\end{exercise}

\begin{exercise}
Show that when $G = \U(1)$, the structure of $\cM$ depends on
the image of $c_1(P)/2\pi \in H^2(X,\Z)$ under the map
$p: H^2(X,\Z) \to H^2(X,\R)$; namely, if $p(c_1(P)/2\pi) \in \cH^2_-$
then $\cM$ is $H^1(X,\R) / H^1(X,\Z)$, and otherwise $\cM$ is empty.
\fixme{warning: needs Hodge theory}
\fixme{warning: I got this wrong twice already, hopefully it's right now}
\end{exercise}

When $G$ is nonabelian, the situation is much more difficult.
Nevertheless $\cM$ can be studied and moreover it turns out to have a 
reasonable geometric structure, as follows.

From now on let us specialize to the case $G = \SU(2)$.
In this case $P$ is classified by the integer
\begin{equation}
  k = \int_X c_2(P).
\end{equation}

\begin{fact}
If $k>0$ and the metric $g$ on $X$ is \ti{generic} (in a suitable sense), 
then $\cM$ is a finite-dimensional manifold.
\end{fact}
(For non-generic $g$, $\cM$ is still close to being a manifold, but 
may develop singularities corresponding
to reducible solutions of \eqref{eq:sdym}.)


\subsection{Donaldson invariants}

Donaldson's idea was to extract information about $X$ from
the study of $\cM$. The direct nonlinear analogue of the Betti numbers is the
\ti{dimension} of $\cM$: it turns out to be (for $X$ connected)
\begin{equation}
  \dim \cM = 8k - 3 (1 - b_1(X) + b_2^+(X)).
\end{equation}
But because $\cM$ is nonlinear there is more to it than just its dimension.
Donaldson introduced an \ti{orientation} on $\cM$
and a family of canonically defined
closed differential forms $\tau_\alpha \in \Omega^*(\cM)$,
labeled by classes $\alpha \in H_*(X,\Z)$.
Then he defined new invariants $\IP{\cO_{\alpha_1} \cdots \cO_{\alpha_\ell}}$
by, schematically,
\begin{equation} \label{eq:donaldson-integral}
  \IP{\cO_{\alpha_1} \cdots \cO_{\alpha_\ell}} = \int_\cM \tau_{\alpha_1} \wedge \cdots \wedge \tau_{\alpha_\ell},
\end{equation}
and proved that they are independent of the Riemannian metric
$g$ (under the technical
assumption $b_2^+(X) > 1$.)

These invariants proved very powerful: they could detect phenomena invisible to 
the standard differential-topology methods \fixme{explain something proved using them?} 
However, they were also very technically
difficult to control, particularly because $\cM$ is typically
\ti{noncompact}, so that integration over $\cM$ is a delicate operation.


\subsection{QFT and Donaldson invariants}

In 1988, following some provocative suggestions of Atiyah,
Witten found a remarkable new way of thinking about
the Donaldson invariants \cite{Witten:1988ze}: he interpreted them
in terms of a certain quantum field theory (QFT),
\ti{topologically twisted $\N=2$ supersymmetric Yang-Mills theory}.
Very roughly, Witten imagined $X$ to be the ``spacetime''
in some hypothetical universe, where the laws of physics are governed
by topologically twisted $\N=2$ supersymmetric Yang-Mills theory,
and then imagined
making some ``experimental measurements'' in that universe --- captured
in QFT language by \ti{correlation functions}.

According to the rules of Lagrangian QFT\footnote{Lagrangian QFTs are an
important and widely studied class of QFTs, which feature prominently
(for good reason) in one's early QFT education. Nevertheless, not
all QFTs are of this sort; for QFTs which are not Lagrangian, one
needs other tools for computing the correlation functions. Many of the
most interesting mathematical and physical applications of QFT
involve non-Lagrangian QFTs.}
correlation functions are supposed to be integrals over an
infinite-dimensional space $\cC$, of the form
\begin{equation} \label{eq:correlator}
 \IP{\cO_\alpha} = \int_\cC \de \mu \, \Phi_\alpha \e^{-S},
\end{equation}
where $S: \cC \to \R$ is the ``action'' of the theory,
$\de \mu$ is some measure of integration,
and $\Phi_\alpha: \cC \to \R$ are the ``classical observables.''
$\cC$ is sometimes called the ``space of fields''; in a general Lagrangian QFT, it is
something like the space of all\footnote{The meaning of ``all'' will
hopefully become clearer as we go on.} functions on $X$ (or maybe differential forms on $X$,
connections on bundles over $X$, sections of bundles over $X$, etc; different theories involve
different notions of fields.) 
% In the particular theory we are considering,
% $\cC$ and $S$ are given in \S\ref{sec:intro-action} below.

In general, correlation functions \eqref{eq:correlator}
are difficult to calculate.
In topologically twisted $\N=2$ supersymmetric Yang-Mills theory, 
however, there is a remarkable
\ti{localization} phenomenon which reduces the desired
integrals \eqref{eq:correlator} to the simpler
finite-dimensional integrals \eqref{eq:donaldson-integral} above.

% One of the aims of this course is to give some meaning to these
% phrases. It must suffice now to say: a quantum field theory is a
% rather complicated object, with much more structure than was
% at first apparent in Donaldson theory, and correlation functions
% are one of the basic objects of study in quantum field theory.

Impressive as this discovery was, it did not lead to an immediate
breakthrough in Donaldson theory:
the formulas one could directly
derive from the QFT perspective were just the \ti{same} formulas
already written down by Donaldson. In 1994 Witten
pushed forward somewhat further, using QFT to compute Donaldson invariants
in the special case where $X$ is a 
\kahler manifold \cite{Witten:1994ev}. But the next major development 
had to wait for progress in physics: what was needed was a better understanding of the 
physics of $\N=2$ supersymmetric Yang-Mills theory.


\subsection{The action} \label{sec:intro-action}

For aficionados, here is
the standard way that a physicist would define
$\N=2$ supersymmetric Yang-Mills theory, in Euclidean signature,
on the spacetime $X = \R^4$.

First, we need to fix a compact Lie group $G$ and two couplings: $g \in \R_+$ and
$\vartheta \in \R / 2 \pi \Z$. The QFT we want to describe depends on these
data.

We fix also an auxiliary $2$-dimensional complex vector space $R$, carrying
Hermitian structure $\delta: R \otimes \overline R \to \C$
and volume form $\eps \in \wedge^2(R)$. (Concretely, you may as well pick
$R = \C^2$ with its standard Hermitian structure and volume form. The main reason for
calling it $R$ now is that later we will replace it by a rank $2$ Hermitian
vector bundle over $X$.)

Then we let $\cC$ be the space of fields:
\begin{itemize}
\item $(P,\nabla)$ a principal $G$-bundle with connection (with curvature $F$),
\item $\phi \in \Gamma(\fg_{\C,P})$,
\item $\lambda^\pm \in \Pi \Gamma(S^\pm \otimes \fg_{\C,P} \otimes R)$,
\item $D \in \Gamma(\fg_{\C,P} \otimes \Sym^2 R)$,
\end{itemize}
where $S^\pm$ are the spin representations of $\Spin(4)$. The symbol $\Pi$ here means ``parity change''
which means $\lambda^\pm$ are \ti{Grassmann-odd} fields: we will explain this (or at least get used to it)
later.

The \ti{action} is: \fixme{explain notation $v$, $w$ and inner product $\IP{,}$, and double-check factors}
\begin{multline} \label{eq:n=2sym-action}
 S = \frac{1}{g^2} \int_X \Tr\left( - \frac14 F \wedge \star F + \nabla_\mu \bar\phi \nabla^\mu \phi - \I \delta^{vw} \IP{\lambda_v^-, \slashed\nabla \lambda_w^+} + \frac14 \delta^{vv'} \delta^{ww'} D_{vw} D_{v'w'} - \half [\phi, \bar\phi]^2 \right. \\ \left. - \I \sqrt{2} \eps^{vw} \IP{\lambda_v^-, [\bar\phi, \lambda_w^-]} + \I \sqrt{2} \eps^{vw} \IP{\lambda_v^+, [\phi,\lambda_w^+]} \right) \\ + \frac{\I \vartheta}{4\pi^2} \int_X \Tr (F \wedge F).
\end{multline}

As described here, the theory only makes sense on $X = \R^4$.
Later we will describe Witten's modification of the
theory (topological twisting)
which we will use when we put it on a general Riemannian $4$-manifold $X$.

\subsection{Effective field theory: an analogy}

The real breakthrough came with the work of Seiberg and Witten
in 1995 \cite{Seiberg:1994rs}.
In this work Seiberg and Witten answered a fundamental
question about $\cN=2$ supersymmetric Yang-Mills theory:
\ti{how does the theory behave at low energies?}

To understand how important this question is, let us make a quick
analogy. Suppose that we want to study a pond full of water and how
it will respond to, say, a gentle breeze, or a small toy boat.
One approach to this problem which we could imagine would be to say
to ourselves: well, the pond is made of about $10^{30}$ protons,
neutrons and electrons; let's write down equations governing those objects,
put them on the biggest supercomputer we can find, make a model for the
perturbation we want to study, and then have the computer solve the
equations and tell us what will happen. This (if it could be done)
would be in some sense the most \ti{direct} method.
Of course it is also completely hopeless.

In practice, we know that the relevant physical laws
governing a pond full of water are the Navier-Stokes equations. These
describe the dynamics of new ``effective''
variables (velocity, pressure, density, viscosity), whose relation
to the underlying $10^{30}$ particles would be complicated
to describe directly. Nevertheless Navier-Stokes is really the
description we want, for our practical purpose of studying boats
interacting with a pond. (It is probably \ti{not} the
relevant description if we want to know what will happen if we shoot the
pond with a high-intensity laser!)

The really hard and important problem is to go from the high-energy
description (elementary particles) to the low-energy description
(Navier-Stokes equations). Once this problem has been solved once,
we can then use the low-energy description to answer the questions
we care about.


\subsection{Seiberg-Witten equations}

Seiberg and Witten in \cite{Seiberg:1994rs}
solved the analogous problem for $\cN=2$
supersymmetric Yang-Mills theory. Beginning with the action
\eqref{eq:n=2sym-action} (high-energy description) for $G = \SU(2)$,
they completely determined the low-energy description.
It turned out that this description is also in terms of gauge theory,
but this time gauge theory for the group $G' = \U(1)$ (coupled to matter):
the nonabelian group $\SU(2)$, with all its attendant
nonlinearities, is gone!

Then one can try to compute the results of experiments, now using this
effective low-energy description.
As before, the answer turns out to localize on some simple equations;
but now instead of \eqref{eq:sdym} the equations are
the \ti{Seiberg-Witten equations}\footnote{Some authors, including Witten in \cite{Witten:1994cg},
call \eqref{eq:sw} the \ti{monopole equations}. I think it is a good idea to avoid this name in order
not to confuse \eqref{eq:sw} with the \ti{Bogomolny equations} whose solutions are
monopoles: the relation between the field $\psi$ and the monopoles described by
Bogomolny equations is rather subtle. We will explore it later in the course.}
\begin{subequations} \label{eq:sw}
\begin{align}
  F^+ &= q(\psi, \bar\psi), \\
  \slashed{D} \psi &= 0,
\end{align}
\end{subequations}
where the fields are:
\begin{itemize}
\item $D$ is a connection in a $\U(1)$-bundle $E$
(more precisely $E$ is the determinant line of a $\Spin^c$-structure on $X$),
\item $\psi$ is a section of $S^+$, with $S^+$ the spinor bundle
attached to the $\Spin^c$-structure,
\end{itemize}
and $q$ is a certain
quadratic map $S^+ \otimes S^+ \to \wedge^2_+(T^* X)$.
For an economical explanation of these equations see
\cite{MR1367507}.

In our analogy to the physics of a pond,
\eqref{eq:sw} is the moral analogue
of the Navier-Stokes equations.
What all this suggests is that \eqref{eq:sw} should be
just as powerful in $4$-manifold topology as was
\eqref{eq:sdym}, but in some sense easier to work with,
since in passing to \eqref{eq:sw} we have gotten rid
of some irrelevant complexity. This point of view was
advocated by Witten in the paper \cite{Witten:1994cg}
and it turned out to be correct.
This was the
beginning of a revolution in $4$-manifold topology which continues
to the present day.

One preliminary indication that the effective (Seiberg-Witten) description may be more convenient
than the high-energy (Donaldson) description is:
\begin{fact}
If the metric $g$ on $X$ is generic, then the moduli space
\begin{equation}
  \widetilde\cM = \{ \text{pairs $(D,\psi)$ obeying \eqref{eq:sw}} \} / \fG'
\end{equation}
is smooth and compact.
\end{fact}
This is very different from the space $\cM$ which is definitely \ti{not} compact for $k > 0$.


\subsection{Our goals}

In this course we are going to explore various geometric applications of quantum
field theory, emphasizing the two really nontrivial ingredients which have appeared
above:
\begin{itemize}
\item \ti{Localization}: the mechanism by which the formal
integrals over infinite-dimensional spaces which appear in quantum field theory
get related to finite-dimensional integrals which can be defined and computed.
One derives (in the physicist's sense) nontrivial facts about the finite-dimensional integrals,
using the infinite-dimensional integrals (i.e. the QFT) at some intermediate
stages.
\item \ti{Effective field theory}: the reduction from a complicated ``high-energy'' description
to a simple ``low-energy'' description of a physical system (say, a QFT).
\end{itemize}
Very roughly speaking, QFTs get more complicated as the dimension of spacetime increases.
Dimension $0$ and $1$ are relatively tractable --- even mathematically rigorous,
with some effort. In dimension $2$ there are still many rigorous things that can be said,
but already we begin facing difficulties, and these become more serious in dimensions $3$ and $4$.

I expect that we will study dimension $0$, dimension $1$, maybe a short stop in dimension $2$,
then jump to dimension $4$. The level of rigor will be inversely correlated with the dimension.


% \begin{center}
% \begin{tabular}{c|c}

% \end{tabular}
% \end{center}


\section{QFT in \texorpdfstring{$0$}{0} dimensions} \label{sec:0d-qft}

\subsection{The partition function and expectation values}

As we have explained above, Lagrangian QFT on a spacetime $X$ generally involves performing integrals
over some space $\cC$ of (perhaps generalized) functions on $X$. Thus $\cC$ is almost 
always infinite-dimensional,
but there is one key exception: the case where $X$ is $0$-dimensional. Let's explore that case.
We take $X$ to be just a point,
and $\cC$ to be the space of real-valued functions on a point, i.e.
\begin{equation}
  \cC = \R.
\end{equation}
Then, let's define the action
\begin{equation}
  S: \cC \to \R
\end{equation}
by
\begin{equation} \label{eq:0d-action-quartic}
  S(x) = \frac{m}{2} x^2 + \frac{\lambda}{4!} x^4, \qquad \lambda \ge 0, \ m > 0.
\end{equation}
Now we can define the \ti{partition function},\footnote{Incidentally, it turns out that in this particular theory $Z(m,\lambda)$ 
actually has a name: e.g. Mathematica gives it as
\begin{equation}
  Z(m,\lambda) = \sqrt{\frac{3m}{\lambda}} \e^{3 m^2 / 4 \lambda} K_{\frac14} \left(\frac{3m^2}{\lambda}\right).
\end{equation}
This should increase your confidence that we are dealing here with
an absolutely concrete and well-defined function.}
\begin{equation} \label{eq:0d-partition-fn}
  Z = \int_{-\infty}^\infty \de x \, \e^{-S(x)}.
\end{equation}
More generally, let's define an \ti{observable} to be any polynomial function $f: \cC \to \R$, and
then define its \ti{(unnormalized) expectation value}
\begin{equation} \label{eq:0d-expectation-values}
  \IP{f} = \int_{-\infty}^\infty \de x \, f(x) \e^{-S(x)}.
\end{equation}
Thus, we have
\begin{equation}
  Z = \IP{1}.
\end{equation}
Both \eqref{eq:0d-partition-fn} and \eqref{eq:0d-expectation-values} are functions of
$\lambda$ and $m$.



\subsection{The perturbation series}

Now, how do we \ti{compute} these functions? Let's start with $Z$, given by \eqref{eq:0d-partition-fn}.
At $\lambda = 0$, the integral \eqref{eq:0d-partition-fn}
is easy to do:
\begin{equation} \label{eq:0d-Z0}
  Z_0 = Z(m, \lambda = 0) = \sqrt\frac{2\pi}{m}.
\end{equation}
For other $\lambda$, what to do? Computing for arbitrary $\lambda$ looks hard, but since $\lambda = 0$ was
easy, let's try to get the expansion around $\lambda = 0$. 
We begin by expanding the exponential under the integral sign:
\begin{equation}
  Z(m, \lambda) = \int_{-\infty}^\infty \sum_{n=0}^\infty \left( \frac{-\lambda}{4!} \right)^n \frac{x^{4n}}{n!} \e^{-\frac{m}{2} x^2}
\end{equation}
Next we make a dubious step: we exchange the orders of summation and integration.
\begin{equation} \label{eq:dubious-exchange}
  Z(m, \lambda) \, \text{''=''} \, \sum_{n=0}^\infty \left( \frac{-\lambda}{4!} \right)^n \int_{-\infty}^\infty \frac{x^{4n}}{n!} \e^{-\frac{m}{2} x^2}
\end{equation}
Next we use a fundamental integral identity:
\begin{equation} \label{eq:correlator-integral-0d}
  \int_{-\infty}^\infty \de x\,x^{2k} \e^{-\frac{m}{2}x^2}  = \sqrt\frac{2\pi}{m} \frac{1}{m^k} \frac{(2k)!}{k!2^k}.
\end{equation}
\begin{exercise} Prove the formula \eqref{eq:correlator-integral-0d}.
\end{exercise}
Using \eqref{eq:correlator-integral-0d} the integrals in \eqref{eq:dubious-exchange} can be done term by term, yielding
\begin{align} \label{eq:0d-perturbation-series}
  Z(m, \lambda) \, &\text{''=''} \, \sqrt\frac{2\pi}{m} \sum_{n=0}^\infty \left( - \frac{1}{96} \right)^n \frac{(4n)!}{n!(2n)!} \, \tlambda^n, \qquad \tlambda = \frac{\lambda}{m^2}, \\
  &\text{''=''} \, \sqrt\frac{2\pi}{m} \left(1 - \frac18 \tlambda + \frac{35}{384} \tlambda^2 + \cdots + (1390.1 \dots) \tlambda^{10} + \cdots \right).
\end{align}



\subsection{Meaning of the perturbation series}

Looking at the coefficients, we see at once that \eqref{eq:0d-perturbation-series} 
diverges for all $\lambda \neq 0$, \ti{despite} the fact that the function
$Z(m,\lambda)$, defined by the integral \eqref{eq:0d-partition-fn}, 
really does exist whenever $\re(\lambda) \ge 0$.
In particular it follows that the interchange of summation and integration leading to
\eqref{eq:dubious-exchange} was not justified (if you try to justify it by the usual methods you will fail
because of lack of uniform convergence \fixme{I think}).

Nevertheless, the series \eqref{eq:0d-perturbation-series} is still useful:
\begin{defn}[Asymptotic series] 
Given a function $f: \R_+ \to \C$, 
the formal series $\sum_{n=0}^\infty c_n t^n$ is an \ti{asymptotic
series for $f$ as $t \to 0^+$} if, for all $N \ge 0$,
\begin{equation}
 \lim_{t \to 0^+} t^{-N} \left\lvert f(t) - \left( \sum_{n=0}^N c_n t^n \right) \right\rvert = 0. 
\end{equation}
In this situation we write $f(t) \sim \sum_{n=0}^\infty c_n t^n$.
\end{defn}
This means
\begin{align}
\lim_{t \to 0^+} \abs{f(t) - c_0} &= 0, \\
\lim_{t \to 0^+} t^{-1} \abs{f(t) - (c_0 + t c_1)} &= 0,
\end{align}
and so on.
\begin{prop}[Perturbation series is an asymptotic series] \label{prop:pert-asymp} The series \eqref{eq:0d-perturbation-series}
is an asymptotic series for $Z(m,\lambda)$ as $\lambda \to 0^+$ for fixed $m$.
\end{prop}

\begin{exercise} Prove \autoref{prop:pert-asymp}. (This amounts to showing that the dubious step
\eqref{eq:dubious-exchange}, while not justified at the level of convergent series, is justified
at the level of asymptotic series. This is a very commonly-occurring situation.)
\end{exercise}

So the precise meaning of the $\text{''=''}$ in \eqref{eq:dubious-exchange}
and \eqref{eq:0d-perturbation-series} above is actually $\sim$.

% Despite the fact that this series is ``only'' asymptotic, it clearly does contain some real information
% about $Z(m,\lambda)$. 
One way to get a vivid illustration of what this asymptotic series
expansion means is to do the next exercise:

\begin{exercise} Make a plot of $Z(m=1,\lambda)$
and the first few truncations of its asymptotic series around $\lambda \to 0^+$.
\end{exercise}

One might wonder whether there could be some \ti{other} series expansion for $Z(m,\lambda)$.
But this is impossible, as the next exercise shows.

\begin{exercise} Do the following:
\begin{enumerate}
\item Show that if $f$ has a convergent Taylor series expansion around $t = 0$ then this expansion
is also an asymptotic expansion as $t \to 0^+$.
\item Show that any $f$ can have at most one asymptotic series expansion.
\end{enumerate}
\end{exercise}

In particular, since $Z(m,\lambda)$ has the divergent asymptotic 
expansion \eqref{eq:0d-perturbation-series} it cannot also
have a convergent one.
For fun, we can diagnose a bit more precisely the problem with $Z$: it has an essential 
singularity at $\lambda = 0$, in the sense of the next exercise.
\begin{exercise} Do the following things.
\begin{enumerate}
\item Show that $Z(m,\lambda) = \frac{1}{\sqrt{m}} f(\tilde\lambda)$ for some $f$.
\item Show that $Z(m,\lambda)$ obeys the differential equation $(2\partial_m)^2 Z = -(4! \partial_\lambda) Z$.
\item Show that $f(\tilde\lambda)$ obeys an ordinary differential equation in $\tilde\lambda$,
with an irregular singularity at $\tilde\lambda = 0$.
\item Show that, for fixed $m$, $Z(m, \lambda)$ admits analytic continuation to a branched cover of $\C \setminus \{ 0 \}$
and this continuation has an essential singularity at $\lambda = 0$.
\item Conclude (again) that $Z(m, \lambda)$ cannot have
a convergent Taylor expansion around $\lambda = 0$.
\end{enumerate}
\end{exercise}

What we have seen here is that even in $0$-dimensional quantum field theory the perturbation series
is ``only'' asymptotic. In higher-dimensional theories, we will meet very similar series, and there
too we expect that these series are usually ``only'' asymptotic.

\begin{exercise} Read the famous paper \cite{Dyson:1952tj} of Freeman Dyson, 
in which he gives a heuristic physical argument that the perturbation series 
in quantum electrodynamics is only asymptotic.
\end{exercise}



\subsection{Feynman diagrams} \label{sec:feynman-diagrams-0d}

Now we revisit \eqref{eq:0d-perturbation-series} and rewrite it one more time, as
\begin{equation} \label{eq:0d-series-rewritten}
  Z(m, \lambda) \, \sim \, \sqrt\frac{2\pi}{m} \sum_{n=0}^\infty \frac{(4n)!}{(2n)! 2^{2n}} \, \frac{(-\tlambda)^n}{(4!)^n n!}, \qquad \tlambda = \frac{\lambda}{m^2}.
\end{equation}
This formula has a neat combinatorial interpretation, in
terms of \ti{Feynman diagrams}, as follows. 

Our basic object is a vertex with $4$ half-edges attached.
% Such a vertex will ``carry'' a factor $-\tlambda$.
\insfig{qft-geometry-1}{0.8}
To construct all Feynman diagrams with $n$ vertices, 
we begin by fixing $n$ vertices, and then considering all ways
to pair up the $4n$ half-edges.
All Feynman diagrams with one vertex, and some with two vertices,
are shown below.
\insfig{qft-geometry-2}{0.9}
Let $D_n$ be the set of all diagrams with $n$ vertices.

\begin{prop}[Counting pairings of $2k$ objects] \label{prop:count-pairings} The number of ways to pair up $2k$ objects, i.e. to divide them into $k$ $2$-element subsets, is $\frac{(2k)!}{k! 2^k}$.
\end{prop}

\begin{exercise} Prove \autoref{prop:count-pairings}.
\end{exercise}

Thus we have
\begin{equation}
  \abs{D_n} = \frac{(4n)!}{(2n)! 2^{2n}}.
\end{equation}
On the other hand, $D_n$ is naturally acted on by the finite group
\begin{equation}
  G_n = (S_4)^n \rtimes S_n
\end{equation}
(permuting edges attached to a given vertex and also permuting vertices)
which has 
\begin{equation}
 \abs{G_n} = (4!)^n n!. 
\end{equation}
Thus \eqref{eq:0d-series-rewritten} can be rewritten as
\begin{equation}
  Z(m, \lambda) \sim \sqrt\frac{2\pi}{m} \sum_{n=0}^\infty (-\tlambda)^n \frac{\abs{D_n}}{\abs{G_n}}.
\end{equation}
By the orbit-stabilizer theorem this becomes
\begin{equation}
  Z(m, \lambda) \sim \sqrt\frac{2\pi}{m} \sum_{n=0}^\infty (-\tlambda)^n \sum_{[\Gamma] \in D_n / G_n} \frac{1}{\abs{\Aut \Gamma}}
\end{equation}
which we could also rewrite as
\begin{equation}
  Z(m, \lambda) \sim \sqrt\frac{2\pi}{m} \sum_{[\Gamma] \in \sqcup_n D_n / G_n} \frac{(-\lambda)^{\abs{\vertices(\Gamma)}}}{m^{\abs{\edges(\Gamma)}}} \frac{1}{\abs{\Aut \Gamma}}.
\end{equation}
Thus we have proven a diagrammatic rule:

\begin{prop}[Feynman diagram expansion for the partition function \eqref{eq:0d-partition-fn}] \label{prop:0d-feynman} To compute the perturbation
expansion of the partition function \eqref{eq:0d-partition-fn} 
we can follow the following algorithm.
Draw one representative $\Gamma$ in
each equivalence class. Define a weight $w_\Gamma$ as a product of factors: 
one factor $(-\lambda)$ for each vertex,
one factor $\frac{1}{m}$ for each edge,
\insfig{qft-geometry-4}{0.9}
and an overall ``symmetry factor'' $\frac{1}{\abs{\Aut \Gamma}}$.
Then
\begin{equation}
  \frac{Z(m,\lambda)}{Z(m,0)} \sim \sum_\Gamma w_\Gamma.
\end{equation}
\end{prop}
The first few orders in the diagram expansion of $Z(m,\lambda)$ are:
\insfig{qft-geometry-3}{0.8}
This reproduces \eqref{eq:0d-perturbation-series} as it should.

This basic mechanism can be extended in many ways:

\begin{enumerate}
\item In \autoref{prop:0d-feynman} 
we sum over both connected and disconnected $\Gamma$.
But the contribution from disconnected diagrams is easily determined:
\begin{prop}[Exponentiation of the connected diagrams] The sum over connected diagrams is related to the sum over all
diagrams by:
\begin{equation}
  \sum_{\Gamma} w_\Gamma = \exp \left( \sum_{\Gamma \text{ connected nonempty}} w_\Gamma \right).
\end{equation}
\end{prop}
(e.g. look at the first disconnected term above to get an inkling of why.)
Said otherwise,
\begin{equation}
  \log \left( \frac{Z(m,\lambda)}{Z(m,0)} \right) \sim \sum_{\Gamma \text{ connected nonempty}} w_\Gamma.
\end{equation}

\item Suppose we want to compute the correlation function $\IP{x^n}$,
as defined in \eqref{eq:0d-expectation-values} (generalizing $Z$ which is the 
case $n=0$). This is given by a similar sum over Feynman diagrams, except that
now we introduce a new type of $1$-valent vertex, and require that the diagram
contains exactly $n$ of these. The automorphisms of $\Gamma$ are required to
fix these vertices.

To compute the \ti{normalized} expectation value $\IP{x^n} / Z$, we compute
similarly, with the additional rule that every connected component of each diagram
must contain at least one of the $1$-valent vertices.
\insfig{qft-geometry-5}{0.8}

\begin{exercise} Do the following:
\begin{itemize}

\item Compute the perturbative expansion of $\IP{x^2} / Z$ up to order $\lambda^3$, using Feynman diagrams.
You should find $\IP{x^2} / Z = \frac{1}{m} (1 - \frac{1}{2} \tilde\lambda + \frac{2}{3} \tilde\lambda^2 - \frac{11}{8} \tilde\lambda^3 + \cdots )$.
(I drew the diagrams up to order $\tilde\lambda^2$ above.)

\item Compute the perturbative expansion of $\IP{x^4} / Z$ up to order $\lambda^2$, using Feynman diagrams. You should find $\IP{x^4} / Z = \frac{1}{m^2} (3 - 4 \tilde\lambda + \frac{33}{4} \tilde\lambda^2 + \cdots )$.
\end{itemize}
\end{exercise}


\item Instead of the action \eqref{eq:0d-action-quartic} we could take more
generally
\begin{equation}
  S(x) = \frac{m}{2} x^2 + \sum_{k=3}^\infty \frac{\lambda_k}{k!} x^k.
\end{equation}
The Feynman diagram expansion then involves vertices of arbitrary valences,
with each $k$-valent vertex contributing a factor $-\lambda_k$:
\insfig{qft-geometry-6}{0.95}
Here are some diagrams in the expansion of $Z / Z_0$:
\insfig{qft-geometry-7}{0.8}

\item Generalizing in a different direction, we could 
take $\cC = \R^N$ instead of $\R$ (``multiple fields''),
with coordinates $x^1, \dots, x^N$,
and generalize the action to\footnote{Here and in many future equations we are using
the ``Einstein summation convention'': any index which appears both up and down should be 
summed over. So the first term in \eqref{eq:0d-action-multifield} should be read
$\half \sum_{i=1}^N \sum_{j=1}^N x^i M_{ij} x^j$ and similarly the second term involves
four sums.}
\begin{equation} \label{eq:0d-action-multifield}
  S = \half x^i M_{ij} x^j + \frac{1}{4!} C_{ijkl} x^i x^j x^k x^l,
\end{equation}
where $M$ and $C$ are both totally symmetric in their indices.
Then we have
\begin{equation} \label{eq:gaussian-det}
  Z_0 = \int_{\cC} \de \vec{x} \, \e^{-\half x^i M_{ij} x^j} = \frac{(2\pi)^{N/2}}{\sqrt{\det M}}.
\end{equation}
The diagrams $\Gamma$ are just as before, with edges and quartic vertices. However,
in the Feynman rules we attach additional labels $i \in \{1, \dots, N\}$ on the half-edges:
\insfig{qft-geometry-8}{1}
To compute the weight $w_\Gamma$ we sum over all possible labels for
the half-edges (so for a diagram with $k$ edges we sum
$N^{2k}$ terms), and divide by the usual symmetry factor $\abs{\Aut \Gamma}$ 
for the unlabeled diagram $\Gamma$.
(In higher-dimensional QFT, these sorts of labels would have an interpretation
like labeling species of particle which could propagate along the edges.)

A basis-free description of this situation is as follows.
Let $\cC$ be a finite-dimensional real vector space $V$, with a 
density $\de \mu$, and two elements
\begin{equation}
  M \in \Sym^2(V^*), \qquad C \in \Sym^4(V^*).
\end{equation}
Then consider the action
\begin{equation} \label{eq:bosonic-quartic-action}
  S(x) = \half M(x,x) + \frac{1}{4!} C(x,x,x,x).
\end{equation}
$M$ determines a density $\sqrt{\det M}$ on $V$:
\begin{exercise}
Verify that a positive definite 
bilinear form $M \in \Sym^2(V^*)$ determines a density on $V$,
which deserves to be called $\sqrt{\det M}$ in the sense that given
a basis $\{e^1, \dots, e^n\}$ on $V$, with $M(e^i,e^j) = M^{ij}$, 
$\sqrt{\det M} = \sqrt{\det (M^{ij})} \abs{e^*_1 \cdots e^*_n}$.
\end{exercise}
When $C = 0$ the partition function is
\begin{equation} \label{eq:partition-function-bosonic-gaussian}
  Z_0 = \int_{V} \de \mu \, \e^{-\half M(x,x)} = (2\pi)^{\half \dim V} \frac{\de\mu}{\sqrt{\det M}}.
\end{equation}
The Feynman rules assign a vector in $(V^*)^{\otimes 4}$ to each vertex
and $V^{\otimes 2}$ to each edge, contracted in the obvious way:
\insfig{qft-geometry-14}{0.9}

\end{enumerate}


\subsection{A coupled system}

Now suppose $\cC = \R^2$ and
\begin{equation}
  S(x,y) = \frac{m}{2} x^2 + \frac{M}{2} y^2 + \frac{\mu}{4} x^2 y^2.
\end{equation}
We think of this as two independent systems, one involving the field $x$
and one involving the field $y$, which are ``coupled'' by the quartic interaction
term $\frac{\mu}{4} x^2 y^2$. You can see this point of view vividly in the
Feynman rules for this theory, shown below:
\insfig{qft-geometry-9}{1.0}
\begin{exercise} Explain how these Feynman rules arise as a special case of
the multiple-field rules given above.
\end{exercise}
A few sample computations are:
\insfig{qft-geometry-10}{0.8}

But the job of computing by Feynman diagrams 
in this theory gets complicated fast.
For example:
\insfig{qft-geometry-11}{0.8}
How can we avoid this enormous profusion of diagrams every time we want to 
compute a correlation function?
Suppose that we are only interested in computing correlations involving $x$.
Then to simplify our task, we could use Fubini's theorem to integrate
over $y$ ``once and for all'': define $S_\eff(x)$ by the equation
\begin{equation}
  \int \de y \, \e^{-S(x,y)} = \e^{-S_\eff(x)}
\end{equation}
and then use $S_\eff(x)$ as our action for subsequent computations.

In this particular theory
we can compute the perturbation series of $S_\eff(x)$ explicitly: it is of the form
\begin{equation} \label{eq:seff-series}
  S_\eff(x) \sim \frac{m_\eff}{2} x^2 + \sum_{k \ge 3} \frac{\lambda_k}{k!} x^k
\end{equation}
with
\begin{equation} \label{eq:seff-terms}
  m_\eff = m + \frac{\mu}{2M}, \qquad \lambda_k = \begin{cases} 0 & \text{ for $k$ odd,} \\ - \left( - \frac{\mu}{2M} \right)^{k/2} (k-1)! & \text{ for $k$ even.} \end{cases} 
\end{equation}

Some qualitative remarks about $S_\eff(x)$:
\begin{itemize}
\item Even though the original action $S(x,y)$ had only a quartic interaction, the
effective action $S_\eff(x)$ involves interactions of all even orders.
Diagrammatically speaking, integrating out the field $y$ to pass from $S$ 
to $S_\eff$ amounts to ``collapsing'' parts of the Feynman diagrams
involving only the dashed $y$ lines; these parts get absorbed 
into the new effective vertices.

\item The fact that in the effective theory 
we only get interaction vertices of even valence is
related to the fact that the original action $S(x,y)$ has the symmetry
$x \to -x$, which implies that $S_\eff(x)$ must have the same symmetry.

\item We could approximate $S_\eff(x)$ by the simpler procedure of setting $y=0$ in $S(x,y)$.
This would not give the exact answer, because the fields are coupled: it would
give $m_\eff = m$ and all $\lambda_k = 0$. Thus the shift $m_\eff - m$ and the nonzero 
values of the $\lambda_k$ could be thought of as ``quantum corrections'' which are some vestige
of the field $y$. Note these corrections 
go to zero in the limit $\mu \to 0$ (decoupling) and also go to
zero in the limit $M \to \infty$.
\item The series \eqref{eq:seff-series} for $S_\eff(x)$ actually is convergent, not
only asymptotic.
\end{itemize}

\begin{exercise} Use the effective action $S_\eff(x)$ to compute $\frac{\IP{x^4}}{Z}$ up to order $\mu^2$.
Note that it is a lot easier than using the original action $S(x,y)$, but it indeed agrees
with the result of the computation done above.
\end{exercise}

\begin{exercise} Derive the formula \eqref{eq:seff-terms}.
\end{exercise}

There is also a Feynman-diagram expansion for the computation of the effective action 
$S_\eff$. The rules here
turn out to be as follows: we introduce a new $1$-valent vertex and 
sum over connected diagrams where all $x$ lines are required to terminate on a $1$-valent vertex.
In counting the symmetry factor we do \ti{not} require that these $1$-valent vertices 
are fixed by the automorphisms. The Feynman rules are:
\insfig{qft-geometry-12}{0.95}

\begin{exercise}
Use these Feynman rules to derive \eqref{eq:seff-terms}. (Hint: the first few
diagrams contributing are shown below.)
\end{exercise}
\insfig{qft-geometry-13}{0.8}


\subsection{Symmetries}

Let us return to the original theory with action
\eqref{eq:0d-action-quartic}. In this theory we have
\begin{equation} \label{eq:odd-vanishing}
  \IP{x^n} = 0 \quad \text { for $n$ odd}
\end{equation}
One direct way of seeing this is to make the change
of variables $x \to -x$ in the integral \eqref{eq:0d-partition-fn}.
Since $S(x) = S(-x)$ this change of variables gives
\begin{equation}
  \IP{x^n} = \IP{(-x)^n} = (-1)^n \IP{x^n}
\end{equation}
from which \eqref{eq:odd-vanishing} follows.

The Feynman-diagrammatic expression of \eqref{eq:odd-vanishing}
is that there simply are no possible diagrams with an odd number 
of $1$-valent vertices, since the number of half-edges would then 
be odd, no matter how many $4$-valent vertices we add.
The same wouldn't be true if we allow vertices of odd valence;
of course such vertices arise only when there are
odd-degree terms in $S$, which violate the symmetry $x \to -x$.

More generally, 
\begin{prop}[Symmetries and correlation functions] \label{prop:symmetry-correlators}
Whenever $S: \cC \to \R$ and the measure on $\cC$ are both 
invariant under the action of a group $G$, then we have
\begin{equation} \label{eq:correlator-symmetry}
  \IP{\cO^g} = \IP{\cO}
\end{equation}
where $\cO: \cC \to \R$ is any observable, and $\cO^g = g^* \cO$.
\end{prop}

\begin{exercise} Prove \autoref{prop:symmetry-correlators}.
\end{exercise}

\begin{exercise}
Suppose the space $\Obs$ of all observables $\cO$ is decomposed
into isotypical components, $\Obs = \bigoplus_R \Obs_R$,
where $R$ runs over irreducible representations of $G$.
Show that if $\cO \in \Obs_R$ and $R$ is nontrivial
then $\IP{\cO} = 0$.
\end{exercise}

If $G$ is a Lie group, we can differentiate \eqref{eq:correlator-symmetry} 
to get
\begin{prop}[Infinitesimal symmetries and correlation functions]
Whenever $S: \cC \to \R$ and the measure on $\cC$ are both 
invariant under the action of a Lie group $G$, then we have
\begin{equation}
  \IP{X \cO} = 0
\end{equation}
where $\cO: \cC \to \R$ is any observable, and $X \in \fg$.
\end{prop}

\begin{exercise}
Take $\cC = \R^2$ and $S(x,y) = \half m x^2 + \half m y^2$.
Alternatively, letting $z = x + \I y$, we can say $\cC = \C$
and $S(z) = \half m \abs{z}^2$.
Consider the complex observables $\cO_n: \cC \to \C$ given by
$\cO_n(z) = z^n$.
Use \autoref{prop:symmetry-correlators} to show that the correlation function
$\IP{\cO_n}$ vanishes for all $n \neq 0$. Is the same true if
$S(z) = V(\abs{z})$ for more general $V$? 
What about if $S(z)$ is an arbitrary function of $z$?
\end{exercise}

\subsection{Fermions}

So far, the results of our QFT computations have been very far from
``topological'': $Z$ and all the expectation values
$\IP{x^n}$ are nontrivial functions of the parameters $(m,\lambda)$
with no kind of deformation invariance in sight.

In the applications of QFT toward which we are headed, 
we will do things that are more deformation
invariant. But to get there, we need one more key ingredient: \ti{fermions}.

We will replace the field space $\cC$, which so far has been a manifold
(in fact a vector space), by a \ti{supermanifold} (in fact super vector
space).

Our treatment of supergeometry will be extremely superficial. Some references
I have found useful are \cite{Deligne1999b,etingof,Witten2012,Zakharevich2017}.

\begin{defn}[Super vector space] A \ti{super vector space} is a $\Z/2\Z$-graded vector space,
\begin{equation}
  V = V^0 \oplus V^1.
\end{equation}
\end{defn}

We let $\Pi$ be the operation of \ti{parity reversal}, i.e.
\begin{equation}
  \Pi V = V^1 \oplus V^0.
\end{equation}

\begin{example}The basic example is the super vector space $V$
with $V^0 = \R^p$, $V^1 = \R^q$; call this $\R^{p \vert q}$.
Then $\Pi \R^{p \vert q} = \R^{q \vert p}$.
\end{example}

\begin{defn}[Even and odd maps] An even map of super vector spaces
$V \to W$ is a pair of maps $V^0 \to W^0$ and $V^1 \to W^1$.
An odd map $V \to W$ is a pair of maps $V^0 \to W^1$ and $V^1 \to W^0$.
\end{defn}

\begin{defn}[Symmetric monoidal category of super vector spaces]
The \ti{symmetric monoidal category} of super vector spaces 
is the category of super vector spaces, with morphisms the even maps,
and equipped with an unusual choice of symmetry isomorphism
\begin{equation}
  s: V \otimes W \to W \otimes V,
\end{equation}
namely, for homogeneous elements $v$, $w$ of degrees $\abs{v}$, $\abs{w}$
we take
\begin{equation}
  s (v \otimes w) = (-1)^{\abs{v} \abs{w}} w \otimes v.
\end{equation}
\end{defn}
This turns out to be a very useful category!

Some standard constructions in linear algebra take on a different
character when applied to super vector spaces. For example,
if $V$ is a super vector space then we define the symmetric 
algebra $\Sym^* V$ to be the quotient of $T^* V$ by
the two-sided ideal generated by $(v \otimes w - s(v \otimes w))$.
If $V = V^0$ then $\Sym^*V$ is (forgetting its super structure) 
the usual $\Sym^* V^0$,
but if $V = V^1$ then $\Sym^* V$ is the exterior algebra $\wedge^* (\Pi V^1)$.

\begin{defn}[Polynomial functions on a super vector space]
Given a super vector space $V$, 
we define the algebra of polynomial functions $\cO(V)$ on $V$
by
\begin{equation}
  \cO(V) = \Sym^* (V^*).
\end{equation}
\end{defn}

$\cO(V)$ is itself a super vector space,
\begin{equation}
  \cO(V) = \cO^0(V) \oplus \cO^1(V),
\end{equation}
and even a (super)commutative algebra.

In quantum field theory we want to consider a space $\cC$ 
with an action $S$ which is some kind of ``function on $\cC$''. 
For $\cC$ a super vector space, our model of ``function on $\cC$''
will be an element
\begin{equation}
S \in \cO^0(V).
\end{equation}


\subsection{A fermionic theory}

The simplest example we can consider is to take
\begin{equation}
  \cC = \R^{0 \vert 2}.
\end{equation}
$\cC$ has two ``coordinate functions''
\begin{equation}
  \psi^1, \psi^2 \in \cO^1(\cC) = (V^1)^*
\end{equation}
but these coordinates have ``odd statistics''
\begin{equation} \label{eq:relations-R02}
  \psi^1 \psi^2 = -\psi^2 \psi^1, \quad (\psi^1)^2 = 0, \quad (\psi^2)^2 = 0.
\end{equation}
Note that $\psi^1 \psi^2 \in \cO^0(\cC)$ is a nice even function,
but \eqref{eq:relations-R02} implies it is nilpotent,
\begin{equation}
  (\psi^1 \psi^2)^2 = 0.
\end{equation}
(In fact $\dim \cO(C) = 2 \vert 2$ as we expect from the identification
with the exterior algebra on $\R^2$; the even part $\cO^0(\cC)$ has basis
$\{1, \psi^1 \psi^2\}$, the odd part $\cO^1(\cC)$ has basis $\{\psi^1, \psi^2\}$.)

Now let us take the action functional
\begin{equation}
  S = \half M \psi^1 \psi^2.
\end{equation}
(Unlike in the bosonic case, here this is all we can do --- there is no 
way of introducing an interaction term!)

We would like to make sense of the partition function in this setting,
\begin{equation} \label{eq:2-fermion-partition-function}
  Z = \int_\cC \de\mu \, \e^{-S}.
\end{equation}
Expanding the exponential, the fact that $S^2 = 0$ means it \ti{truncates} to a polynomial:
\begin{equation} \label{eq:2-fermion-partition-function-expanded}
  Z = \int_\cC \de \mu \, \left(1 - \half M \psi^1 \psi^2\right).
\end{equation}
What will we mean by such an integral?
Integration over a purely odd vector space is defined to mean taking the
``top order part'' of the function.
More exactly: 

\begin{defn} \label{defn:odd-integral} A \ti{translation invariant measure} $\de \mu$ 
on a purely odd super vector space $V = V^1$
is
\begin{equation} \label{eq:measure-odd-vector-space}
  \de \mu \in \wedge^\rmtop(\Pi V^1).
\end{equation}
For any $f \in \cO(V) \simeq \wedge^*((\Pi V^1)^*)$, let
$f^\rmtop \in \wedge^\rmtop((\Pi V^1)^*)$ be the top component of $f$; then
we define the integral by
\begin{equation}
  \int_V \de \mu \, f = \de\mu \cdot f^\rmtop.
\end{equation}
\end{defn}

\begin{exercise} Suppose $V = \R^{0 \vert 1}$ with odd coordinate $\psi$.
Show that there exists a translation invariant measure $\de \mu$ on $V$ with the property that
\begin{equation}
\int_V \de \mu \, (a \psi + b) = a.
\end{equation}
We call this measure $\de \psi$.
\end{exercise}

\begin{exercise} Again take $V = \R^{0 \vert 1}$, and $c \in \R$.
Show that there exist translation invariant measures $c \de \psi$ and $\de (c \psi)$
on $V$, obeying the formulas
\begin{equation}
  \int_V (c \de \psi) f(\psi) = c \int_V \de \psi f(\psi), \qquad \int_V \de(c \psi) f(c \psi) = \int_V \de \psi f(\psi),
\end{equation}
where $f(c \psi)$ is defined in the obvious way --- explicitly,
if $f(\psi) = a \psi + b$ then $f(c \psi) = a c \psi + b$.
Then prove the change of variables formula in one odd variable:
\begin{equation}
  \de (c \psi) = \frac{1}{c} \de \psi.
\end{equation}
\end{exercise}

Similarly on $\R^{0 \vert q}$ we choose once and for all the 
measure $\de \mu = \de \vec\psi$, characterized by
\begin{equation}
  \int \de \vec\psi \, \psi^q \psi^{q-1} \cdots \psi^1 = 1.
\end{equation}
Now we can evaluate the odd Gaussian integral \eqref{eq:2-fermion-partition-function-expanded}, obtaining
\begin{equation} \label{eq:2d-odd-gaussian}
 Z = \half M.  
\end{equation}
Note a key difference between this and the usual even Gaussian integrals:
here the $M$ appears in the \ti{numerator}, not the \ti{denominator}
as we had in \eqref{eq:0d-Z0}.


\subsection{More fermions}

More generally suppose we take $\cC$ to be any 
purely odd super vector space, $\cC = V = V^1$,
equipped with a measure in the sense of \eqref{eq:measure-odd-vector-space},
and elements
\begin{equation}
 M \in \Sym^2(V^*) = \wedge^2((\Pi V^1)^*), \qquad C \in \Sym^4(V^*) = \wedge^4((\Pi V^1)^*).
\end{equation}
Then we can take for the action
\begin{equation}
 S = \half M + \frac{1}{4!} C \in \cO(\cC),
\end{equation}
which we also write in parallel with \eqref{eq:bosonic-quartic-action} as
\begin{equation}
  S(\psi) = \half M(\psi,\psi) + \frac{1}{4!} C(\psi, \psi, \psi, \psi),
\end{equation}
or after choosing a basis for $\Pi V^1$,
\begin{equation}
  S(\psi) = \half M_{IJ} \psi^I \psi^J + \frac{1}{4!} C_{IJKL} \psi^I \psi^J \psi^K \psi^L
\end{equation}
with $M$ and $C$ totally antisymmetric in their indices.

The partition function is an odd integral
\begin{equation}
  Z = \int_\cC \de \mu \, \e^{-S}
\end{equation}
which can again be evaluated in a purely algebraic fashion, by expanding
out the exponential.
\begin{exercise}
Suppose $\cC = \R^{0 \vert 4}$
and $S = m \psi^1 \psi^2 + m \psi^3 \psi^4 + \lambda \psi^1 \psi^2 \psi^3 \psi^4$. Show that $Z = m^2 - \lambda$.
\end{exercise}


\subsection{Perturbation theory with fermions} \label{sec:perturbation-theory-0d}

Integrals over finite-dimensional 
odd vector spaces always give \ti{polynomials} in the couplings; 
thus a development of
``perturbation theory'' for them might seem unnecessary.
Nevertheless, with an eye toward the future, it is interesting to
develop a Feynman diagram expansion for these integrals.

First let us see what happens when $C = 0$.
Then the odd Gaussian integral gives the \ti{Pfaffian} of $M$,
generalizing \eqref{eq:2d-odd-gaussian}
(compare \eqref{eq:gaussian-det}):
\begin{equation} \label{eq:integral-pfaffian}
  Z_0 = \int_\cC \de \vec\psi \, \e^{-\half \psi^I M_{IJ} \psi^J} = \Pf (M).
\end{equation}
(Recall that the Pfaffian is a polynomial in the entries of $M$, defined
only for skew-symmetric $M$, with the property that $(\Pf M)^2 = \det M$.
For example, $\Pf \begin{pmatrix} 0 & a \\ -a & 0 \end{pmatrix} = a$. Note that
for a general $2 \times 2$ matrix the determinant is \ti{not} the square of 
any polynomial.)
\begin{exercise} Prove \eqref{eq:integral-pfaffian}. One way that
presumably works is to expand directly and compare with the
combinatorial expression for the Pfaffian, namely if $\rank M = 2n$ then
\begin{equation}
  \Pf(M) = \frac{1}{2^n n!} \sum_{\sigma \in S_{2n}} (\sgn \sigma) \prod_{i=1}^n M_{\sigma(2i-1), \sigma(2i)}.
\end{equation}
\end{exercise}
The coordinate-independent version of this is:
\begin{exercise}
  Suppose $V = V^1$ is an odd vector space with a quadratic 
  element $M \in \Sym^2(V)$. Show that there is a canonical element
  $\Pf(M) \in \wedge^\rmtop(\Pi (V^1)^*)$, 
  and that if we choose an element
  $\de \mu \in \wedge^\rmtop(\Pi V^1)$, then
  \begin{equation}
    \int_V \de \mu \, \e^{-M} = \de \mu \cdot \Pf(M).
  \end{equation}
\end{exercise}

When $C \neq 0$ we compute $Z / Z_0$ by Feynman diagrams.
The rules are just as they were in the even case, except that
we have to be careful about signs.
% We fix (arbitrarily) an ordering of the half-edges of the diagram.
% Then, in the contribution from each labeling of the half-edges,
\fixme{...}

\begin{exercise} Suppose again $\cC = \R^{0 \vert 4}$ and $S = m \psi^1 \psi^2 + m \psi^3 \psi^4 + \lambda \psi^1 \psi^2 \psi^3 \psi^4$. Show that $Z = m^2 - \lambda$ by the Feynman diagram expansion. (There is only
one nonempty diagram which contributes.)
\end{exercise}


\subsection{Bosons and fermions together}

Now suppose $\cC = V = V^0 \oplus V^1$ is a super vector space 
which has nontrivial odd \ti{and} even parts. We want to extend
our integration theory to this situation. The strategy will be to 
integrate first over the odd directions, then over 
the even directions.

To get anything convergent,
we need to extend the class of functions we consider:
we let
\begin{equation}
  C^\infty(V) = C^\infty(V^0) \otimes \cO(V^1).
\end{equation}
To define measures we need 
the super analogue of the determinant line:
\begin{defn}[Berezinian line]
The \ti{Berezinian line} of a super vector space $V$ is
\begin{equation}
  \Ber V = \wedge^\rmtop V^0 \otimes \wedge^\rmtop (\Pi V^1)^*.
\end{equation}
\end{defn}
An element $\de \mu \in \Ber V^*$ plays the role of a volume measure
on $V$. By an \ti{orientation} of $V$ we mean an orientation of $V^0$.
Then:
\begin{defn}[Integration over super vector space] If $V$ is an oriented 
super vector space, $\de \mu = \omega^0 \otimes \omega^1 \in \Ber V^*$,
and $f = f^0 \otimes f^1 \in C^\infty(V)$, then
\begin{equation}
    \int_V \de \mu \, f = \int_{V^0} \left( \omega^0 f^0 \right) \int_{V^1} \left( \omega^1 f^1 \right).
\end{equation}
\end{defn}
On $\R^{p \vert q}$ we have the canonical element
\begin{equation}
  \de \mu = \de \vec{x} \, \de \vec{\psi} = (\de x^1 \wedge \cdots \wedge \de x^p) \otimes (\de \vec\psi) \in \Ber V^*.
\end{equation}


\subsection{A supersymmetric example} \label{sec:0d-susy-example}

Let us now consider the example $\cC = \R^{1 \vert 2}$, and write an action
of the form
\begin{equation} \label{eq:r21-action-generic}
  S(x, \psi^1, \psi^2) = S_1(x) + S_2(x) \psi^1 \psi^2.
\end{equation}
The partition function is
\begin{align}
  Z &= \int \de x \de \vec\psi \, \e^{-S} \\
  &= \int \de x \, S_2(x) \e^{-S_1(x)}.
\end{align}
For generic $S_1(x)$ and $S_2(x)$
we could compute this in perturbation theory:
indeed it just reduces to a computation of the correlation
function $\IP{S_2(x)}$ in 
the pure bosonic theory with action $S_1(x)$.
The answer has no particularly good property.

There is a special case where we can do much better.
(This example is more or less lifted from \cite{MR2003030}.)
This is the case where for some $h: \R \to \R$, with $\abs{h(x)} \to \infty$ 
as $\abs{x} \to \infty$, we have
\begin{equation}
  S_1(x) = \half h(x)^2, \qquad S_2(x) = h'(x),
\end{equation}
so that the action \eqref{eq:r21-action-generic} becomes
\begin{equation}\label{eq:r21-susy-action}
  S(x, \psi^1, \psi^2) = \half h(x)^2 + h'(x) \psi^1 \psi^2.
\end{equation}
The basic reason why this case is better is that the
action \eqref{eq:r21-susy-action} is invariant under a 
certain \ti{odd vector field}
or \ti{supersymmetry}.

\begin{defn}[Graded derivations]
If $\cA$ is a commutative superalgebra, then a map $D: \cA \to \cA$
(either even or odd)
is a \ti{derivation} of $\cA$ if it obeys
\begin{equation}
  D(aa') = (Da)a' + (-1)^{\abs{a} \abs{D}} a(Da').
\end{equation}
\end{defn}

\begin{defn}[Super vector fields on a super vector space]
If $V$ is a super vector space, let $\Vect(V)$ denote the
space of all graded derivations on $C^\infty(V)$.
\end{defn}

In particular, on $\R^{p \vert q}$, in addition
to the usual even vector fields $\partial_{x^i}$ we also have
odd vector fields $\partial_{\psi^I}$, defined by
\begin{equation}
  \partial_{\psi^I} x^i = 0, \quad \partial_{\psi^I} \psi^J = \delta^J_I.
\end{equation}
Together with the derivation property this implies
e.g.
\begin{equation}
  \partial_{\psi^1} \psi^1 \psi^2 = \psi^2, \qquad \partial_{\psi^2} \psi^1 \psi^2 = - \psi^1.
\end{equation}
The $\partial_{x^i}$ and $\partial_{\psi^I}$ together
generate $\Vect(V)$ as a module over $C^\infty(V)$.

\begin{defn}[Super Lie algebra] A \ti{super Lie algebra} is a super
vector space $\fg = \fg^0 \oplus \fg^1$ with a bracket obeying
\begin{equation}
  [X,Y] = -(-1)^{\abs{X} \abs{Y}} [Y,X]
\end{equation}
and
\begin{equation}
[X,[Y,Z]] + (-1)^{\abs{X}(\abs{Y}+\abs{Z})} [Y,[Z,X]] + (-1)^{\abs{Z}(\abs{X}+\abs{Y})}[Z,[X,Y]] = 0.
\end{equation}
\end{defn}

\begin{exercise} Verify that $\Vect(V)$ is 
a super Lie algebra under supercommutator: $[X,Y] f = X(Yf) - (-1)^{\abs{X} \abs{Y}} Y(Xf)$.
\end{exercise}

Now in our example of $\R^{1 \vert 2}$ we consider the
odd vector fields
\begin{align}
  Q_1 &= \psi^1 \partial_x + h(x) \partial_{\psi^2}, \\
  Q_2 &= \psi^2 \partial_x - h(x) \partial_{\psi^1}.
\end{align}
These are both symmetries of the action \eqref{eq:r21-susy-action}, 
in the sense that
\begin{equation}
  Q_1 S = Q_2 S = 0.
\end{equation}

\begin{exercise}
$[Q_1,Q_1]$ is a nontrivial even
vector field on $V$. Compute it, and verify directly 
that it is a symmetry of $S$.
\end{exercise}

The vector fields $Q_1$, $Q_2$ are also divergence-free, i.e. they preserve the
integration measure $\de \mu = \de x \, \de \vec\psi$,
in the following sense.
For any super vector space $F$ we can consider the super vector space
\begin{equation}
  C^\infty(V, F) = C^\infty(V) \otimes_\R F
\end{equation}
which we could think of as a space of ``sections of the trivial super
vector bundle with fiber $F$ over the super vector space $V$.''
Then,

\begin{defn}[Lie derivative of section of $\Ber V^*$ along super vector field] 
If $X$ is a vector field on $V$, the \ti{Lie derivative}\footnote{
For a coordinate-free description of $\cL_X$, more in keeping with
the notion of the infinitesimal variation along a flow which one has in ordinary
geometry, see e.g. \cite{Zakharevich2017}.}
\begin{equation}
  \cL_X: C^\infty(V, \Ber V^*) \to C^\infty(V, \Ber V^*)
\end{equation}
is characterized by
\begin{equation}
 \cL_X (f \de \mu) = (X f) \de \mu + (-1)^{\abs{f} \abs{X}} f \cL_X \de \mu
\end{equation}
and if $X = h^i \partial_{x^i} + g^I \partial_{\psi^I}$ relative to a basis of $V$, then
\begin{equation}
  \cL_{X} ( \de \vec x \, \de \vec\psi ) = \left( \partial_{x^i} h^i + (-1)^{\abs{Q}} \partial_{\psi^I} g^I \right) \de \mu.
\end{equation}
\end{defn}

\begin{exercise} Verify that $\cL_{Q_1} \de \mu = 0$ and similarly
for $Q_2$.
\end{exercise}

The existence of the supersymmetries $Q_1$ and $Q_2$ will give us a 
powerful tool for analyzing the partition function.
First we need a preliminary:

\begin{lem} Suppose $Q$ is a divergence-free vector field
(even or odd)
on a super vector space $V$ with translation invariant measure $\de \mu$, 
and $f \in C^\infty_c(V)$. Then
\begin{equation}
  \int_V \de \mu \, Qf = 0.
\end{equation}
\end{lem}

\begin{pf} By direct computation: if $Q = h^i \partial_{x^i} + g^I \partial_{\psi^I}$ and $\de \mu = \de \vec{x} \de \vec{\psi}$, then
\begin{align}
  \int_V \de \mu \, Qf &= \int \de \vec{x} \, (Qf)^\rmtop \\
  &= \int \de \vec{x} \, (h^i \partial_{x^i} f + g^I \partial_{\psi^I} f)^\rmtop \\
  &= \int \de \vec{x} \, (h^i \partial_{x^i} f + (-1)^{\abs{g}} \partial_{\psi^I} g^I) f)^\rmtop \\
  &= \int \de \vec{x} \, ((- \partial_{x^i} h^i + (-1)^{\abs{g}} \partial_{\psi^I} g^I) f)^\rmtop \\
  &= 0 
\end{align}
where in the second line we used the fact that $(\partial_{\psi^I} (g^I f))^\rmtop = 0$, and in the third line we integrated by parts, 
using the compact support of $f$.
\end{pf}

This permits us to make the following fundamental construction:
\begin{prop}[Invariance of partition function under $Q$-exact deformations] \label{prop:Z-deformation-invariance}
Suppose $V$ is a super vector space with measure $\de \mu$.
Let $\{S_t\}$ be a family of actions,
invariant under a family of divergence-free odd symmetries $Q_t$,
i.e. $Q_t S_t = 0$.
Finally, suppose
\begin{equation}
  \partial_t S_t = Q_t \Psi_t
\end{equation}
with $\Psi_t \in C^\infty_c(\cC)$. 
% , and
% \begin{equation}
%   \IP{ Q_t^2 \Psi_t } = 0
% \end{equation}
% when we compute the expectation value using the action $S_t$.
Then the partition function $Z_t$ computed with action $S_t$
is independent of $t$.
\end{prop}

\begin{pf}
After this deformation the partition function is
\begin{equation}
  Z_t = \int_\cC \de \mu \, \e^{-S_t}
\end{equation}
and thus
\begin{align}
  \partial_t Z_t &= -\int_\cC \de \mu \, (Q_t \Psi_t) \e^{-S_t} \\
  &= -\int_\cC \de \mu \, Q_t \left( \Psi_t \e^{-S_t} \right) \\
  &= 0.
\end{align}
At the first step, to justify the differentiation under the 
integral sign, we use the fact that $\Psi_t$ is compactly supported.
\end{pf}

One often considers the special case where 
$Q_t = Q$ is independent of $t$ and 
has $Q^2 = 0$, in which case it is natural to consider
the \ti{homology} of $Q$ acting on $C^\infty(\cC)$;
in particular $S$ is a $Q$-closed element, and \autoref{prop:Z-deformation-invariance}
says roughly that $Z$ only depends on the \ti{homology class} of $S$.

We will apply \autoref{prop:Z-deformation-invariance} in our example.
We consider deforming the action $S$ in \eqref{eq:r21-susy-action} 
to a family of actions $S_t$, by deforming $h(x)$
to a family $h_t(x)$.
Using dots for derivatives with respect to $t$, we have
\begin{equation}
  \dot S = h(x) {\dot h}(x) + {\dot h}'(x) \psi^1 \psi^2. 
\end{equation}
But this is actually $Q_1$-exact: indeed
\begin{equation} \label{eq:psi-example}
  \dot S = Q_1 \Psi, \qquad \Psi = {\dot h}(x) \psi^2.
\end{equation}
% We do not have $Q_1^2 \Psi = 0$, but the expectation value
% does vanish:
% \begin{exercise}
% Show that $\IP{Q_1^2 \Psi} = 0$.
% \end{exercise}
Thus, applying \autoref{prop:Z-deformation-invariance},
% in this situation, we would conclude that
% $Z$ is completely independent of the function $h(x)$.
% This is actually not true, as we will see momentarily; 
% the reason is that the $\Psi$ appearing in \eqref{eq:psi-example} is not
% compactly supported, spoiling the 
% proof of \autoref{prop:Z-deformation-invariance}.
% Nevertheless:
% \begin{exercise} Show that the differentiation under the
% integral sign in the proof of 
% \autoref{prop:Z-deformation-invariance} is still justified,
% provided that $\deg h_t$ is independent of $t$. 
% \end{exercise}
we conclude:
\begin{prop}[Weak deformation invariance of partition function] 
For the action \eqref{eq:r21-susy-action}, 
$Z$ is unchanged by compactly supported variations of $h$.
\end{prop}

Making deformations with larger and larger compact support $[L,-L]$ and
using an \ti{a priori} estimate of the contribution to $Z$ from
the region $\abs{x} > L$, we can bootstrap to something slightly stronger:
\begin{prop}[Strong deformation invariance of partition function] \label{prop:strong-invariance-0d}
For the action \eqref{eq:r21-susy-action}, 
$Z$ depends only on the asymptotic signs $\eps_+$, $\eps_-$ of $h(x)$,
defined by $\lim_{x \to \pm \infty} h(x) = \eps_{\pm} \infty$.
\end{prop}

\begin{exercise} Prove \autoref{prop:strong-invariance-0d}.
\end{exercise}

As we will see below, one cannot improve this further: $Z$ really
\ti{does} depend on the asymptotic signs $\eps_{\pm}$.
Crudely speaking, the point is that so long as $h(x)^2 \to \infty$
for large $\abs{x}$, it suppresses the contribution to $Z$ 
from large $\abs{x}$, 
making the field space $\cC$ effectively compact. If we try to change
the sign $\eps_+$ (say) by interpolating through a family of functions 
$h_t(x)$, there will be some critical $t$ where we lose this compactness,
and so we lose the deformation invariance.
This is a prototype for ``wall-crossing'' phenomena 
which recur frequently in 
topological QFT. In particular, the failure of Donaldson invariants on $X$
to be fully independent of the metric 
on $X$ when $b_2^+(X) = 1$ has a similar origin.


\subsection{Localization}

We continue with the $0$-dimensional supersymmetric theory of the last section. We want to use the deformation invariance to compute $Z$.

The strategy we follow is roughly to deform $h(x) \to \lambda h(x)$ and take
$\lambda \to \infty$.
In this limit, the bosonic term $h(x)^2$ in the action becomes extremely
large away from the zeroes of $h(x)$; thus one might expect that 
the contribution to $Z$ becomes concentrated near the zeroes,
and can be computed locally there.

Let us recall how the analogous phenomenon plays out for a purely bosonic
integral in one dimension:
consider a family of actions $S_\lambda(x) = \lambda S(x)$,
with all critical points nondegenerate.
Then the $\lambda \to \infty$ asymptotics 
are governed by the method of \ti{steepest descent}.
See \cite{Bender1999} for a very clear account of this method.
\begin{prop}[Steepest descent in one dimension] \label{prop:saddle-expansion-1d-bosonic}
As $\lambda \to \infty$ we have
\begin{equation}
  \int_{-\infty}^\infty \de x \, \e^{-\lambda S(x)} \sim \sum_{x_c: S'(x_c) = 0}
  \sqrt\frac{2 \pi}{\lambda S''(x_c)} \e^{-\lambda S(x_c)}
\end{equation}
\end{prop}
(Of course this expansion is dominated by the critical point(s) where
$S(x_c)$ takes its minimum value: the others are exponentially suppressed,
and could be dropped.)
The proof goes by replacing the original integral by
\begin{equation}
  \sum_{x_c: S'(x_c) = 0} \int_{-\infty}^\infty \de x \, \e^{-\lambda (S(x_c) + \half S''(x_c) (x-x_c)^2)},
\end{equation}
a replacement which (maybe surprisingly) involves only an exponentially small error.

Making the same kind of replacement in our supersymmetric theory leads to
\begin{equation}
  Z(\lambda) \sim \sum_{x_c: h(x_c) = 0} \int \de x \de \vec\psi \, \e^{- \half \lambda h'(x_c)^2 (x-x_c)^2 - \lambda h'(x_c) \psi^1 \psi^2}
\end{equation}
and now performing the Gaussian integrals over fermions and bosons gives
\begin{equation}
  Z(\lambda) \sim \sqrt{2 \pi} \sum_{x_c: h(x_c) = 0} \frac{h'(x_c)}{\abs{h'(x_c)}} = \sqrt{2 \pi} \sum_{x_c: h(x_c) = 0} \sgn(h'(x_c))
\end{equation}
Note the cancellation between the fermions which contribute 
in the numerator and the bosons in the denominator.
Since we already know 
$Z(\lambda)$ is independent of $\lambda$, this proves:
\begin{prop} \label{prop:toy-localization}
In our supersymmetric theory with action \eqref{eq:r21-susy-action},
the partition function can be evaluated exactly:
\begin{equation}
  \frac{Z(\lambda)}{\sqrt{2\pi}} = \sum_{x_c: h(x_c) = 0} \sgn(h'(x_c)) = \half (\eps_+ - \eps_-).
\end{equation}
\end{prop}
\insfig{qft-geometry-15}{0.8}
This is such a toy example that we could have gotten this answer more directly:
\begin{exercise}
Prove \autoref{prop:toy-localization} directly by integrating
out the fermionic directions and then making the formal change of variables
$y = h(x)$.
\end{exercise}

\fixme{study the cancellation in perturbation theory?}

In contrast, expectation values like $\IP{f(x)}$ 
in this theory cannot be evaluated
exactly by localization: the reason is that
functions $f(x)$ are not
$Q$-invariant.


\subsection{Localization in a zero-dimensional sigma model} \label{sec:0d-sigma-model-localization}

Now we consider a less trivial and more geometric example of supersymmetric
localization.
Suppose $(M, \omega)$ is a compact symplectic manifold with
$\dim M = 2n$, with a $U(1)$ action
generated by a Hamiltonian vector field
\begin{equation}
  Y = \omega^{-1}(\de H).
\end{equation}
Suppose moreover that all fixed points of $Y$ are isolated.
Fix some $\alpha \in \R$.
Our interest is in the integral
\begin{equation} \label{eq:dh-integral}
  \int_M \frac{\omega^n}{n!} \e^{\I \alpha H}. 
\end{equation}
\begin{example}
The fundamental example is the case $M = S^2$ with $\omega$ the standard
volume form $\omega = \sin \theta \, \de \theta \wedge \de \varphi$,
and the $U(1)$ action rotating $\varphi$. This action is generated
by the function
\begin{equation}
  H = z = \cos \theta
\end{equation}
and thus
\begin{align}
  \int_M \frac{\omega^n}{n!} \e^{\I \alpha H} &= 2 \pi \int_0^\pi \e^{\I \alpha \cos \theta} \sin \theta \, \de \theta \\
  &= -2 \pi \int_{1}^{-1} \e^{\I \alpha z} \de z \\
  &= \frac{2\pi}{\I \alpha} (\e^{\I \alpha} - \e^{-\I \alpha}) \\
  &= 4 \pi \frac{\sin \alpha}{\alpha}.
\end{align}
\end{example}
This answer exhibits another localization
phenomenon: it is a sum of contributions 
\begin{equation} \label{eq:S2-critical-contrib}
(\pm) \frac{2\pi}{\I \alpha} \e^{\I \alpha H(x_c)}
\end{equation}
from the two fixed points $x_c$ of 
the $U(1)$ action. 

% In short, this is another situation where the
% $\alpha \to \infty$ asymptotic expansion of the integral is 
% unexpectedly also giving the exact answer.

We would like to explain this localization as an instance
of the supersymmetric localization we have been discussing.
For this, we need a generalization of what we have done
so far: we take our field space $\cC$ to be a \ti{supermanifold}
\begin{equation}
 \cC = \Pi T M 
\end{equation}
i.e. the total space of the tangent bundle to $M$,
with the parity of the fibers reversed.
Everything we have done for super vector spaces has
a supermanifold version, obtained by appropriate patching.
I will be vague about this, again referring to the references
\cite{Deligne1999b,etingof,Witten2012,Zakharevich2017} for a
more detailed treatment.

$\cC$ has local charts induced from the charts on $M$.
In each such chart, we identify $\cC$ with a patch of 
$\R^{2n \vert 2n}$, with base coordinates $x^i$ (even)
and fiber coordinates $\psi^i$ (odd). The latter generate an
exterior algebra. Thinking of $\psi^i$ as $\de x^i$, this
suggests that globally we should have
\begin{equation}
  C^\infty(\cC) = \Omega^*(M)
\end{equation}
and this is indeed true.
(More generally, for any $\cC = \Pi E$ with $E \to M$ some vector
bundle we would have $C^\infty(\cC) = C^\infty(M, \wedge^* E^*)$.)

Now we take for our action the function
\begin{equation}
  S = -\I \alpha (H + \omega) = -\I \alpha (H + \omega_{ij} \psi^i \psi^j).
\end{equation}
The partition function is
\begin{equation}
  Z = \int_\cC \de \vec{x} \de \vec{\psi} \, \e^{-S}.
\end{equation}
Here $\de \vec{x} \de \vec{\psi}$ denotes the canonical measure
on $\cC$; this measure exists roughly because the
$\de x^i$ and $\de \psi^i$ transform oppositely under
change of coordinates; more precisely, we have an extension
\begin{equation}
  0 \to \Pi \pi^* TM \to T\cC \to TM \to 0
\end{equation}
from which it follows that $\Ber T\cC = \Ber TM \otimes \Ber \Pi TM$
which is canonically trivial. (The existence of this measure is
the parity-changed analogue of the fact that $T^* M$ has a canonical
volume form.) Thus, provided that $M$ itself is oriented,
we get a canonical measure of integration on $\cC$.

Since our supermanifold $\cC$ comes to us as an odd vector bundle, the
rule for integration is a straightforward generalization of what we
have done before: namely we first integrate over the odd directions fiber
by fiber, thus reducing to an integral over the base,
\begin{equation} \label{eq:dh-integrated-over-fibers}
  Z = (\I \alpha)^n \int_M \frac{\omega^n}{n!} \e^{\I \alpha H}.
\end{equation}

\begin{exercise} Verify \eqref{eq:dh-integrated-over-fibers}, by 
computing in a local coordinate patch. (It might be easiest to use 
local Darboux coordinates for $\omega$.)
\end{exercise}

Now we want to compute $Z$ by localization.
Begin by noting that the action $S$ is invariant under the odd vector field
\begin{equation}
  Q = \de + \iota_Y = \psi^i \partial_{x^i} + Y^j \partial_{\psi^j}
\end{equation}
which has (Cartan's formula)
\begin{equation}
  \half [Q,Q] = \cL_Y = \psi^i \partial_{x^i} Y^j \partial_{\psi^j} + Y^i \partial_{x^i}.
\end{equation}
As before, we want to get a localization to some small subset of
$\cC$ by making a perturbation $S \to S + Q \Psi$.
For this we fix a $\U(1)$-invariant metric $g$ on $M$ and then 
take the odd function
\begin{equation}
  \Psi = g(\psi, Y) = g_{ij} \psi^i Y^j = \psi^i Y_i
\end{equation}
where in the last line we defined $Y_i = g_{ij} Y^j$.
Then we have
\begin{equation}
  Q \Psi = g(Y,Y) + \de(gY) = Y^i Y_i - \psi^i \psi^k \partial_{x^k} Y_i
\end{equation}
and 
\begin{equation} \label{eq:Qpsi-closed}
  Q^2 \Psi = 0
\end{equation}
(using the fact that $g$ is $\U(1)$-invariant).
\begin{exercise} Verify \eqref{eq:Qpsi-closed} by direct computation
using the coordinate expressions of $Q$ and $\Psi$.
\end{exercise}

Now we make the deformation $S \to S + \lambda Q \Psi$.
Because of \eqref{eq:Qpsi-closed}, the deformed action is 
still $Q$-invariant, for all values of $\lambda$.
Then, by \autoref{prop:Z-deformation-invariance},
$Z$ is independent of the deformation parameter $\lambda$.
Taking $\lambda$ very large, we can as usual 
reduce to a neighborhood of the zero locus of $g(Y,Y)$, i.e. to the fixed locus of $Y$. Then the steepest-descent method gives
\begin{equation} \label{eq:dh-steepest-descent}
  Z \sim \sum_{x_c \in M: Y(x_c) = 0} \e^{\I \alpha H(x_c)} \times (2\pi)^n \frac{(\de(gY)(x_c))^n/n!}{\sqrt{\det (g(Y,Y))''(x_c)}}
\end{equation}
Here both the numerator
$(\de(gY)(x_c))^n/n!$
and the denominator
$\sqrt{\det (g(Y,Y))''(x_c)}$ 
are valued in $\wedge^\rmtop T^*_{x_c} M$.
\fixme{it would be nicer to be careful about 
twists by orientation bundle here; we always
use the standard orientation to avoid having to worry about it}
What remains is to compute their ratio.

% show that their ratio is
% equal to $(-1)^{n_-} \frac{\omega^n/n!}{\sqrt{\abs{\det H''(x_c)}}}$.
One convenient way to do this is to consider a local model:
$M = \R^2$ with its standard metric and symplectic form,
\begin{equation}
g = \de r^2 + r^2 \de \theta^2, \quad \omega = r \, \de r \wedge \de \theta, 
\end{equation}
with $U(1)$ acting in the charge-$k$ representation,
generated by
\begin{equation}
  Y = k \partial_\theta, \qquad H = \half k r^2.
\end{equation}
Then we compute
\begin{equation}
  \de (gY) = 2 k r \, \de r \wedge \de \theta, \quad \sqrt{\det g(Y,Y)''(0)} = 2 k^2 r \, \de r \wedge \de \theta
\end{equation}
and thus the ratio comes to
\begin{equation}
  \frac{(\de(gY)(x_c))}{\sqrt{\det (g(Y,Y))''(x_c)}} = \frac{1}{k}.
\end{equation}
% while on the other hand
% \begin{equation}
%   \omega = r \de r \wedge \de \theta, \qquad \sqrt{\abs{\det H''(0)}} = \abs{k} r \, \de r \wedge \de \theta
% \end{equation}
% with ratio $1 / \abs{k}$,
% so that the two ratios differ by $\sgn k$.

For an isolated fixed point we can decompose $T_{x_c} M$ as a $\U(1)$ representation
into a direct sum of $n$ 2-dimensional pieces, with $\U(1)$ 
weights $k_1, \dots, k_n$, and put each piece in standard form as
above.
Thus \eqref{eq:dh-steepest-descent} becomes
\begin{equation}
  Z = (2\pi)^n  \sum_{x_c \in M: Y(x_c) = 0} \frac{\e^{\I \alpha H(x_c)}}{\prod_{i=1}^n k_i(x_c)}.
\end{equation}

% The number of negative weights $k_i$ is $\half n_-$.
% Thus finally \eqref{eq:dh-steepest-descent} becomes
% \begin{equation}
%   Z = \sum_{x_c \in M: Y(x_c) = 0} \e^{\I \alpha H(x_c)} \times (2\pi)^n (-1)^{\half n_-} \frac{\e^{\I \alpha H(x_c)} \omega^n}{\sqrt{\abs{\det H''(x_c)}}}
% \end{equation}
Comparing this with \eqref{eq:dh-integrated-over-fibers} proves:

\begin{thm}[Duistermaat-Heckman localization formula \cite{MR674406}] \label{thm:duistermaat-heckman}
\begin{equation} \label{eq:dh-formula}
\int_M \frac{\omega^n}{n!} \e^{\I \alpha H} = \left( \frac{2\pi}{\I \alpha} \right)^{n} \sum_{x_c} \frac{\e^{\I \alpha H(x_c)}}{\prod_{i=1}^n k_i(x_c)}
\end{equation}
where the $k_i(x_c) \in \Z$ are the weights of the $U(1)$ action
on the normal bundle to $x_c$.
\end{thm}

In the case of $S^2$ which we considered above, the weights at the two fixed points
were $k = +1$ and $k = -1$, the sign determined by whether the local orientation induced by the $U(1)$
action agreed or disagreed with the orientation induced by $\omega$.

A fancy way of interpreting the factor $\prod_{i=1}^n k_i(x_c)$ is:
\begin{exercise} Suppose $V$ is a vector space with $\SO(2n)$-structure.
Then define a canonical $1$-dimensional vector space $\Pf V$ (the ``Pfaffian line'')
with the property $(\Pf V)^2 = \det V$. If $\U(1)$ acts on $V$ preserving the $\SO(2n)$-structure,
show that the induced action on $\Pf V$ is multiplication by $\prod_{i=1}^n k_i$ where $k_i$
are the weights of the $\U(1)$ action.
\end{exercise}

The next simplest example of \autoref{thm:duistermaat-heckman} beyond $M = S^2$ is:

\begin{exercise} \label{ex:dh-cp2} Work out the concrete 
statement of \autoref{thm:duistermaat-heckman} in the case 
where $M = \C\PP^2$,
with $\omega$ the Fubini-Study \kahler form, 
and the $U(1)$ action given in homogeneous coordinates 
by $(z_1, z_2, z_3) \to (\e^{\I b_1 \theta} z_1, \e^{\I b_2 \theta} z_2, \e^{\I b_3 \theta} z_3)$ for $b_1, b_2, b_3 \in \Z$,
with all $b_i$ distinct.
\end{exercise}

Incidentally,
there is another way of thinking about 
the localization formula \autoref{thm:duistermaat-heckman}. 
The contributions from the fixed points match
what one would get
by making a quadratic approximation to the \ti{original} integrand 
$\omega^n \e^{\I \alpha H}$
around the critical points $x_c$
of $H$. Such an approximation generally gives the leading $\alpha \to \infty$
asymptotics of the integral (this is called the \ti{stationary phase} method,
similar to the steepest descent method which we have been using).
So, \autoref{thm:duistermaat-heckman} can be rephrased
as the statement that, for this particular integral,
 \ti{the stationary phase approximation is exact}.

Since there are a few tricky points here, let us explain 
in a bit more detail how one computes the local contributions 
in the stationary phase method. (See also the very
nice reference \cite{MR85e:58041}.)
A key difference between the stationary phase method and
the steepest-descent expansion is that in the stationary phase 
method we have the
$\I$ in the exponent, hence no exponential suppression. 
One deals with this by rotating the contour of
integration over each real variable by an angle $\pm \pi/4$
into complex space, so that the integrand
becomes exponentially suppressed again.
This produces a factor
\begin{equation}
  \e^{-\frac{\pi \I}{4} (n_+ - n_-)}
\end{equation}
where $(n_+,n_-)$ is the signature of 
the bilinear form $H''(x_c)$.
Then, making the quadratic approximation and performing the Gaussian integral 
leads to the local contribution
\begin{equation}
  \e^{-\frac{\pi \I}{4} (n_+ - n_-)} \left( \frac{2 \pi}{\alpha} \right)^n
\frac{\omega^n/n!}{\sqrt{\abs{\det H''(x_c)}}} \e^{\I \alpha H(x_c)}.
\end{equation}
Looking again at the local models one sees that this is
\begin{equation}
  \e^{-\frac{\pi \I}{4} (n_+ - n_-)} \left( \frac{2 \pi}{\alpha} \right)^n
\frac{\e^{\I \alpha H(x_c)}}{\prod_{i=1}^n \abs{k_i(x_c)}}.
\end{equation}
and since $\half n_-$ is the number of $k_i(x_c)$ which are negative, this
matches the contribution we found in \autoref{thm:duistermaat-heckman}.

I do not really know the significance of the fact that 
the stationary phase
approximation to $\int \omega^n \e^{\I \alpha H}$ 
is exact. As we have seen above, this is \ti{not}
the same method one uses in the supersymmetric localization proof
of \autoref{thm:duistermaat-heckman}, despite the obvious resemblance.

% \begin{thm}[Duistermaat-Heckman localization formula, first version] \label{thm:duistermaat-heckman}
% \begin{equation} \label{eq:dh-formula}
% \int_M \frac{\omega^n}{n!} \e^{\I \alpha H} = \left( \frac{2\pi}{\alpha} \right)^{n} \sum_{x_c} \e^{-\frac{\pi \I}{4} (n_+(x_c) - n_-(x_c))} \frac{\e^{\I \alpha H(x_c)} \omega^n/n!}{\sqrt{\abs{\det H''(x_c)}}}
% \end{equation}
% \end{thm}

\subsection{Some generalizations}

The proof of \autoref{thm:duistermaat-heckman} which we have
given naturally generalizes: we could have replaced the action $S$
by any $Q$-invariant $S \in C^\infty(\cC)$.
Under the identification $C^\infty(\cC) \simeq \Omega^*(M)$,
such an $S$ would be called an \ti{equivariantly closed form}
in the Cartan model for the $U(1)$-equivariant cohomology of $M$,
where $Q$ becomes the \ti{equivariant differential} $\de + \cL_Y$.
Then \autoref{thm:duistermaat-heckman} generalizes to

\begin{thm}[Atiyah-Bott-Berline-Vergne localization for isolated 
fixed points \cite{MR85e:58041,MR705039}] \label{thm:abbv-isolated}
Suppose $M$ is a compact manifold with a $\U(1)$-action, with isolated
fixed points.
Also suppose $\beta \in \Omega^*(M)$ is an equivariantly closed form.
Then
\begin{equation}
\int_M \e^{\beta} = \left( -2\pi \I \right)^{n} \sum_{x_c} \frac{\e^{\beta^\rmbot(x_c)}}{\prod_{i=1}^n k_i(x_c)}
\end{equation}
where $\beta^\rmbot$ means the bottom ($0$-form) component
of $\beta$.
\end{thm}

\begin{exercise} Generalize the proof
of \autoref{thm:duistermaat-heckman} to a proof of \autoref{thm:abbv-isolated}.
\end{exercise}

Finally we can consider a further generalization: let us imagine 
trying to repeat the proof in the case where the fixed points
are not isolated.
In this situation, the leading term in the asymptotics
produced by the steepest-descent method is an integral over the 
fixed locus $F \subset M$.
Thus the supersymmetric localization must reduce $\int_M \e^\beta$
to an integral over $F$. The integrand turns out to be determined by the
local structure around $F$, as follows.

The codimension of
$F$ is always even, say $2n$, since it has a nontrivial $\U(1)$-action.
Then the normal bundle $NF$
has an $\SO(2n)$-structure and connection 
induced by our choice of metric $g$ on $M$,
and a compatible $\U(1)$-action induced by the $\U(1)$-action 
on $M$. \fixme{worry about orientations}

\begin{defn}[Equivariant Euler form] Suppose $X$ is a manifold, with
a $\U(1)$-equivariant $\SO(2n)$-bundle $E$, carrying a 
$\U(1)$-equivariant connection. 
The \ti{equivariant Euler form} of $E$ is \fixme{check signs}
\begin{equation}
  \Euler(E) = \Pf\left(\frac{1}{2\pi} \left(Y + F\right) \right) \in \Omega^*(X)
\end{equation}
where $Y \in \Omega^0(\fso(E))$ is the generator of the $\U(1)$ action
and $F \in \Omega^2(\fso(E))$ is the curvature of the 
equivariant connection on $E$.
\end{defn}
So $\Euler(E)$ is a form concentrated in even degrees.
For example, in the case $n=1$, using the standard trivialization
of $\fso(2)$, we have simply
\begin{equation}
  \Euler(E) = \frac{1}{2\pi} (\I k + F),
\end{equation}
the sum of a $0$-form and a $2$-form.
More generally, the bottom component of $\Euler(E)$ is
$\prod_{i=1}^n \frac{\I k_i}{2\pi}$ where the $k_i$ are the weights of the 
$\U(1)$-action. In particular, if no $k_i = 0$ then $\Euler(E)$
has nowhere-vanishing bottom component. This means $\Euler(E)$
is invertible in $\Omega^*(X)$, i.e.
there is a form
\begin{equation}
  \frac{1}{\Euler(E)} \in \Omega^*(X).
\end{equation}

\begin{exercise}
Write the form $\frac{1}{\Euler(E)}$ explicitly in the case $n=1$.
\end{exercise}

% defined using the series expansion
% \begin{equation}
%   \frac{1}{c + x} = \frac{1}{c} (1 - c^{-1} x + c^{-2} x^2 + \cdots)
% \end{equation}
% which is finite when $x$ is nilpotent.
We use this in the statement of the next theorem:

\begin{thm}[Atiyah-Bott-Berline-Vergne localization in general \cite{MR85e:58041,MR705039}] \label{thm:abbv}
Suppose $M$ is a compact manifold with a $\U(1)$-action, with fixed locus
$F$.
Also suppose $\beta \in \Omega^*(M)$ is an equivariantly closed form.
Choose a $\U(1)$-invariant metric $g$ on $M$. Then
\begin{equation}
\int_M \e^{\beta} = \int_F \frac{\e^{\beta}}{\Euler(NF)}.
\end{equation}
\end{thm}

\begin{exercise} Show that \autoref{thm:abbv} reduces to
\autoref{thm:abbv-isolated} when the fixed points of the
$\U(1)$-action are isolated.
\end{exercise}

\begin{exercise} Use \autoref{thm:abbv} to generalize
\autoref{ex:dh-cp2} to the case
where the $b_i$ need not be distinct.
\end{exercise}

\begin{exercise} Generalize the proof
of \autoref{thm:abbv-isolated} to a proof of \autoref{thm:abbv}. \fixme{hard? at least needs more delicacy with the steepest descent expansion}
\end{exercise}


\section{QFT in \texorpdfstring{$1$}{1} dimension}

Now we move to $1$-dimensional quantum field theory.
This involves a choice of Riemannian $1$-manifold $(X,\eta)$.
We will take $X$ to be compact: either
\begin{equation}
  X = [0,T] \quad \text{ or } \quad X = S^1(T)
\end{equation}
(where by $S^1(T)$ we mean the circle with circumference $T$).
We parameterize $X$ by $t$ which we sometimes
think of as ``time.''

Our configuration space $\cC_X$, over which we want to integrate,
will now be some kind of space
of ``generalized functions on $X$.''


\subsection{The \texorpdfstring{$1$}{1}-dimensional sigma model}

Fix the data:
\begin{itemize}
  \item A Riemannian manifold $(Y,g)$,
  \item A function $V: Y \to R$ (``potential'').
\end{itemize}
We are going to define a $1$-dimensional quantum field theory 
which will be equivalent to
the usual nonrelativistic \ti{quantum mechanics}
describing a single particle propagating on $Y$.

In this quantum field theory, when $X = S^1$, the
field space is the space of continuous maps
\begin{equation}
  \cC_{S^1} = \{ \phi: S^1 \to Y\}.
\end{equation}
When $X$ is the interval, we will include a bit more data:
use the notation $X = [0,T]_{y_0}^{y_1}$ to mean the
interval decorated by boundary conditions at the two ends, and
define
\begin{equation}
  \cC_{[0,T]_{y_0}^{y_1}} = \{\phi: [0,T] \to Y \, \vert \, \phi(0) = y_0, \phi(T) = y_1\}.
\end{equation}

The action is, for differentiable $\phi$,
\begin{align} \label{eq:1d-sigma-model-action}
  S(\phi) &= \int_X \dvol_X \left(\half g(\dot\phi,\dot\phi) + V(\phi) - \frac16 R(\phi) \right) \\
  &= \int_X \de t \sqrt{\eta_{tt}} \left(\half g_{ij}(\phi) \dot\phi^i \dot\phi^j \eta^{tt} + V(\phi) - \frac16 R(\phi)\right)
\end{align}
where $R: Y \to \R$ is the scalar curvature.

If we choose the parameter $t$ on $X$ to be the arc-length, then
the action reduces to
\begin{equation} \label{eq:1d-sigma-model-action-arc-length}
    S(\phi) = \int_X \de t \, \left( \half g_{ij}(\phi) \dot\phi^i \dot\phi^j + V(\phi) - \frac16 R(\phi) \right).
\end{equation}
We can think of various $\phi \in \cC_X$ as various possible
trajectories that the particle could take on $Y$.

\ti{Formally} we would like to consider the partition function on $X = S^1$,
\begin{equation} \label{eq:1d-formal-ZS1}
  Z_{S^1(T)} \, \text{''=''} \, \int_{\cC_{S^1(T)}} \de \phi \, \e^{-S}.
\end{equation}
or the analogue on the interval,
\begin{equation} \label{eq:1d-formal-Zinterval}
  Z_{[0,T]_{y_0}^{y_1}} \, \text{''=''} \, \int_{\cC_{[0,T]_{y_0}^{y_1}}} \de \phi \, \e^{-S}
\end{equation}
So \eqref{eq:1d-formal-ZS1} is a sum over all
closed trajectories in $Y$, and \eqref{eq:1d-formal-Zinterval} 
is a sum over all possible paths
a particle can take from $y_0$ to $y_1$.
\insfig{qft-geometry-16}{0.8}
More generally, given any functional $\cO: \cC_X \to \R$
we can contemplate the (unnormalized) expectation value
\begin{equation} \label{eq:1d-expectation-formal}
  \IP{\cO} \, \text{''=''} \, \int_{\cC_{X}} \de \phi \, \cO(\phi) \, \e^{-S}.
\end{equation}

How are we to make sense of \eqref{eq:1d-expectation-formal}?
As it stands, it has (at least) two difficulties.
First, there is no reasonable notion of translation-invariant Lebesgue measure on 
an infinite-dimensional space,\footnote{The basic problem is that in an 
infinite-dimensional Banach space a ball of radius $1$
contains infinitely many disjoint balls of radius $\eps$.} 
so it is not clear what we could mean by
$\de \phi$. Second, the action $S$ is not defined for arbitrary continuous
paths, only for differentiable ones. For non-differentiable paths it looks
like we should have $S(\phi) = \infty$ in some sense.
As we will discuss momentarily,  
these difficulties actually ``cancel'' one another
in some sense.
% it turns out that there \ti{is} a reasonable definition of a measure
% $\de \phi \, \e^{-S}$, \ti{Wiener measure}.


\subsection{Discretization} \label{sec:discretization}

Let us start with the case $X = [0,T]_{y_0}^{y_1}$.
One natural approach to defining 
\eqref{eq:1d-formal-Zinterval} 
is to try \ti{discretization} i.e. replacing $X$ by a lattice
of $N+1$ points, with spacing $\Delta t = \frac{T}{N}$. Then we 
define a discretized field space
\begin{equation}
  \cC_{X;N},
\end{equation}
the space of \ti{geodesic polygons} i.e. piecewise-smooth
paths, with each segment the unique minimizing geodesic between its endpoints.
\insfig{qft-geometry-17}{0.8}
$\cC_{X;N}$ is an open dense subset\footnote{The restriction to an open dense
subset is a technicality, brought on by the fact that some pairs of points are
connected by more than one length-minimizing 
geodesic.} in $Y^{N+1}$.
Restricting $S$ to these paths gives $S: \cC_{X;N} \to \R$.
$\cC_{X;N}$ also has a natural measure induced from the volume
measure on $Y$, up to a tricky constant:
\begin{equation} \label{eq:discretized-1d-measures}
 \de\mu_N = \frac{1}{(2 \pi \Delta t)^{\frac{\dim Y}{2} \times N}} \prod_{n=1}^{N-1} \dvol_Y(\phi(t_n)).
\end{equation}
Thus we can define the discretized partition function
\begin{equation}
  Z_N = \int_{\cC_{X;N}} \de \mu_N \, \e^{-S}
\end{equation}
% Now we can write down the integral 
% defining a discretized version
% of \eqref{eq:1d-expectation-formal}, 
% \begin{equation}
%   \IP{\cO}_{X;N} = \int_{\cC_{X;N}} \left[ \prod_{n=0}^{N-1} \dvol(\phi(n)) \right] \e^{-S_N(\phi)} 
% \end{equation}
and then try to make sense of the \ti{limit} as $N \to \infty$.
The limit does indeed exist (in ``good'' situations, e.g.
$Y$ compact or $Y = \R^n$), which I think has been known for a 
long time when $Y = \R^n$, but is apparently much more recent
for more general 
$Y$, e.g. see \cite{MR1698956,Baer2007} for the 
case of $Y$ compact.
To describe what the limit is, we need a digression on the heat kernel.


\subsection{Heat kernel}

We continue with a Riemannian manifold $Y$ and a function $V: Y \to \R$.
Then we have an operator acting on $C^\infty(Y)$,
\begin{equation}
  H = - \half \Delta + V.
\end{equation}
The \ti{heat equation} defined by these data is an equation
for functions of two variables, $f: \R \times Y \to \R$.
We view such an $f$ as a family of functions $f_t: Y \to \R$;
then the heat equation is
\begin{equation} \label{eq:heat-equation}
  \partial_t f_t(x) + H f_t(x) = 0. 
\end{equation}

\begin{prop}[Heat kernel] \fixme{what class of $Y$, $V$?}
For any $t \in \R_+$, the \ti{heat kernel} (deformed by $V$) 
is a smooth function $k_t$ on $Y \times Y$, obeying the heat
equation in the first variable,\footnote{Our
convention is that $\Delta$ is the usual Laplacian,
i.e. $\Delta = \sum \partial_i^2$ on $\R^n$. This has the inconvenient
consequence that $\Delta$ is a \ti{negative} definite operator on $L^2(Y)$.
Thus we will often find ourselves considering $- \Delta$.}
\begin{equation}
  \partial_t k_t(x,y) + H_x k_t(x,y) = 0
\end{equation}
and such that as $t \to 0^+$ this solution ``concentrates'' at the point $y$,
\begin{equation}
  \lim_{t \to 0^+} k_t(x,y) = \delta(x,y). 
\end{equation}
These properties characterize $k_t$.
\end{prop}
\begin{exercise}
Show that on $Y = \R^n$, when $V = 0$, the heat kernel
is\footnote{The usual formulas for the heat kernel differ from this by the
replacement $t \to 2t$, because they omit the factor $\half$ in the
definition of $H$. The same replacement is needed in comparing the formulas we write below
on a Riemannian manifold to those in the literature, e.g. \cite{Roe1988a}.}
\begin{equation}\label{eq:heat-kernel}
  k_t(x,y) = \left( \frac{1}{2 \pi t} \right)^{\frac{n}{2}} \exp \left( - \frac{1}{2t} \norm{x-y}^2 \right).
\end{equation}
\end{exercise}

The heat kernel is really a kernel in the following sense.
Given a smooth function $f: Y \to \R$, one can extend it to a family of smooth 
functions $f_t: Y \to \R$ for $t \in \R_{\ge 0}$ by solving the heat equation
\eqref{eq:heat-equation}.
In particular, this defines a map $U_t: C^\infty(Y) \to C^\infty(Y)$,
taking $f \mapsto f_t$, which we might call
``evolving the heat equation for time $t$.''

A convenient notation is to write
\begin{equation}
 U_t = \e^{-t H}.
\end{equation}
The justification for this notation is that $U_t$ obeys the differential equation
\begin{equation} \label{eq:Ut-ode}
  \frac{\de}{\de t} U_t = -H U_t
\end{equation}
which is really just a rephrasing of the heat equation \eqref{eq:heat-equation},
and $U_0 = 1$.

\begin{exercise}
Prove \eqref{eq:Ut-ode}.
\end{exercise}

\begin{prop} $k_t(x,y)$ is the integral kernel for $U_t$, in the sense that
\begin{equation}
  (U_t f)(x) = \int_M \de \vol_y \, k_t(x,y) f(y). 
\end{equation}
\end{prop}

$U_t$ is an extremely nice operator, with the
``smoothing'' property: for any
$t > 0$ it maps
distributions to $C^\infty$ functions. In particular
it gives a linear operator on $L^2(Y)$.
This is \ti{not} a unitary operator.\footnote{One could have instead considered
the analytic continuation $t \to \I t$ which would
have been the time evolution for the Schr\"odinger equation;
in that case it really would be unitary.}



\subsection{Path integral and heat kernel}

Now we can state the main fact about the $1$-dimensional sigma model:
its path integral actually exists and the result is the heat kernel!

\begin{prop}[Lattice approximations to $1$-dimensional sigma model
converge to the heat kernel] \label{prop:sigma-heat}
If $X = [0,T]_{y_0}^{y_1}$,
then the discretized path integrals converge, so we can define
\begin{equation}
Z_{[0,T]_{y_0}^{y_1}} = \lim_{N \to \infty} Z_N.
\end{equation}
Moreover,
\begin{equation}
Z_{[0,T]_{y_0}^{y_1}} = k_T(y_0,y_1).
\end{equation}
\end{prop}

In the stochastic-process community this would be rephrased
as the statement that, in the case $V = 0$, 
$\lim_{N \to \infty} \de \mu_N \e^{-S}$ is the
\ti{(conditional) Wiener measure}. Indeed the defining
property of Wiener measure is its relation to the heat 
kernel. Note that although $\de \mu_N \e^{-S}$ 
has a well defined
limit, the measure $\de \mu_N$ by itself does not.

If we take $X = S^1$ then we can make a similar 
discretization: the only difference is that we require
$y_0$ and $y_N$ to be equal and then we integrate over their
common value. Thus for the partition function we get
\begin{equation}
Z_{S^1} = \int \dvol_Y k_t(y,y)
\end{equation}
This integral has another interpretation: it is the trace
of the integral operator $U_t$ acting on $L^2$ functions.
Stated formally,
\begin{prop}[Lattice approximations to $1$-dimensional sigma
model on $S^1$ converge to the trace of the heat flow]
If $X = S^1(T)$, then the discretized path integrals converge,
\begin{equation}
  Z_{S^1(T)} = \lim_{N \to \infty} Z_N,
\end{equation}
and then
\begin{equation}
  Z_{S^1(T)} = \Tr_{L^2(Y)} \e^{-T H}.
\end{equation}
\end{prop}


\subsection{A sketchy proof}

Here is a rough computation which gives some
motivation for \autoref{prop:sigma-heat}.
(See \cite{Baer2007} for an actual proof along these lines.)
We consider the special case $V = 0$.
First, the property $U_T = U_{\Delta t}^N$ gives a 
relation between the integral kernels,
\begin{equation} \label{eq:kernel-chopup}
  k_T(y_N, y_0) = \int_{Y^{N-1}} \prod_{n=1}^{N-1} \dvol_{y_n} \prod_{n=0}^{N-1} k_{\Delta t} (y_{n+1}, y_n).
\end{equation}

Next we use the short time asymptotics of
the heat kernel. As $\Delta t \to 0$, there is a sort of complicated
expansion described in \cite{Berline2004}. Fortunately we need only the leading behavior
of $k_t(x,y)$ as $\Delta t \to 0$ and $x \to y$,
plus the first-order correction in $\Delta t$, plus the first-order correction
in $d(x,y)$; all the higher-order terms will not contribute 
in \eqref{eq:kernel-chopup} after we take the large $N$ limit.

The leading behavior as $\Delta t \to 0$ and $x \to y$ 
is not hard to guess: it is the same as on $\R^n$, namely
\begin{equation}
  k_{\Delta t}(x,y) \sim \left( \frac{1}{2 \pi \Delta t} \right)^{\frac{\dim Y}{2}} \exp \left( - \frac{1}{2 \Delta t} d(x,y)^2 \right).
\end{equation}
The first-order correction in $d(x,y)$ can be extracted from \cite{Berline2004}: it is of the form
\begin{equation}
  k_{\Delta t}(x,y) \sim \left( \frac{1}{2 \pi \Delta t} \right)^{\frac{\dim Y}{2}} \exp \left( - \frac{1}{2 \Delta t} d(x,y)^2 \right) \left( 1 + \frac{1}{12} \Ric_x(x-y,x-y) + \cdots \right).
\end{equation}
To get the first-order correction in $\Delta t$ we can restrict to the diagonal,
and then look in \cite{Roe1988a} which says that 
as $\Delta t \to 0$ we have
\begin{equation}
  k_{\Delta t}(x,x) \sim \left( \frac{1}{2 \pi \Delta t} \right)^{\frac{\dim Y}{2}} \exp \left( - \frac{1}{2 \Delta t} d(x,x)^2 \right) \left( 1 + \frac{1}{12} R(x) \Delta t + \cdots \right)
\end{equation}
Substituting these in \eqref{eq:kernel-chopup} we get
\begin{multline}
  k_T(y_N, y_0) \sim \int_{Y^{N-1}} \prod_{n=1}^{N-1} \dvol_{y_n} \prod_{n=0}^{N-1}\left( \frac{1}{2 \pi \Delta t} \right)^{\frac{\dim Y}{2}} \times \\ 
  \exp \left( - \frac{1}{2 \Delta t} d(y_{n+1},y_n)^2 \right) \left(1 + \frac{1}{12} R(y_n) \Delta t + \frac{1}{12} \Ric_{y_n}(y_{n+1}-y_n,y_{n+1}-y_n) + \cdots \right)
\end{multline}
The last term is a bit tricky to deal with, but under the integral it can be replaced
by $\frac{1}{12} R(y_n) \Delta t$. \fixme{explain how} 
Thus altogether we get
\begin{equation}
 k_T(y_N, y_0)  \sim  \int_{Y^{N-1}} \de \mu_N \exp \left[ \sum_{n=0}^{N-1} \Delta t \left( - \half \left(\frac{d(y_{n+1},y_n)}{\Delta t}\right)^2 + \frac{1}{6} R(y_n) \right) + \cdots \right].
\end{equation}
Finally, this last expression agrees with
the restriction of $S$ to polygonal paths, up to terms which
vanish in the limit $\Delta t \to 0$.

When $V \neq 0$ we can make a similar formal argument to motivate
\autoref{prop:sigma-heat}.
One technical point is that we need to be able to separate
the pieces involving $\Delta$ from the pieces involving $V$.
This is done using the following, 
applied to $A = -\half T \Delta$, $B = T V$:
\begin{prop}[Trotter product formula] \label{prop:trotter}
\fixme{with appropriate functional analytic hypothesis}
\begin{equation}
  \e^{A+B} = \lim_{N \to \infty} \left(\e^{\frac{A}{N}} \e^{\frac{B}{N}}\right)^N.
\end{equation}
\end{prop}

\begin{exercise} Use \autoref{prop:trotter}
to extend the formal argument we gave for \autoref{prop:sigma-heat}
to the case $V \neq 0$.
\end{exercise}

% We need a little more background about the heat kernel:
% \begin{prop}[Heat kernel and Hamiltonian semigroup]
% Writing $H = - \Delta + V$, there is a well defined
% smoothing operator $\e^{-t H}$ acting on distributions on 
% $Y$, and letting $\ket{x}$ denote the distribution $\delta(x)$
% we have
% \begin{equation}
%   \IP{y | e^{-tH} | x} = k_t(x,y).
% \end{equation}
% \end{prop}


\subsection{Local observables}

There is a similar interpretation for the path
integral with a ``local observable'' inserted. By this
we mean an observable $\cO: \cC_X \to \R$ whose value 
only depends on some finite-order jet of $\phi \in \cC_X$
at some fixed $t$: the ``locality'' is along $X$, in the $t$ coordinate. 
The simplest example would be to take
some function $F: Y \to \R$ and then define
\begin{equation}
  \cO_F(t): \cC_X \to \R
\end{equation}
by
\begin{equation}
  (\cO_F(t)) (\phi) = F(\phi(t)).
\end{equation}
Then we can define correlation functions
\begin{equation}
  \IP{\cO_F(t)}_X \, \text{''=''} \, \int_{\cC_{X}} \de \phi \, F(\phi(t)) \, \e^{-S}
\end{equation}
by the same kind of discretization we discussed above
(except that we should take subintervals of irregular
lengths, so that $t$ can be on the boundary between two
of them).
The result is \fixme{ref?}
\begin{prop} \label{prop:1d-discretization-with-insertion}
  $\IP{\cO_F(t)}_{[0,T]^{y_1}_{y_0}}$ is the integral kernel
  representing the operator 
  \begin{equation}
    \e^{-H(T-t)} \hat F \e^{-Ht}
  \end{equation}
  on $L^2(Y)$, where $\hat F$ means the operator of multiplication
  by $F$.
\end{prop}
One pictures this as an instruction: 
``propagate for time $t$, then do
$F$, then propagate for another time $T-t$.''
\insfig{qft-geometry-18}{1.0}

\begin{exercise}Bootstrap \autoref{prop:1d-discretization-with-insertion} into a similar formula
for $\IP{\cO_{F_1}(t_1) \cO_{F_2}(t_2) \cdots \cO_{F_k}(t_k)}$.
\end{exercise}

\begin{exercise}
Give a heuristic proof of \autoref{prop:1d-discretization-with-insertion} along the lines of 
what we did above for \autoref{prop:sigma-heat}.
\end{exercise}

\autoref{prop:1d-discretization-with-insertion} 
says that the path integral converts the
observable $\cO_F$ associated to the function $F: Y \to \R$ 
into an operator $\hat F$ on $L^2(Y)$, albeit
a rather obvious one. This process is sometimes called
\ti{path-integral quantization} of the function $F$.

We could also consider observables depending on, say, 
the $1$-jet of $\phi$ instead of the $0$-jet. This would 
amount to considering a function $F: TY \to \R$, defining
\begin{equation}
  (\cO_F(t)) (\phi) = F(\phi'(t)),
\end{equation}
and constructing $\IP{\cO_F(t)}$
again by discretization.
Then it is an interesting question to identify 
the corresponding operator on $L^2(Y)$.

At least when $Y = \R$ we can answer this question:
\fixme{though strictly speaking $Y = \R$ was not allowed
in our previous discussion}
\begin{prop} \label{prop:quantization-p}
When $Y = \R$, use the standard 
metric to identify $TY = T\R$ with $T^* Y = T^* \R$
coordinatized by $(x,p)$. Then the function $F = p$
induces (in the above sense) the operator
\begin{equation}
   \hat p = \partial_x
\end{equation} 
on $L^2(\R)$. \fixme{check sign}
\end{prop}

\begin{exercise} Give a heuristic proof
of \autoref{prop:quantization-p}.
\end{exercise}


\subsection{Noncommutativity and discretization}

Thus the path-integral quantization converts the
functions
$p$, $q$ on $T^* \R$ to operators $\hat{p}$, $\hat{q}$
on $L^2(\R)$. Of course $\hat{p}$ and $\hat{q}$ do
not commute with one another, which might at first seem
puzzling: where does the noncommutativity come from?
Consider the decorated intervals below:
\insfig{qft-geometry-19}{0.95}
Naively we would have (where $\leftrightarrow$ means
``is the heat kernel for,'' and $T = t_1 + t_2 + t_3$) \fixme{switch to a better notation}
\begin{equation}
  \e^{-t_3 H} \hat{p} \e^{-t_2 H} \hat{x} \e^{-t_1 H} \leftrightarrow \int_{\cC_{[0,T]_{y_0}^{y_1}}} \de \phi \, \phi'(t_1 + t_2) \phi(t_1) \e^{-S(\phi)}
\end{equation}
\begin{equation}
  \e^{-t_3 H} \hat{x} \e^{-t_2 H} \hat{p} \e^{-t_1 H} \leftrightarrow \int_{\cC_{[0,T]_{y_0}^{y_1}}} \de \phi \, \phi(t_1 + t_2) \phi'(t_1) \e^{-S(\phi)}
\end{equation}
In the limit $t_2 \to 0$ these two path integrals 
both formally limit to the same object,
\begin{equation}
\int_{\cC_{[0,T]_{y_0}^{y_1}}} \de \phi \, \phi(t_1) \phi'(t_1) \e^{-S(\phi)}
\end{equation}
but we want to say that actually the two limits are not quite the same: one is
$ \e^{-t_3 H} \hat{p} \hat{x} \e^{-t_1 H}$
and the other is
$ \e^{-t_3 H} \hat{x} \hat{p} \e^{-t_1 H}$. 
How can this be?

To understand this issue let us think a bit more carefully
about how we defined the path integral by discretization.
When we discretize the interval $[0,T]$ we will put one
of the discretization points at $t_1$, in order to have
a clean definition of the operator $\phi(t_1)$.
% But then we have to choose from among various 
% possible discretizations of $\dot\phi(t_1)$: in particular
% we might take 
% \begin{equation}
%   (\phi(t_1 + \Delta t) - \phi(t_1)) / \Delta t
% \end{equation}
% or
% \begin{equation}
% (\phi(t_1) - \phi(t_1 - \Delta t)) / \Delta t.
%  \end{equation} 
% In the absence of the additional insertion $\phi(t)$,
% these two insertions behave the same in the 
% $\Delta t \to 0$ limit. But with $\phi(t_1)$ inserted
% the story is different. 
But what do we do about $\phi'(t_1)$?
Let us set
\begin{equation}
  y_1 = \phi(t_1 - \Delta t), \qquad y_2 = \phi(t_1), \qquad y_3 = \phi(t_1 + \Delta t).
\end{equation}
Then we might reasonably choose either 
\begin{equation}
  \phi'(t_1) = (y_2 - y_1) / \Delta t, \qquad \phi'(t_1) = (y_3 - y_2) / \Delta t.
\end{equation}
Then in the discretized path integrals with these two 
insertions the $y_2$-dependent part is respectively
\begin{equation}
  \frac{1}{\Delta t} \int \de y_2 \, (y_2 - y_1) y_2 \, \e^{-F(y)}, \qquad
  \frac{1}{\Delta t} \int \de y_2 \, (y_3 - y_2) y_2 \, \e^{-F(y)}
\end{equation}
where
\begin{equation}
  F(y) = [(y_1 - y_2)^2 + (y_3 - y_2)^2] / (2 \Delta t).
\end{equation}
These two integrals are not quite the same:
by integration by parts one shows that they differ by
\begin{equation} \label{eq:commutator-residue}
  \int \de y_2 \, \e^{-F(y)}.
\end{equation}
Note this difference survives in the limit 
$\Delta t \to 0$!
But the integral \eqref{eq:commutator-residue} is just what we get from an insertion
of the operator $1$ in the path integral.
So it is what we expected from the commutation relation
\begin{equation}
  [\hat p, \hat q] = 1.
\end{equation}



\subsection{Symmetries}

Recall from the $0$-dimensional case that symmetries of $S$ --- i.e. vector fields on $\cC$
which annihilate $S$ --- lead to constraints on correlation functions.

In the $1$-dimensional theory we are considering here, with
action \eqref{eq:1d-sigma-model-action}, we have two different sources of
symmetries:
\begin{itemize}
  \item isometries of $X$,
  \item isometries of $Y$.
\end{itemize}
For $X = S^1(T)$, the group of isometries of $X$ is $\Isom(X) \simeq U(1)$,
acting by shifts $t \to t+c$.
The immediate consequence of this $U(1)$ symmetry is that
for any $c$ we have
\begin{equation} \label{eq:1d-symm-1}
  \IP{\cO_1(t_1) \cO_2(t_2) \cdots \cO_n(t_n)}_{S^1(T)} = \IP{\cO_1(t_1 + c) \cO_2(t_2 + c) \cdots \cO_n(t_n + c)}_{S^1(T)}.
\end{equation}
Similarly for any $g \in G = \Isom(Y)$ we have
\begin{equation} \label{eq:1d-symm-2}
  \IP{\cO_1(t_1) \cO_2(t_2) \cdots \cO_n(t_n)}_{S^1(T)} = \IP{\cO_1^g(t_1) \cO_2^g(t_2) \cdots \cO_n^g(t_n)}_{S^1(T)}.
\end{equation}
The facts \eqref{eq:1d-symm-1}, \eqref{eq:1d-symm-2} 
can also be understood from the Hamiltonian point of view, i.e.
using the fact that (if $T > t_n > t_{n-1} > \cdots > t_1 > 0$)
\begin{equation} \label{eq:correlation-hamiltonian}
	\IP{\cO_n(t_n) \cO_{n-1}(t_{n-1}) \cdots \cO_1(t_1)}_{S^1(T)} = \Tr_{\cH} \e^{-(T-t_n) H} \hat\cO_n \e^{-(t_n -t_{n-1}) H} \hat\cO_{n-1} \cdots \hat\cO_1 \e^{-t_1 H}.
\end{equation}

\begin{exercise}
Prove \eqref{eq:1d-symm-1} and \eqref{eq:1d-symm-2} using \eqref{eq:correlation-hamiltonian}.
\end{exercise}
In the proof of \eqref{eq:1d-symm-2}, we use the fact that
$G$ acts on $\cH = L^2(Y)$, and $\hat{\cO}^g = g \hat{\cO} g^{-1}$.


\fixme{the conserved charge}

\fixme{coupling to ``background field'': connection on the
circle}

Finally let us introduce a piece of notation which will be useful later. 
Each of the symmetry groups we considered above is a connected Lie group,
so we can describe its action on $\cC$ 
by giving the action of the Lie algebra.
For example, the infinitesimal shift $t \to t + \eps$ acts by
$\phi(t) \to \phi(t) + \eps \dot\phi(t)$, which we represent
by writing
\begin{equation}
	\delta \phi = \eps \dot\phi,
\end{equation}
or relative to any coordinate system on $Y$,
\begin{equation}
	\delta \phi^I = \eps \dot\phi^I.
\end{equation}
Similarly an element $X \in \fg = \Lie(\Isom(Y))$
acts by
\begin{equation}
	\delta \phi = \eps X(\phi),
\end{equation}
or in coordinates
\begin{equation}
	\delta \phi^I = \eps X^I(\phi),
\end{equation}
where $X^I \partial_I$ is the coordinate expression of the vector field
by which $X$ acts on $Y$.

\subsection{Simple examples} \label{sec:0d-simple-examples}

\begin{example}[Harmonic oscillator] \label{exa:harmonic-oscillator}
A fundamental example is the case
\begin{equation}
  Y = \R, \qquad V = \frac12{\omega^2 x^2}, \qquad \omega \in \R.
\end{equation}
Then we have
\begin{equation}
  H = -\half \partial_x^2 + \half x^2 \omega^2
\end{equation}
acting on $\cH = L^2(\R)$.
There is a nice explicit basis of eigenfunctions,
\begin{align}
  \psi_0 &= \e^{- \omega x^2/2}, \\
  \psi_1 &= x \e^{- \omega x^2/2}, \\
  \psi_2 &= \left (x^2 - \frac{1}{2 \omega} \right) \e^{- \omega x^2/2}, \\
  \psi_n &= H_n(x \sqrt{\omega}) \e^{- \omega x^2/2}
\end{align}
where $H_n$ is the $n$-th Hermite polynomial.
They obey
\begin{equation}
  H \psi_n = \left(\half + n\right) \omega \psi_n,
\end{equation}
so the eigenvalues of $H$ are
\begin{equation}
  \left( \half + n \right) \omega \text{ for $n \ge 0$}.
\end{equation}
Thus the partition function on $X = S^1(T)$ is
\begin{equation} \label{eq:s1-z-harmonic-oscillator}
  Z_{S^1(T)} = \Tr \e^{-T H} = \sum_{n=0}^\infty \exp\left(- \omega T\left(n + \half\right)\right) = \frac{1}{2 \sinh(\omega T/2)}.
\end{equation}
\end{example}

\begin{example}[Sigma model into $S^1$] \label{exa:sigma-model-s1}
Another basic example is
\begin{equation}
  Y = S^1_R, \qquad V = 0.
\end{equation}
Here we have
\begin{equation}
  H = -\half \partial_x^2
\end{equation}
acting on $\cH = L^2(S^1_R)$. A simple basis of eigenfunctions is
\begin{equation}
  \psi_0(x) = 1, \qquad \psi_{2n-1}(x) = \sin\left(\frac{2 \pi n x}{R}\right), \qquad \psi_{2n}(x) = \cos\left(\frac{2 \pi n x}{R}\right)
\end{equation}
and so the eigenvalues are
\begin{equation}
  0, \frac{2 \pi^2 n^2}{R^2} \text{ (with multiplicity $2$) for $n > 0$}.
\end{equation}
Thus the partition function on $X = S^1(T)$ is
\begin{equation}
  Z_{S^1(T)} = \Tr \e^{-T H} = 1 + 2 \sum_{n=1}^\infty \exp\left(-\frac{2 \pi^2 n^2 T}{R^2}\right) = \sum_{n = -\infty}^\infty \exp\left(-\frac{2 \pi^2 n^2 T}{R^2}\right),
\end{equation}
also known as the Jacobi theta function,
\begin{equation} \label{eq:zs1-theta-function}
  Z_{S^1(T)} = \vartheta \left(\tau = \frac{2 \pi \I T}{R^2}, \ z = 0\right).
\end{equation}
\end{example}

\begin{exercise} For $\alpha \in \R$, let $S_\alpha: \cH \to \cH$ be the operation 
of shifting by $\alpha$, $\psi(x) \mapsto \psi(x + \alpha)$. Compute $\Tr_{\cH} \e^{-TH} S_\alpha$.
(You should find a theta function with the argument $z$ nonzero, generalizing \eqref{eq:zs1-theta-function}.)
\end{exercise}

\subsection{Infinite-dimensional determinants} \label{sec:infinite-dets}

In the examples of \autoref{sec:0d-simple-examples} the discretized 
path integrals involve 
only Gaussian integrals, albeit Gaussian integrals over unbounded numbers of variables.
Recall from \eqref{eq:partition-function-bosonic-gaussian}
that for finite-dimensional Gaussian integrals we have
\begin{equation} \label{eq:partition-function-bosonic-gaussian-redux}
  (2\pi c)^{-\half \dim V} \int_{V} \de \mu \, \e^{-\half M(x,x)} = \frac{\de\mu}{\sqrt{\det (c M)}}.
\end{equation}
The discretized versions of the path integrals in \autoref{sec:0d-simple-examples}
have the form of the LHS, if we take $c = \Delta t = T/N$.
Now, we have seen that the $N \to \infty$ limit of the discretized path integral exists.
Thus the limit of the RHS also exists.
We would like to interpret it as some kind of infinite-dimensional
determinant.

One obstacle is that in the infinite-dimensional case the measure $\de \mu$ does not exist.
So, we need to get rid of that.
For this note that in the finite-dimensional case, we can identify the bilinear pairing
$M \Delta t$ with a linear operator $A$ on $V$, 
by choosing an identification $V \simeq V^*$ coming from a metric
on $V$. If we choose our metric on $V$ such that $\norm{\de \mu} = 1$ then we have the simple relation
\begin{equation}
  \frac{\de \mu}{\sqrt{\det M \Delta t}} = \frac{1}{\sqrt{\det A}}.
\end{equation}

\begin{exercise} Show that the $N \times N$ matrix $A$ which appears
in the discretization of the path integral of 
\autoref{exa:harmonic-oscillator} is 
\begin{equation}
  A_{ij} = \left(2 + \frac{\omega^2 T^2}{N^2}\right) \delta_{i,j} - \delta_{i,j-1} - \delta_{i,j+1}.
\end{equation}
Check (at least numerically) that $1 / \sqrt{\det A}$
indeed approaches the value \eqref{eq:s1-z-harmonic-oscillator} as $N \to \infty$.
(Explicitly the eigenvalues of $A$ are: $\frac{\omega^2 T^2}{N^2}$,
$4 \sin^2(\pi n / N) + \frac{\omega^2 T^2}{N^2}$ (with multiplicity $2$) for $1 \le n \le \frac{N}{2}-1$, and $4 + \frac{\omega^2 T^2}{N^2}$ if $N$ is even.)
\end{exercise}

\begin{exercise}
Do similarly for \autoref{exa:sigma-model-s1}.
\end{exercise}

We would like to make sense of the limit of the operator $A$, and its determinant, as $N \to \infty$.
One interpretation is as follows.
Let $V$ denote the space of 
loops $S^1 \to \R$ for which the total energy is finite.
This is an infinite-dimensional vector space (even a Hilbert space)
carrying the quadratic function
\begin{equation}
  S(\phi) = \half \int_{0}^T \de t \left( \norm{\dot \phi(t)}^2 + \omega^2 \phi(t)^2 \right).
\end{equation}
We expand
\begin{equation}
  \phi(t) = c \sqrt{T} + \sum_{n=1}^\infty \frac{\sqrt{2T}}{2 \pi n} \left(a_n \sin\left(\frac{2 \pi n}{T} t\right) + b_n \cos\left(\frac{2 \pi n}{T} t\right)\right). 
\end{equation}
Now, we choose the norm
\begin{equation} \label{eq:qm-norm}
  \norm{\phi}^2 = c^2 + \sum_n a_n^2 + b_n^2.
\end{equation}
Then we have
\begin{equation}
  S(\phi) = \half \left( \omega^2 T^2 c^2 + \sum_{n=1}^\infty \left(1 +  \frac{\omega^2 T^2}{4 \pi^2 n^2} \right) (a_n^2 + b_n^2) \right)
\end{equation}
Thus the eigenvalues of the operator $A$ corresponding to the quadratic
function $M = 2S$ are
\begin{equation}
  \omega^2 T^2, \qquad 1 + \frac{\omega^2 T^2}{4 \pi^2 n^2} \text{ (with multiplicity $2$) for all $n > 0$},
\end{equation}
which gives\footnote{We use the product formula
\begin{equation} \label{eq:sinh-formula}
  \sinh x = x \prod_{n=1}^\infty \left( 1 + \frac{x^2}{\pi^2 n^2} \right).
\end{equation}
}
\begin{equation}
  \sqrt{\det A} = (\omega T) \prod_{n=1}^\infty \left( 1 + \frac{\omega^2 T^2}{4 \pi^2 n^2} \right) = 2 \sinh (\omega T/2)  
\end{equation}
as desired.

What is puzzling about this is that it is not clear \ti{a priori} why the norm
\eqref{eq:qm-norm} is the right one to choose. One encouraging sign: the paper 
\cite{Ludewig2016} proves a similar statement in the case of an 
arbitrary Riemannian $Y$ with $V = 0$ (under some nondegeneracy conditions);
there it says the correct norm to take is a Sobolev $H^1$ norm, which is indeed
what we did above.
\fixme{we can verify more directly that the two correspond by making the 
appropriate rescalings in the discretization}

\begin{exercise} Carry out a similar analysis for \autoref{exa:sigma-model-s1},
relating the partition function $Z_{S^1(T)}$ we found there to determinants of operators 
on infinite-dimensional spaces. (In this case the field space $\cC_{S^1(T)}$ is actually
disconnected, because maps $S^1 \to S^1$ have a discrete invariant, the winding number.
Nevertheless each connected component is an infinite-dimensional vector space,
which we can analyze as above. In each component you meet the \ti{same} infinite-dimensional
determinant, multiplied by a prefactor depending on the component; so even without
computing this determinant, you can get the answer up to a single undetermined constant.
To see that it agrees with \eqref{eq:zs1-theta-function} you will need
to use the Poisson summation formula, aka the modular property of the theta function.)
\end{exercise}


\subsection{Perturbation theory in quantum mechanics}

Now how about path integrals for actions which are not quadratic but are close
to quadratic, in the same sense as \autoref{sec:feynman-diagrams-0d} above? 

For example, let's consider
the \ti{quartic oscillator}, which is the case $Y = \R$, 
\begin{equation}
  V(x) = \half \omega^2 x^2 + \frac{\lambda}{4!} x^4.
\end{equation}
We will treat the case $X = S^1(T)$.
Following the same pattern as \autoref{sec:feynman-diagrams-0d}, 
we can write down 
Feynman rules for the asymptotic expansion of the 
partition function, or correlation functions, in 
powers of $\lambda$. In fact 
our action is an infinite-dimensional version
of \eqref{eq:bosonic-quartic-action},
and so we use exactly the same rules we used in that case, just adapted
to the case where $\cC$ is an infinite-dimensional vector space.

Thus to compute $Z/Z_0$ we sum over ``bubble'' diagrams with only
$4$-valent vertices.
The role of $M^{-1} \in V^{\otimes 2}$ is now played by
the \ti{Green's function} for the quadratic part of the action.
Namely, let
\begin{equation}
 M(x,x) = \int_0^T \de t \left(\half \norm{\dot x(t)}^2 + \half \omega^2 x(t)^2\right)  
\end{equation}
Then the function
\begin{equation}
  G(t,t') = G(t-t') = \frac{1}{2 \omega} \sum_{n \in \Z} \e^{-\omega \abs{(t-t') + n T}}
\end{equation}
inverts $M$ in the sense that it obeys\footnote{When $V$ is a finite-dimensional vector space, 
for a map $M: V \otimes V \to \R$, $M^{-1}: V^* \otimes V^* \to \R$ can be characterized by the equation $M(M^{-1}(\eta, \cdot), v) = \eta(v).$
\eqref{eq:M-G-inverse} is an infinite-dimensional version of that equation, 
where we take $V$ to be the space of functions on $S^1$.}
\begin{equation} \label{eq:M-G-inverse}
  M\left(G(t,t'), f(t)\right) = f(t').
\end{equation}
Then, in parallel with the story of the $0$-dimensional theory
with quartic potential in \autoref{sec:feynman-diagrams-0d},
the Feynman diagrams with $\le 2$ vertices give
\begin{align} \label{eq:Z-1d-pert-first}
  \log \frac{Z}{Z_0} &\sim - \frac{\lambda}{8} \int \de t \, G(0)^2 + \frac{\lambda^2}{48} \int \de t \, \de t' \, G(t-t')^4 + \frac{\lambda^2}{16} \int \de t \, \de t' \, G(t-t')^2 G(0)^2 + O(\lambda^3) \\
  &= - \frac{\lambda T}{32 \omega^2} \left(\coth\left(\frac{\omega T}{2}\right)\right)^2 + O(\lambda^2). \label{eq:Z-1d-pert}
\end{align}
Here is one concrete consequence of this formula.
In the limit of large $T$, $\omega T \gg 1$, 
we have $\log Z \sim -T E$
where $E$ is the ground state energy, i.e. the smallest eigenvalue 
of $H$. Then
\eqref{eq:Z-1d-pert} gives the first-order correction
to $E$ as 
\begin{equation} \label{eq:energy-correction}
  E - E_0 \sim \frac{\lambda}{32 \omega^2} + O(\lambda^2).
\end{equation}
More generally, \eqref{eq:Z-1d-pert} contains the 
first-order perturbations
of all the energy eigenvalues, not only the lowest one.

\begin{exercise} Verify that \eqref{eq:energy-correction} 
agrees with the usual
result of first-order perturbation theory, which says that
if we perturb the Hamiltonian by $H \to H + \delta H$, the 
resulting perturbation of the energy is
$\delta E = \IP{\psi_0, (\delta H) \psi_0}$, where $\psi_0$ is the
lowest eigenstate of the unperturbed Hamiltonian $H$,
normalized by $\IP{\psi_0, \psi_0} = 1$.
\end{exercise}

\begin{exercise} Evaluate explicitly the $O(\lambda^2)$
terms in \eqref{eq:Z-1d-pert-first}. Use them to compute
the $O(\lambda^2)$ correction to the ground state
energy.
\end{exercise}

\begin{exercise} Work out the prediction of first-order perturbation
theory for the ``sextic oscillator'' with potential
\begin{equation}
	V(x) = \half \omega^2 x^2 + \frac{\lambda}{6!} x^6.
\end{equation}
\end{exercise}


\begin{exercise} Extract from \eqref{eq:Z-1d-pert} a prediction
for the first-order perturbation of the \ti{second}-lowest
energy eigenvalue of the quartic oscillator.
\end{exercise}


\fixme{perturbation theory for heat kernel?}


% \subsection{Fermionic path integrals}

% Suppose $E$ is an oriented rank $2n$ vector bundle over $S^1$, 
% with a metric $g$ and compatible connection $\nabla$.
% Then we can try to define a purely fermionic quantum field theory
% with $\cC = \Pi \Gamma(E)$ and
% \begin{equation}
%   S(\psi) = \int \de t \, \half g(\psi, \nabla_t \psi).
% \end{equation}

\subsection{Quantum mechanics coupled to a vector bundle} \label{sec:1d-qft-with-bundle}

Suppose $Y$ is a Riemannian manifold, carrying a metric vector bundle $E$
with connection $\nabla$, 
and a Laplace-type operator $\Delta: C^\infty(Y,E) \to C^\infty(Y,E)$,
\begin{equation}
  \Delta = \nabla^* \nabla + V.
\end{equation}
Then we can define a heat equation coupled to $E$,
just like \eqref{eq:heat-equation} except that we use
the operator $H = -\half \Delta$
on $L^2(Y, E)$.
The heat kernel $k_t(x,y)$ in this case is a section of
$E \boxtimes E^*$ over $Y \times Y$: thus integrating it
against a section of $E$ gives another section of $E$.

Much like~\eqref{eq:heat-kernel},
this heat kernel arises from a $1$-dimensional quantum field theory,
with one new coupling added giving the \ti{parallel transport} in $E$.
Namely we write path integrals in the form
\begin{equation}
 Z_X =  \int \de \phi \, \Hol_{\phi} \e^{-S(\phi)}
\end{equation}
where 
\begin{itemize}
\item $S(\phi)$ is defined just as in~\eqref{eq:1d-sigma-model-action-arc-length}.
\item
In case $X = S^1$, $\Hol_\phi$ means the \ti{trace} of the holonomy
of $\phi^* E$. 
\item In case $X = [0,1]_{y_0}^{y_1}$, $\Hol_\phi$ means the
holonomy itself, so that $Z_X$ is not a number but a map
$E_{y_0} \to E_{y_1}$.
\end{itemize}
Then we have:
\begin{prop}[Partition function of $1$-d QFT coupled to a vector bundle on the target] \label{prop:trace-coupled}
$Z_{S^1(T)} = \Tr_{L^2(E)} \e^{-T H}$.
\end{prop}


\subsection{Supersymmetric quantum mechanics}

We've seen that given a Riemannian manifold $Y$ there is a corresponding
$1$-dimensional QFT of maps $X \to Y$, formally involving integrals
over the path space
\begin{equation}
  \cC_X = \Map(X,Y),
\end{equation}
which has to do with the heat flow on $Y$.
In particular, its partition function on $X = S^1(T)$ is
\begin{equation}
  Z_{S^1(T)} = \Tr \, \e^{-H T}
\end{equation}
which contains the whole spectrum of $H = -\Delta$. This is very far
from being deformation invariant: morally it depends on every little
detail of the metric on $Y$.

To get something more topological we repeat the strategy we used
in \autoref{sec:0d-susy-example} and \autoref{sec:0d-sigma-model-localization}: add fermions!
Concretely, we will make a new QFT whose configuration space is formally
\begin{equation}
  \cC_X = \Pi T \Map(X,Y).
\end{equation}

One immediate observation is that if $\Map(X,Y)$ is oriented
(whatever this means!)
then we expect to have (at least formally) a \ti{canonical}
measure of integration $\de \vec{x} \de \vec{\psi}$, 
like what we had in \autoref{sec:0d-sigma-model-localization} 
where we took $\cC = \Pi T M$.
Thus we may expect that the constructions will be more canonical than
they were in the non-supersymmetric case, where our choice of
measure was somewhat arbitrary.

A point of $\cC_X = \Pi T \Map(X,Y)$ concretely means a pair of:
\begin{itemize}
 \item $\phi: X \to Y$,
 \item $\psi \in \Pi \Gamma(\phi^* TY)$.
\end{itemize}
% We could also think of $(\phi, \psi)$ together as defining a map
% $X \times \R^{0 \vert 1} \to Y$.

Now we write the action $S \in C^\infty(\cC_X)$:
\begin{equation} \label{eq:1d-susy-action}
  S(\varphi,\psi) = \int \de t \, \half(g(\dot \phi, \dot \phi) + g(\psi, \nabla_t \psi))
\end{equation}
where $\nabla_t$ is the pullback of the Levi-Civita connection from $Y$, acting
on sections of $TY$.
% \footnote{Note that this action has a term which is of \ti{first order}
% in derivatives. We might have imagined writing a similar term for bosons, 
% like $\int \de t \phi \dot\phi$. Why didn't we consider this? The reason is that
% integration by parts shows
%  $\int \de t \phi \dot\phi = - \int \de t \dot\phi \phi = - \int \de t \phi \dot\phi$
% and so this term vanishes. But when $\psi$ is a fermion, there is a crucial extra sign:
% we have
%  $\int \de t \psi \dot\psi = - \int \de t \dot\psi \psi = \int \de t \psi \dot\psi$
% which doesn't imply any vanishing.}
The fermion bilinear term $g(\psi, \nabla_t \psi)$ should as
usual be understood in a purely algebraic way: it defines an element
of $\wedge^2(\Gamma(\phi^* TY))$, which by definition gives a function
on $\Pi \Gamma(\phi^* TY)$ as needed.

\begin{exercise} Check that $\int \de t\, g(\cdot, \nabla_t \cdot)$
is indeed a \ti{skew-symmetric} pairing on $\Gamma(\phi^* TY)$. 
(Thus it would vanish
if we inserted an ordinary even field in both slots; 
this is why we don't
write such first-order terms in the ordinary bosonic 1-d QFT.)
\end{exercise}

As before, this action is invariant under the symmetry of time translations,
which we represent by its infinitesimal action $H \in \Vect^0(\cC_X)$,\footnote{It's possible to 
get confused about the invariant meaning of this formula, so let's spell it out:
it means that relative to any local coordinate system on $Y$, we have
$\delta \phi^I(t) = \eps \dot\phi^I(t)$ and $\delta \psi^I(t) = \eps \dot \psi^I(t)$.}
\begin{equation}
  \delta \phi = \eps \dot\phi, \qquad \delta \psi = \eps \dot\psi.
\end{equation}
But now it is also invariant under an odd symmetry $Q \in \Vect^1(\cC_X)$,
whose infinitesimal action is
\begin{equation}
  \delta \phi = \eps \psi, \qquad \delta \psi = - \eps \dot\phi.
\end{equation}
Let us verify this invariance in the special case $Y = \R^n$:
then we have
\begin{equation}
  S = \int \de t \half (\dot\phi^I \dot\phi^I + \psi^I \dot \psi^I)
\end{equation}
and thus
\begin{equation}
  \delta S = \int \de t \, \half (2 \eps \dot\psi^I \dot\phi^I - \eps \dot\phi^I \dot\psi^I - \psi^I \eps \ddot \phi^I)
\end{equation}
which indeed vanishes (using integration by parts in the last term,
and keeping track of the fact that $\eps$ and $\psi^I$ anticommute
to get the signs right.)

For a more general Riemannian manifold $Y$ the verification is
somewhat trickier, but the outcome is the same:
\begin{exercise}
Verify that $S$ is invariant under $Q$.
\end{exercise}

The two symmetries $Q$ and $H$ are not unrelated:
\begin{exercise}
Verify that $Q$ and $H$ obey the \ti{$1$-dimensional supersymmetry algebra}
\begin{equation}
  \half [Q,Q] = -H.
\end{equation}
\end{exercise}
Thus, in this theory $Q$ provides a ``square root of time translations.''

Moreover, variations of the metric $g$ on $Y$ are $Q$-exact:
\begin{exercise}
Show that under a variation $g \to g + \delta g$,
the action $S$ changes by $S \to S + Q \Psi$, where 
$\Psi = \half (\delta g)_{IJ} \dot \phi^I \psi^J$. \fixme{check}
\end{exercise}
Thus, if we were dealing with finite-dimensional integrals, 
\autoref{prop:Z-deformation-invariance} would show 
that the partition function in this theory
is independent of the metric on $Y$. In our infinite-dimensional
setting we will see that this metric-independence still holds.
The infinite-dimensional setting does bring a surprising twist:
despite being metric-independent, 
$Z_{S^1(T)}$ is not quite a topological invariant of $Y$; to define 
it properly we need some additional discrete structure,
namely a \ti{spin structure} on $Y$, on which $Z_{S^1(T)}$
actually depends.


\subsection{Integrating out fermions} \label{sec:susy-discretization}

\fixme{warning, doing this by discretization seems to be subtle, because
of fermion doubling problem! need to give some explicit way of understanding
the result here}

% Now, as we did in \autoref{sec:discretization}, 
% we can try to define the partition 
% function of this theory of this theory by discretization of the
% domain $X$, replacing $\cC_X$ by finite-dimensional supermanifolds
% $\cC_{X;N}$ to compute discretized partition functions $Z_{X;N}$.

% We take
% $\cC_{X;N}$ to be an odd vector bundle over the space of 
% piecewise-geodesic paths from \autoref{sec:discretization}, with fiber
% $\prod_i T_{y_i} Y$.
% Then we define $S \in C^\infty(\cC_{X;N})$ to be \fixme{...}.
% In this restriction $\nabla_t \psi$ becomes a sum of delta-functions
% supported at the discretization points $t_i$, but the skew-symmetric
% pairing $g(\psi_1, \nabla_t \psi_2)$ is still well defined.

% The presence of the fermions leads to various new phenomena.
% For example:
% \begin{exercise} Write out the discretized action $S_N$, 
% and show that $Z_{S^1(T);N} = 0$ 
% for any $N$ when $\dim Y$ is odd. (This is easy when $N$ is odd, slightly more interesting when $N$ is even.)
% \end{exercise}

When $Y$ is even-dimensional,
say $\dim Y = 2n$, the path integral of our
supersymmetric theory
need not be zero. Let us examine it more closely,
supposing that $X = S^1(T)$.

For fixed $\phi: S^1(T) \to Y$, the integral over the fermions is formally
\begin{equation}
  W(\phi) = \int_{\Pi \Gamma(\phi^* TY)} \de \vec\psi \, \e^{- \half \int_{0}^T g(\psi, \nabla_t \psi)} 
\end{equation}
We claim that
here an important topological subtlety appears: in order to regulate
the theory, i.e. to actually define this integral, 
we will need to fix an orthonormal
trivialization $F_\phi$ of $\phi^* TY$,
and the path integral $W(\phi)$ will actually depend on this choice
(so it is more accurately written $W(\phi, F_\phi)$.)
For each fixed $\phi$, 
the space of possible $F_\phi$ is a torsor
for the loop group $\cL\SO(2n)$. In particular, it
divides up into connected components, which are a torsor for
$\pi_1(\SO(2n))$; this group is $\Z$ for $n=1$ and $\Z / 2\Z$
for $n>1$. Let $\tau$ denote the generator.
Naively $W(\phi, F_\phi)$ would be independent of $F_\phi$,
but instead we have the following:

\begin{prop}
$W(\phi, F_\phi)$ is invariant under small deformations of $F_\phi$, but
$W(\phi, F_\phi) = - W(\phi, \tau F_\phi)$.
\end{prop}

For general $Y$
this sign ambiguity would prevent us from defining the path
integral, at least in the ordinary sense. To get rid of the problem
we assume $Y$ is spinnable, and then 
fix a spin structure on $Y$. This picks out a restricted class
of orthonormal trivializations $F_\phi$, namely those which lift
to trivializations of the $\Spin(2n)$-bundle covering $\phi^* TY$.
If we use only these trivializations in defining our discretized
fermion path integral, then the troubling 
sign ambiguity does not occur.

Now let us see how to study $W(\phi,F_\phi)$ explicitly,
roughly following a calculation given in
\cite{MR87i:81237,MR816738}.

Recall the discussion in \autoref{sec:infinite-dets}: given a bilinear 
pairing
and a metric on a vector space $V$, we can extract a number, which
in finite dimensions is naturally the result of a Gaussian integral,
and which we use to \ti{define} Gaussian integrals in infinite
dimensions.

\begin{prop} \label{prop:regularized-det-fermion}
Relative to the Sobolev $H^1$ norm in $\Gamma(\phi^* TY)$,
the determinant of the skew bilinear pairing $\IP{\psi, \nabla_t \psi}$
is (up to an overall constant)
$\det(1 - \Hol_\phi)$, where $\Hol_\phi$ is the
holonomy of $\phi^* TY$.
\end{prop}

\begin{pf} The eigenvalues of the operator $\nabla_t$ are
$\frac{2 \pi \I}{T}(k \pm \frac{\alpha_i}{2\pi})$, $k \in \Z$, where $\e^{\pm \I \alpha_i}$ are the eigenvalues
of $\Hol_\phi$. 
(To see this just diagonalize $\nabla_t$ acting on complex sections:
then its diagonal entries look like $\partial_t \pm \I \alpha_i / T$, with eigenfunctions
$\e^{2 \pi \I k t / T}$.)
Thus formally the determinant of this operator would be the infinite product
\begin{equation}
  \prod_{k \in \Z} \prod_{i=1}^n - \frac{4 \pi^2}{T^2} \left( k + \frac{\alpha_i}{2\pi} \right)\left( k - \frac{\alpha_i}{2\pi} \right).
\end{equation}
This infinite product has a double zero at $\alpha_i = 2 \pi k$, for any $k$.

Now, we take the 
Sobolev $H^1$ norm in $\Gamma(\phi^* TY)$; then the eigenfunctions are orthogonal
but not orthonormal: for large $k$,
the $k$-th eigenfunction has squared-norm $\sim k^2 T^2$. 
Thus the determinant relative to this norm will be a product of factors which
for large $k$ go like
\begin{equation}
  \prod_{k} \prod_{i=1}^n \left( 1 + \frac{\alpha_i}{2\pi k} \right)\left( 1 - \frac{\alpha_i}{2\pi k} \right).
\end{equation}
In particular it is now convergent, and must converge to an honest function of 
the $\alpha_i$, with zeroes at $\alpha_i = 2 \pi k$, which moreover is periodic 
as $\alpha_i \to \alpha_i + 2 \pi$. This determines it
up to a constant as
$\prod_{i=1}^n (2 \sin \frac{\alpha_i}{2})^2$. The next lemma then finishes the proof.
\end{pf}

\begin{lem}
If $A \in \SO(2n)$ has eigenvalues $\e^{\pm \I \alpha_i}$ then
\begin{equation} \label{eq:detminus}
  \det(1 - A) = \prod_{i=1}^n \left( 2 \sin \frac{\alpha_i}{2} \right)^2.
\end{equation}
\end{lem}

\fixme{comment on zeta reg?}

What we are really after is the Pfaffian of the pairing $\IP{\psi, \nabla_t \psi}$, 
not the determinant; so we need to take a square root of $\det(1 - \Hol_\phi)$.
Since \eqref{eq:detminus} represents this quantity as a square, it 
gives a natural-looking choice of square root, namely
$\prod (2 \sin \frac{\alpha_i}{2})$. We claim that this is
indeed the correct square root to take. Note that this
requires us to lift $\Hol_\phi$ to $\Spin(2n)$, since it 
changes by a sign under $\alpha_i \to \alpha_i + 2 \pi$.\footnote{We might
also have decided to just always take the \ti{positive} square root.
Then there would be no sign ambiguity, but some lack of smoothness as a
function of $\phi$; it's not clear that this is fatal, but it does seem
a little off-putting, at least.}

For later purposes it will be convenient to have another interpretation
of this answer which brings in the spin representation:
\begin{prop} \label{prop:supertrace-spin-sqrt}
If $A \in \Spin(2n)$ then 
\begin{equation} \label{eq:str-sqrt}
\det\nolimits_V (1 - A) = (-1)^n (\STr_S A)^2,
\end{equation}
where $V$ denotes
the vector representation.
\end{prop}
Here $\STr$ means the \ti{supertrace}, i.e.
\begin{equation}
  \STr_S A = \Tr_{S^0} A - \Tr_{S^1} A.
\end{equation}

\begin{pf}
When $n = 1$, from our description of $S$ in \autoref{app:spinors}, we
see immediately that $\STr_S A$ is simply $(\e^{\I \alpha / 2} - \e^{-\I \alpha / 2}) = 2 \I \sin \frac{\alpha}{2}$.
More generally we can block-diagonalize to reduce to the 
case where $A \in \SO(2)^n \subset \SO(2n)$
and use the fact that, as a representation of $\SO(2)^n \subset \SO(2n)$,
$S$ is the tensor product of $2$-dimensional representations,
and the grading on $S$ is the induced grading.
\end{pf}

Motivated by \autoref{prop:regularized-det-fermion} and \autoref{prop:supertrace-spin-sqrt},
we propose that the integral over the fermions should be interpreted as
\fixme{watch the $(-1)^n$}
\begin{equation}
  W(\phi, F_\phi) = \STr_S \Hol_\phi.
\end{equation}

% \subsection{A toy model}

% To get an idea of what's going on, though, we can look at a toy model. Let's fix a loop $\phi: S^1(T) \to Y$, with $Y$ of dimension $2$.
% Choosing a trivialization of $\phi^*TY$ we can see it as
% the trivial bundle with fiber $\R^2$, equipped with its standard metric,
% and a connection
% \begin{equation}
%   \nabla_t = \partial_t + A_t
% \end{equation}
% where $A_t = \alpha R$,
% where $R \in \fso(2)$ is the standard rotation generator.
% The holonomy of $\phi^*TY$ around $S^1(T)$ is then a rotation
% by $\alpha T$.
% The corresponding discretized action with $N$ lattice sites is
% \begin{equation}
%   S(\psi) = \half \sum_{i=1}^N \left( \psi^1_i \psi^1_{i+1} + \psi^2_i \psi^2_{i+1} + \frac{\alpha T}{N} (\psi^1_i \psi^2_{i+1} - \psi^2_i \psi^1_{i+1}) \right). 
% \end{equation}

% Now I claim that \fixme{check!}
% \begin{equation}
%   W = \int \prod_{i=1}^N \de \psi_i^1 \de \psi_i^2 \, \e^{-S(\psi)} = \re \left[ 2^{-N} \left( 1 + \frac{\I \alpha T}{2N} \right)^{N} \right]
% \end{equation}
% so that
% \begin{equation}
%   \lim_{N \to \infty} 2^N W = \re \e^{\I \alpha T / 2} = \half \sin \left(\half \alpha T\right).
% \end{equation}

% However, we could also choose a different trivialization of $\phi^* TY$,
% differing from the standard one
% by a map $g: S^1(T) \to \SO(2)$. Such a change does not affect the fermion measure
% but changes $A \to A + g^{-1} \de g \in \Omega^1(S^1(T), \fso(2))$. The simplest choice would be
% to take $g(t) = \exp(2 \pi k \frac{t}{T} R)$ with
% $k \in \Z$ (winding number); then 
% $\alpha T$ is shifted by $2 \pi k$.
% If $k$ is odd then this reverses the sign of $W$.

% To convince ourselves that this is not just some mistake in
% how we are doing the discretization, let us consider the 
% infinite-dimensional perspective. As usual we imagine performing
% the path integral by first integrating over fermions, then over bosons.
% Thus we fix a map $\phi: S^1 \to Y$ and consider the remaining 
% fermionic integral of $\psi \in \Pi \Gamma(\phi^* TM)$. 
% Formally it should be some kind of Pfaffian of the
% skew-symmetric form $g(\psi, \nabla_t \psi)$ on $\Gamma(\phi^* TM)$. 
% Now one formally computes \cite{MR816738} 
% that the determinant of this form is (up to a $\phi$-independent constant) 
% $\det(1 - H(\phi))$ where $H(\phi)$ is the holonomy of the 
% Levi-Civita connection around the loop $\phi$. The question thus
% arises, as $\phi$ varies, is it possible to consistently define
% a square root of $\det(1 - H(\phi))$? This is possible just if
% all the holonomies 
% $H(\phi)$ can be consistently lifted from $\SO(2n)$ to $\Spin(2n)$,
% i.e. just if $Y$ admits a spin structure. \fixme{...}

% In any case, I believe that
% the discretized path integrals indeed converge as $N \to \infty$,
% but I do not know a reference for this statement.

% \fixme{...}


% \subsection{Supersymmetric heat kernel}

% Suppose that $Y$ is even-dimensional, fix a spin structure 
% over $Y$, and 
% let $SY = S^0 Y \oplus S^1 Y$ be the spin bundle over $Y$ as in \autoref{app:spinors}.
% Then we define a spinorial heat equation,
% just like \eqref{eq:heat-equation} except that we use
% the operator $H = -\half \Delta$
% on $L^2(Y, SY)$.
% Here, in contrast with \fixme{...}, we do \ti{not} perturb
% by a potential function $V$, nor do we add a multiple of the
% scalar curvature. \fixme{watch out for tricky scalar curvature terms
% added to path integral though!} 
% The $H$ we choose is singled out by its relation to $\dirac$.



\subsection{Supersymmetric path integral and heat kernel}

What we have just seen is that integrating out the fermions in our supersymmetric
quantum mechanics has the effect of creating an insertion of $\STr_S \Hol_\phi$.
This means that the effective theory we get is an ordinary bosonic quantum mechanics,
but one coupled to the vector bundle $S = S^0 \oplus S^1$, with an unconventional
sign rule; said differently, the partition function of the supersymmetric theory
is a \ti{difference}
\begin{equation}
  Z_{S^1(T)} = Z_{S^1(T);S^0} - Z_{S^1(T);S^1}
\end{equation}
where $Z_{S^1(T);E}$ means the partition function of the bosonic theory coupled to
the vector bundle $E$,
in the sense of \autoref{sec:1d-qft-with-bundle}.
Using \autoref{prop:trace-coupled}, we then have
\begin{prop}[Partition function of supersymmetric quantum mechanics
is the supertrace of spinor heat flow] 
\begin{equation}
Z_{S^1(T)} = \STr_{\cH} \e^{-TH},
\end{equation}
where $H = -\half \Delta$ acting on $\cH = L^2(Y, SY)$. \fixme{should be careful
about which Laplacian we use here: scalar curvature terms could intervene, but somehow
they don't}
\end{prop}

This function is remarkably simple to analyze:
\begin{prop}[Supertrace of spinor heat flow is the index]
$\STr \e^{-T H} = \ind \dirac^0$.
\end{prop}
\begin{pf}
This just uses the fact that
$\cH = L^2(Y,SY)$ is a unitary graded representation of
the $1|1$-dimensional superalgebra spanned by $\dirac$ and $\Delta$, with $\dirac^\dagger = \dirac$
and $\Delta^\dagger = \Delta$.

First we show that $\ker \Delta = \ker \dirac$.
Indeed, obviously $\ker \dirac \subset \ker \Delta$. Conversely, 
if $\psi \in \ker \Delta$ then we have
\begin{equation}
  \norm{\dirac \psi}^2 = \IP{\dirac \psi, \dirac \psi} = \IP{\psi, \dirac^2 \psi} = \IP{\psi, -\Delta \psi} = 0
\end{equation}
and thus $\psi \in \ker \dirac$.

Since $[\dirac, \Delta] = 0$, $\Delta$ is central, and thus
it acts as a multiple of the identity in each graded irreducible
representation. So, consider a graded irreducible representation
$V$ in which $-\Delta = E$.
Then it is straightforward to see there are only three
possibilities:
\begin{itemize}
  \item $\dim V = 1 \vert 1$, $E > 0$,
  \item $\dim V = 1 \vert 0$, $E = 0$,
  \item $\dim V = 0 \vert 1$, $E = 0$.
\end{itemize}
Each representation of dimension $1 \vert 1$ contributes
$\e^{-TE} - \e^{-TE} = 0$ to $\STr_\cH \e^{-TH}$.
The representations of dimension $1 \vert 0$ contribute
in total $\dim \ker \dirac^0$, and those of dimension $0 \vert 1$
give $- \dim \ker \dirac^1$.
\end{pf}

The upshot of this section is that supersymmetric quantum mechanics
computes the index of the Dirac operator:
\begin{equation}
  Z_{S^1(T)} = \ind \dirac^0.
\end{equation}


\subsection{Quantization of local operators}

The next proposition makes it a bit clearer why spinors are
involved in the story. Fix a section $\gamma$ of $TY$. Then
for any $t \in X$ there is a corresponding odd 
function $\cO_\gamma(t) \in C^\infty(\cC)$
which gives a local observable. Just as we ``quantized''
the local observables in \fixme{...}, relating them to
operators on $L^2(Y)$, now we can ask what is the
quantization of these odd functions.
The answer is that they map to operators 
$\hat\gamma$, which just act by the 
Clifford action of $\gamma$ on $L^2(Y, S)$:

\begin{prop} 
$\IP{\cO_{\gamma_1}(t_1) \cO_{\gamma_2}(t_2)}_{S^1(T)} = \STr (\e^{-t_1 H} \hat\gamma_1 \e^{-t_2 H} \hat\gamma_2 \e^{-(T-t_1-t_2)H})$,
and similarly for products of more $\cO_\gamma(t)$.
\end{prop}

\fixme{give some sketch proof? discretization?}

\fixme{supercurrent which maps to the Dirac operator}


\subsection{Localization and the index theorem}

Now we want to compute the partition function $Z_{S^1(T)}$ by localization,
similar to what we did in \autoref{sec:0d-sigma-model-localization}.
Indeed, the path integral we want to do is an infinite-dimensional
version of the one given there, where:
\begin{itemize} 
\item $M$ is the loop space $M = \cL Y$,
\item the $U(1)$ action on $M$ is by rotation of the loops,
\item $H$ is the bosonic part of the action \eqref{eq:1d-susy-action}, $\half \int g(\dot\phi,\dot\phi)$,
\item $\omega$ is the fermionic part of \eqref{eq:1d-susy-action}, $\half \int g(\psi, \nabla_t \psi)$.
\end{itemize}

\begin{exercise} Verify that $H$ is indeed a generating function for the $U(1)$ action, i.e.
that $\iota_Y \omega = \de H$. \fixme{watch out for factor of 2 here}
\end{exercise}

\begin{exercise} Verify that the odd symmetry $Q$ corresponds to $\de + \iota_Y$.
\end{exercise}
\fixme{notation problem: used $Y$ for the vector field earlier, now using it for target}

We are as usual free to choose any $U(1)$-invariant metric on $M$; we choose the
one induced from the metric on $Y$.

Now, formally applying \autoref{thm:abbv} would lead to
\begin{equation} \label{eq:zs1-abbv-formal}
  Z_{S^1(T)} = \int_F \frac{\e^{H + \omega}}{\Euler(NF)}
\end{equation}
where $F \subset \cL Y$ is the fixed locus of the $U(1)$ action.
But this is just the space of \ti{constant} loops,
which make up a copy of $Y$ inside $\cL Y$, i.e. $F \simeq Y$.
Restricted to $F$, we have $H = \omega = 0$. It just 
remains to evaluate the form $\Euler(NF)$. 

First, what is $NF$?
A tangent vector to the constant loop $\phi(t) = y$
is just a map $S^1 \to T_y Y$. 
Fourier expanding, the space of these maps is
$T_y Y \oplus \bigoplus_{k > 0} (T_y Y \otimes \R^2)$; using our metric
on $\cL Y$ to project off the tangent bundle $TF$, 
we get $NF = \bigoplus_{k > 0} (T_y Y \otimes \R^2)$.
The $U(1)$ action on $NF$ acts with weight $k$ 
on the $k$-th summand $TY \oplus TY$.
The induced metric on $NF$ is orthogonal and, in each summand,
restricts to that of $TY$; in particular its curvature in each summand
is $R \oplus R$, with $R \in \fso(TY)$ the Riemann curvature $2$-form,
which itself we locally block-diagonalize with weight $2$-forms $R_i$.
From this we compute the equivariant Euler form, formally:
\begin{equation}
  \Euler(NF) = \prod_{i=1}^n \prod_{k > 0} (k + R_i) (k - R_i).
\end{equation}
This product has zeroes at all $R_i = \pm k$. It formally 
regulates to (up to an overall constant):
\begin{equation}
  \Euler(NF) = \prod_{i=1}^n \frac{\sin \pi R_i}{\pi R_i}
\end{equation}
This almost matches $\hat A(Y)^{-1}$ defined in \autoref{def:ahat}, 
but not quite: its $k$-form part 
differs by a rescaling by $(4 \pi^2)^k$.
\fixme{but up to a constant we're OK; can we fix the constant?}

Thus the formal \eqref{eq:zs1-abbv-formal} becomes
\begin{equation}
  Z_{S^1(T)} = \int_Y \hat A(Y),
\end{equation}
and combining this with \fixme{...}
we obtain the index theorem \autoref{thm:atiyah-singer}.


\fixme{twisted case: couple the SUSY QM to another bundle $E$,
then get $\omega = F$}

\fixme{this gives Gauss-Bonnet if $E = S$, or signature theorem}

\fixme{refs: Witten, Alvarez-Gaume, Friedan-Windey for twisted case}

\fixme{next try going to 2-d sigma model: loop space of loop space!}

\appendix

\section{Background}

Here I collect a little background material for convenience.

\subsection{Spinors} \label{app:spinors}

Good references for this are \cite{MR1031992,MR1367507}.

\begin{defn}[Free graded tensor algebra] Fix a real vector space $V$. The
\ti{free graded tensor algebra} $T(V)$ is
\begin{equation}
  T(V) = \bigoplus_{n=0}^\infty V^{\otimes n}
\end{equation}
equipped with the concatenation product
\begin{equation}
  (v_1 \otimes \cdots \otimes v_n) (w_1 \otimes \cdots \otimes w_m) = v_1 \otimes \cdots \otimes v_n \otimes w_1 \otimes \cdots \otimes w_m
\end{equation}
and the obvious $\Z$-grading.
\end{defn}

\begin{defn}[Clifford algebra] Fix a real vector space $V$ with a positive definite
quadratic form $\IP{\cdot,\cdot}$. The \ti{Clifford algebra} $\Cliff(V)$ is the quotient
of $T(V)$ by the two-sided ideal generated by the relation
\begin{equation} \label{eq:clifford-relation}
  v \otimes v = -\IP{v,v}, \qquad v \in V.
\end{equation}
\end{defn}
More informally we could say $\Cliff(V)$ is the free algebra on $V$
subject to the single relation \eqref{eq:clifford-relation}.
This relation violates the $\Z$-grading but preserves a residual $\Z/2\Z$.
Thus $\Cliff(V)$ is a $\Z/2\Z$-graded algebra:
\begin{equation}
  \Cliff(V) = \Cliff^0(V) \oplus \Cliff^1(V).
\end{equation}
By polarization \eqref{eq:clifford-relation} implies that for any $v, w \in V$ we have
\begin{equation}
  [v,w] = v w - w v = -2 \IP{v,w}.
\end{equation}

% In \eqref{eq:clifford-relation} we introduced a notation which we will use
% many times in the rest of the course: in graded algebras we have the
% graded commutator, defined on homogeneous elements by the formula
% \begin{equation}
%   [a, b] = ab - (-1)^{\deg a} (-1)^{\deg b} ba.
% \end{equation}

If we allow $\IP{\cdot,\cdot}$ to be the zero quadratic form then $\Cliff(V)$
becomes the exterior algebra $\wedge^*(V)$; more generally $\Cliff(V)$ is
a \ti{deformation} of $\wedge^*(V)$, or, it is a $\Z$-\ti{filtered} algebra 
whose associated $\Z$-graded algebra is $\wedge^*(V)$.

\begin{exercise} Show that $\dim_\R \Cliff(V) = 2^{\dim V}$.
\end{exercise}

\begin{defn}[Pin group] $\Pin(V)$ is the group of all elements
\begin{equation}
 v_1 \otimes v_2 \otimes \cdots \otimes v_n \in \Cliff(V)
\end{equation}
where all $v_i$ have $\IP{v_i,v_i} = 1$.
\end{defn}

\begin{exercise} Show that $\Pin(V)$ is indeed a group.
\end{exercise}

\begin{defn}[Spin group] $\Spin(V) = \Pin(V) \cap \Cliff^0(V)$.
\end{defn}

Now any $v \in V \subset \Pin(V)$ acts on $V \subset \Cliff(V)$
by conjugation:
\begin{exercise}
Show that this action is just the reflection in $v$.
\end{exercise}
More generally,
\begin{exercise} Show that $\Pin(V)$ acts on $V \subset \Cliff(V)$ 
by conjugation, and that this action gives a map $\Spin(V) \to \SO(V)$ which 
is a double cover.
\end{exercise}

As a convenient notation we let $\Cliff(n)$ mean the Clifford algebra on the
vector space $\R^n$ with its standard positive definite quadratic form.
$\Cliff(n)$ is generated by odd elements $e_i$, $i = 1, \dots, n$, with 
\begin{equation}
  \half [e_i, e_j] = -\delta_{ij}.
\end{equation}
Similarly we define $\Spin(n)$, $\Pin(n)$ etc.

When $n > 2$, $\Spin(n)$ is simply connected, and the 
double-covering map above identifies
$\Spin(n)$ as the universal covering of $\SO(n)$. When $n=2$, both $\Spin(2)$
and $\SO(2)$ are the circle group, and this map is just the double-covering
map $\theta \to 2 \theta$.

\begin{exercise} Show that:
\begin{itemize}
\item $\Cliff(1) \simeq \C$, $\Cliff^0(1) \simeq \R$, $\Spin(1) \simeq \Z / 2\Z$.
\item $\Cliff(2) \simeq \bbH$, $\Cliff^0(2) \simeq \C$, $\Spin(2) \simeq \U(1)$.
\item $\Cliff(3) \simeq \bbH \oplus \bbH$, $\Cliff^0(3) \simeq \bbH$, $\Spin(3) \simeq \SU(2)$.
\end{itemize}
\end{exercise}

\begin{defn}[Spin structures] Fix an oriented Riemannian manifold $X$, 
and let $P$ be its principal $\SO(n)$-bundle
of orthonormal frames. A \ti{spin structure on $X$} is a lift of $P$ to a $\Spin(n)$-bundle.
A \ti{spinnable manifold} is a Riemannian oriented manifold $X$ which
admits a spin structure.
A \ti{spin manifold} is a Riemannian oriented manifold $X$ 
equipped with a choice of spin structure.
\end{defn}

\begin{example}[Spin structures on the circle] When $X = S^1$ with a fixed metric and orientation, 
the bundle $P$ of oriented frames is just $X$ itself, so a spin structure is just a double cover
of $S^1$. Up to equivalence there are two double covers of $S^1$ (one connected and one disconnected),
thus two spin structures.
\end{example}

\begin{exercise}
For any Riemannian oriented $X$ which admits a spin structure, 
show that the spin structures on $X$
up to equivalence form a \ti{torsor} for the group $H^1(X, \Z/2\Z)$.
(Hint: $H^1(X, \Z/2\Z)$ classifies double covers of $X$ up to equivalence, and 
given a spin structure on $X$ and a double cover of $X$, one can \ti{twist} the
spin structure by the double cover, to get another spin structure.)
\end{exercise}

\begin{prop} Every manifold of dimension $1$, $2$ or $3$ is spinnable.
\end{prop}

\begin{prop} $\C\PP^2$ is not spinnable.
\end{prop}
\begin{pf}
Let $H$ denote a hyperplane in $\C\PP^2$, i.e.\ an embedded $\C\PP^1$. Then, $T\C\PP^2$, restricted to $H$, is
$\cO(1)\oplus\cO(2)$: $\cO(2)$ is $T\C\PP^1$ and $\cO(1)$ is the normal bundle.\footnote{A generic section of the
normal bundle intersects itself at one point, which is the reason why the normal bundle is $\cO(1)$; a similar
argument gets you $\cO(2)$ for the tangent bundle.}

$\C\PP^1$ has two charts, so we can explicitly write down transition functions for $\cO(1)\oplus\cO(2)$, which are
maps $S^1\to\U(1)\times\U(1)\subset\SO(4)$. Explicitly, let $R_\theta\in\SO(2)$ denote the matrix which acts
through rotation by $\theta$; then one of the transition functions is
\begin{equation}
\label{eq:CPn-transition-function}
\theta\mapsto\begin{pmatrix} R_\theta\\& R_{2\theta}\end{pmatrix}.
\end{equation}
A spin structure is a lift of this map to $\Spin(4)$, the universal cover of $\SO(4)$. But the loop defined
by~\eqref{eq:CPn-transition-function} is the nontrivial element of $\pi_1(\SO(4))$, and therefore this map cannot
lift to $\Spin(4)$.
\end{pf}

From now on we specialize to even dimensions, since this is what we will use in
the main text.

\begin{prop}[Spin representations] 
$\Cliff(2n)$ admits a $\Z/2\Z$-graded irreducible complex representation, $S = S^0 \oplus S^1$. 
Each of $S^0$ and $S^1$ has complex dimension $2^{n-1}$. $S$ carries a natural Hermitian 
metric, with respect to which $S^0$ and $S^1$ are orthogonal, $V$ 
acts by skew-adjoint endomorphisms, 
and $\Spin(V)$ acts unitarily.
Up to equivalence and reversal of grading, $S$ is the unique graded irreducible representation
of $\Cliff(2n)$.
\end{prop}

\begin{example}[Spin representation in dimension $2$] The spin representation 
$S$ of $\Cliff(2)$ is $2$-dimensional. The generators $e_1$ and $e_2$ act by
\begin{equation}
  e_1 \mapsto \begin{pmatrix} 0 & 1 \\ -1 & 0 \end{pmatrix}, \quad   e_2 \mapsto \begin{pmatrix} 0 & \I \\ \I & 0 \end{pmatrix}.
\end{equation}
Thus $e_1 e_2$ acts by $\begin{pmatrix} \I & 0 \\ 0 & -\I \end{pmatrix}$.
\end{example}

\begin{defn}[Complex spinor bundles] Fix a spin manifold $X$. The spin structure is 
a principal $\Spin(n)$-bundle $Q$ over $X$.
The associated bundle $SX = Q \times_{\Spin(n)} S$ is the \ti{complex spinor bundle} over $X$.
\end{defn}

$SX$ carries several nice structures: 
\begin{itemize}
\item Since $Q$ has a canonical connection induced by the
Levi-Civita connection, $SX$ also has a canonical connection.
\item
Because the action of $\R^n \subset \Cliff(n)$ on $S$,
$\rho: \R^n \to \End(S)$, is
equivariant for the action of $\Spin(n)$ on both sides,
it transfers to an action $\rho: TX \to \End(SX)$.
\end{itemize}


\subsection{Dirac operator}

\begin{defn}[Dirac operator] Fix a spin manifold $X$.
The \ti{Dirac operator} is the operator
$\dirac: C^\infty(SX) \to C^\infty(SX)$
given by
\begin{equation}
  \dirac = \sum_{i=1}^n \rho(e_i) \circ \nabla_{e_i}
\end{equation}
where $\{e_i\}$ form an orthonormal basis for $TX$.
\end{defn}

\begin{example}[Dirac operator on $\R^2$]
If $X = \R^2$, then $SX$ is the $2$-dimensional complex trivial
bundle, and
\begin{equation}
  \dirac = e_1 \partial_1 + e_2 \partial_2 = \begin{pmatrix} 0 & \partial_1 + \I \partial_2 \\ - \partial_1 + \I \partial_2 & 0 \end{pmatrix}.
\end{equation}
\end{example}

\begin{prop} $\dirac$ is a symmetric operator with respect to the Hermitian $L^2$
pairing on $SX$, i.e.
\begin{equation}
  \IP{\psi, \dirac \psi'} = \IP{\dirac \psi, \psi'}
\end{equation}
\end{prop}

\begin{defn}[Spinor Laplacian] The \ti{spinor Laplacian}
is the operator
$\Delta: C^\infty(SX) \to C^\infty(SX)$ given by
\begin{equation}
  \Delta = - \dirac^2.
\end{equation}
\end{defn}

Note that on $X = \R^2$, relative to the trivialization of $SX$ we gave above, 
$\Delta$ is just the identity matrix times the usual Laplacian on $C^\infty(\R^2)$.
What is interesting is that $\dirac$ provides a \ti{square root} of $-\Delta$. 
This is one of the nice features of spinors: in contrast, 
for ordinary functions, the square root of $-\Delta$
cannot be realized as a local differential operator.



\subsection{Index of the Dirac operator}

\begin{prop} If $X$ is a compact spin manifold, then $\dirac: C^\infty(SX) \to C^\infty(SX)$ 
is an elliptic operator. 
\end{prop}

In particular, if we decompose $\dirac$ with respect to the grading of $S$,
\begin{equation}
  \dirac = \begin{pmatrix} 0 & \dirac^1 \\ \dirac^0 & 0 \end{pmatrix},
\end{equation}
then each of $\dirac^0$, $\dirac^1$ is also elliptic.
Since $\dirac$ is symmetric, these two elliptic operators are formally 
adjoint to one another.
Now we consider the \ti{index}
\begin{equation}
  \ind \dirac^0 = \dim \ker \dirac^0 - \dim \coker \dirac^0 = \dim \ker \dirac^0 - \dim \ker \dirac^1.
\end{equation}

We are going to give a formula for $\ind \dirac^0$ in terms of characteristic
classes.
Recall that given a symmetric function $C(\{y_i\})$ where the $y_i$ are formal variables, 
we can define a corresponding characteristic class of $\SO(n)$-bundles over $X$: 
to construct it, we locally block-diagonalize the curvature 
$F = \bigoplus_i \begin{pmatrix} 0 & F_i \\ -F_i & 0 \end{pmatrix} \in \fso(n)$
and then take the form $C(\{\frac{F_i}{2\pi\I}\}) \in \Omega^*(X)$.\footnote{We 
will only use functions invariant under $y_i \to -y_i$, so we actually 
get characteristic classes of ${\mathrm O}(n)$-bundles.}

\begin{defn} If $X$ is a compact Riemannian manifold, $p(X) \in \Omega^*(X)$
is the characteristic class of $TX$ associated to the symmetric function
\begin{equation}
  \prod_i (1 + y_i^2).
\end{equation}
It is a sum
\begin{equation}
  p(X) = 1 + p_1(X) + p_2(X) + \cdots, \qquad p_k(X) \in \Omega^{4k}(X).
\end{equation}
\end{defn}

\begin{example}
We have $p_1(X) = -\frac{1}{4\pi^2} \Tr R \wedge R$, where
$R \in \Omega^2(\fso(TX))$ is the Riemann curvature, and $\Tr$ denotes
the usual trace, thinking of elements of $\fso(n)$ as $n \times n$ matrices.
\end{example}

The forms $p_k(X)$ are actually de Rham representatives of classes in $H^{4k}(X,\Z)$;
thus integrating them, or their products, gives integers.
But as we will see momentarily, they have considerably stronger 
divisibility properties than mere integrality!

\begin{example} The first nontrivial examples of Pontryagin classes arise in
dimension $4$, where we have:
\begin{equation} \label{eq:pontr-examples}
\int_{S^4} p_1(S^4) = 0, \qquad \int_{\C\PP^2} p_1(\C\PP^2) = 3, \qquad \int_{K3} p_1(K3) = -48.
\end{equation}
\end{example}
These integers have a simple interpretation:
\begin{thm} If $X$ is a $4$-manifold then $\int_X p_1(X) = 3 \, {\mathrm{sign}}(X)$.
\end{thm}

\begin{exercise} Use \eqref{eq:pontr-examples} to
show that there is no orientation-reversing diffeomorphism of $\C\PP^2$ or $K3$:
these manifolds are, in some essential way, \ti{chiral} --- in contrast to $S^4$
for which the antipodal map is orientation-reversing.
\end{exercise}

\begin{defn} \label{def:ahat} 
If $X$ is a compact Riemannian manifold, $\hat A(X) \in \Omega^*(X)$
is the characteristic class of $TX$ associated to the symmetric function
\begin{equation}
  \prod_i \frac{y_i/2}{\sinh(y_i/2)} = \prod_i \left( 1 - \frac{y_i^2}{24} + \frac{7 y_i^4}{5760} + \cdots \right)
\end{equation}
\end{defn}
So $\hat A(X)$ is a sum of forms in degrees $4k$.
We can expand $\hat A(X)$ in terms of Pontryagin classes:
\begin{equation}
  \hat A(X) = 1 - \frac{1}{24} p_1(X) + \frac{7 p_1(X)^2 - 4 p_2(X)}{5760} + \cdots
\end{equation}

\begin{thm}[Atiyah-Singer index theorem for the Dirac operator on complex spinors]
\label{thm:atiyah-singer}
We have
\begin{equation}
  \ind \dirac^0 = \int_X \hat A(X).
\end{equation}
\end{thm}
This implies in particular that $\int_X \hat A(X)$ is actually an integer, so
e.g. for a spinnable $4$-manifold, $\int_X p_1(X)$ is a multiple of $24$.
(Even more is true: if $X$ is a spinnable
manifold of dimension $8n+4$, $\int_X \hat A(X)$ is an \ti{even} integer,
because \fixme{...})


\subsection{Hodge theory}

\begin{defn}[Formal adjoint of $\de$]
If $X$ is a Riemannian manifold of dimension $n$,
the formal adjoint of $\de$
is the operator
\begin{equation}
  \de^*: \Omega^{k}(X) \to \Omega^{k-1}(X)
\end{equation}
given by
\begin{equation}
  \de^* = (-1)^{n(k+1)+1} \star \de \star.
\end{equation}
\end{defn}

If $X$ is a compact Riemannian manifold, we have
the $L^2$ pairing on $\Omega^*(X)$ given by
\begin{equation}
  \IP{\alpha,\beta} = \int_X \IP{\alpha(x),\beta(x)} \, \de vol_X = \int_X \alpha \wedge \star \beta.
\end{equation}

\begin{lem}[Formal adjoint is actual adjoint on compact manifold]
If $X$ is a compact Riemannian manifold, $\de^*$ is the actual adjoint
with respect to the $L^2$ pairing, i.e.
\begin{equation}
  \IP{\de^* \alpha,\beta} = \IP{\alpha,\de \beta}.
\end{equation}
\end{lem}

\begin{defn}[Laplace operator on Riemannian manifold]
If $X$ is a Riemannian manifold, we define the form Laplacian
\begin{equation}
  \Delta: \Omega^k(X) \to \Omega^k(X)
\end{equation}
by
\begin{equation} \label{eq:form-laplacian}
  \Delta = \de \de^* + \de^* \de.
\end{equation}
\end{defn}
\fixme{...}


\subsection{Symplectic manifolds}

\begin{defn}[Nondegenerate skew pairing] \label{def:nondegenerate-skew-pairing}
Suppose $V$ is a vector space over $\R$ or $\C$.
We say $\omega \in \wedge^2(V)$ is \ti{nondegenerate}
if the map
\begin{align}
  V &\to V^* \\
  v &\mapsto \iota_v \omega = \omega(v,\cdot)
\end{align}
is an isomorphism.
\end{defn}

\begin{prop}[Standard basis for a nondegenerate skew pairing]
\label{prop:standard-nondegenerate-skew-pairing}
If $V$ is a finite-dimensional vector space over $\R$ or $\C$, and
$\omega \in \wedge^2(V)$ is nondegenerate, then $V$ has
dimension $2n$ for some $n$, and there
exists a basis $\{e_1, \dots, e_n, f_1, \dots, f_n\}$ for $V$
such that
\begin{align}
\omega(e_i, f_j) &= \delta_{ij}, \\
\omega(e_i, e_j) &= 0, \\
\omega(f_i, f_j) &= 0.
\end{align}
\end{prop}

\begin{defn}[Symplectic manifold] \label{def:symplectic-manifold}
A \ti{symplectic manifold} is a pair $(X,\omega)$
where $X$ is a manifold and
$\omega \in \Omega^2(X)$, such that
\begin{equation}
  \de \omega = 0
\end{equation}
and $\omega(x)$ is nondegenerate for every $x \in X$.
\end{defn}

\begin{defn}[Exact symplectic manifold]
An \ti{exact symplectic manifold} is a tuple $(X,\omega,\lambda)$
where $(X,\omega)$ is a symplectic manifold and $\lambda \in \Omega^1(X)$ has $\de \lambda = \omega$.
\end{defn}

\begin{example}[Cotangent bundle is an exact symplectic manifold]
If $X$ is any manifold and $Y = T^* X$, then $Y$ carries a canonical
$1$-form (``Liouville form''), $\lambda \in \Omega^1(Y)$,
defined as follows:
\begin{equation}
  \lambda(x,p) \cdot v = p \cdot \pi_* v \qquad x \in X, p \in T^*_x X, v \in TY.
\end{equation}
Then there is a canonical symplectic form on $Y$ given by
\begin{equation}
\omega = \de \lambda.
\end{equation}
\end{example}

\begin{exercise}
Show that, in the canonical coordinate system $(p_i,q_i)$
on $T^* X$ induced by a coordinate system $(q_i)$ on $X$,
we have
$\lambda = \sum_{i=1}^n p_i \de q_i$, and
$\omega = \sum_{i=1}^n \de p_i \wedge \de q_i$.
\end{exercise}


\begin{defn}[Moment map] \label{def:moment-map}
Suppose $X$ is a symplectic manifold, with symplectic form $\omega$,
acted on by a real Lie group $G$. Let $\fg = \Lie G$ and let
\begin{equation}
\rho: \fg \to \Vect(X)
\end{equation}
be the infinitesimal action.
Suppose given a function
\begin{equation} \label{eq:moment-map}
 \mu: X \to \fg^*
\end{equation}
and for $Z \in \fg$ write $\mu_Z = \mu \cdot Z$.
We say $\mu$ is a \ti{moment map} for the $G$-action if
for all $Z \in \fg$ we have
\begin{equation} \label{eq:moment-map-condition-3}
  \iota_{\rho(Z)} \omega = \de \mu_Z,
\end{equation}
and in addition the map \eqref{eq:moment-map} is $G$-equivariant
(for the $G$-action on $X$ and the coadjoint $G$-action on $\fg^*$).
\end{defn}
In particular, the moment map $\mu$
\ti{determines} the $G$-action.

Note that moment maps do not always exist.
At the very least, the existence of a moment
map requires that $\iota_{\rho(Z)} \omega$ is closed
for all $Z \in \fg$, by \eqref{eq:moment-map-condition-3}. Using
Cartan's ``magic formula''
\begin{equation} \label{eq:cartan-magic-formula}
  \cL_v \omega = \de (\iota_v \omega) + \iota_v (\de \omega)
\end{equation}
and the fact that $\de \omega = 0$,
this is equivalent to requiring $\cL_{\rho(Z)}\omega = 0$,
i.e. the $G$-action preserves $\omega$ infinitesimally.
But even if the $G$-action preserves $\omega$,
a moment map still may not exist.\footnote{When $G$ is compact,
moment maps exist at least
\ti{locally} on $X$, though maybe not globally. When $G$ is not
compact there can even be a local obstruction.}

Conversely, if a moment map $\mu$ does exist and $\fg$
has nontrivial center, we can get another moment map by taking
$\mu' = \mu + c$, where $c$ is fixed by the \ti{coadjoint}
action of $G$, i.e. $c \in [\fg,\fg]^\perp \subset \fg^*$.

\begin{exercise}
Suppose $X = \R^2$ with $\omega = \de x_1 \wedge \de x_2$, and
$G = SO(2) = U(1) = \{e^{\I \alpha}: \alpha \in \R \}$.
Then $\fu(1)$ is $1$-dimensional, spanned by $\partial_\alpha$.
Show that the counterclockwise rotation action of $U(1)$ on $X$,
given by the matrices
\begin{equation}
   \begin{pmatrix} \cos \alpha & - \sin \alpha \\ \sin \alpha & \cos \alpha \end{pmatrix},
 \end{equation}
has a moment map $\mu: \R^2 \to \fu(1)^*$, given by
\begin{equation}
  \mu(x_1,x_2) \cdot \partial_\alpha = -\half (x_1^2 + x_2^2).
\end{equation}
\end{exercise}
Thus if we identify $\fu(1) \simeq \R$ using the generator
$\partial_\alpha$, we can think of $\mu$ just as an $\R$-valued function
on $X$,
\begin{equation}
  \mu(x_1,x_2) = -\half (x_1^2 + x_2^2).
\end{equation}

\begin{exercise} \label{exc:cotangent-moment-map}
Suppose $X$ is any manifold, with a compact
group $G$ acting. Then $T^* X$ is a symplectic manifold
which also has a canonical action of $G$. Verify that
\begin{equation}
  \mu_Z(x,p) = -p \cdot (\rho(Z)(x)) \qquad x \in X, p \in T^*_x X
\end{equation}
gives a moment map for this action.
\end{exercise}


\printbibliography




\end{document}
